<!DOCTYPE html>
<html lang="en-US">

<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>User Manual</title>
  <meta name="description"
    content="rust-analyzer: building a better Rust IDE">

  <link rel="stylesheet" href="/css/asciidoctor.css">
  <link rel="stylesheet" href="/css/rouge-github.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="canonical" href="https://rust-analyzer.github.io//manual.html">
  <link rel="alternate" type="application/rss+xml" title="rust-analyzer"
    href="https://rust-analyzer.github.io//feed.xml">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/fav/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/fav/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/fav/favicon-16x16.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="mask-icon" href="/assets/fav/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  
  <header>
    <div id="header-inner">
      <div id="header-left">
        <a class="site-title" href="/">
          <img src="/assets/rust-analyzer.svg" alt="rust analyzer" id="header-logo">
        </a>
      </div>
      <div id="header-right">
        <a class="nav-link" href="https://opencollective.com/rust-analyzer/">Sponsor</a>
        <a class="nav-link" href="/manual.html">Docs</a>
        <a class="nav-link" href="/blog">Blog</a>
        <a class="nav-link" href="/thisweek">Changelog</a>
      </div>
    </div>
  </header>
  

  <main>
    <article>
<h1>User Manual</h1>
<div class="post-meta sect1">
  
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>At its core, rust-analyzer is a <strong>library</strong> for semantic analysis of Rust code as it changes over time.
This manual focuses on a specific usage of the library&#8201;&#8212;&#8201;running it as part of a server that implements the
<a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a> (LSP).
The LSP allows various code editors, like VS Code, Emacs or Vim, to implement semantic features like completion or goto definition by talking to an external language server process.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph lead">
<p>To improve this document, send a pull request:<br>
<a href="https://github.com/rust-lang/rust-analyzer/blob/master/docs/user/manual.adoc">https://github.com/rust-analyzer/&#8230;&#8203;/manual.adoc</a></p>
</div>
<div class="paragraph">
<p>The manual is written in <a href="https://asciidoc.org">AsciiDoc</a> and includes some extra files which are generated from the source code. Run <code>cargo test</code> and <code>cargo test -p xtask</code> to create these and then <code>asciidoctor manual.adoc</code> to create an HTML copy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have questions about using rust-analyzer, please ask them in the <a href="https://users.rust-lang.org/c/ide/14">&#8220;IDEs and Editors&#8221;</a> topic of Rust users forum.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#toolchain">Toolchain</a></li>
<li><a href="#vs-code">VS Code</a></li>
<li><a href="#rust-analyzer-language-server-binary">rust-analyzer Language Server Binary</a></li>
<li><a href="#vs-code-or-vscodium-in-flatpak">VS Code or VSCodium in Flatpak</a></li>
<li><a href="#emacs">Emacs</a></li>
<li><a href="#vimneovim">Vim/Neovim</a></li>
<li><a href="#sublime-text">Sublime Text</a></li>
<li><a href="#gnome-builder">GNOME Builder</a></li>
<li><a href="#eclipse-ide">Eclipse IDE</a></li>
<li><a href="#kate-text-editor">Kate Text Editor</a></li>
<li><a href="#juci">juCi++</a></li>
<li><a href="#kakoune">Kakoune</a></li>
<li><a href="#helix">Helix</a></li>
<li><a href="#visual-studio">Visual Studio 2022</a></li>
<li><a href="#lapce">Lapce</a></li>
<li><a href="#crates">Crates</a></li>
<li><a href="#zed">Zed</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#non-cargo-based-projects">Non-Cargo Based Projects</a></li>
<li><a href="#security">Security</a></li>
<li><a href="#privacy">Privacy</a></li>
<li><a href="#features">Features</a>
<ul class="sectlevel2">
<li><a href="#annotations">Annotations</a></li>
<li><a href="#auto-import">Auto Import</a></li>
<li><a href="#completion-with-autoimport">Completion With Autoimport</a></li>
<li><a href="#debug-itemtree">Debug ItemTree</a></li>
<li><a href="#expand-macro-recursively">Expand Macro Recursively</a></li>
<li><a href="#expand-and-shrink-selection">Expand and Shrink Selection</a></li>
<li><a href="#file-structure">File Structure</a></li>
<li><a href="#find-all-references">Find All References</a></li>
<li><a href="#folding">Folding</a></li>
<li><a href="#format-string-completion">Format String Completion</a></li>
<li><a href="#go-to-declaration">Go to Declaration</a></li>
<li><a href="#go-to-definition">Go to Definition</a></li>
<li><a href="#go-to-implementation">Go to Implementation</a></li>
<li><a href="#go-to-type-definition">Go to Type Definition</a></li>
<li><a href="#highlight-related">Highlight Related</a></li>
<li><a href="#hover">Hover</a></li>
<li><a href="#inlay-hints">Inlay Hints</a></li>
<li><a href="#interpret-function">Interpret Function</a></li>
<li><a href="#join-lines">Join Lines</a></li>
<li><a href="#magic-completions">Magic Completions</a></li>
<li><a href="#matching-brace">Matching Brace</a></li>
<li><a href="#memory-usage">Memory Usage</a></li>
<li><a href="#move-item">Move Item</a></li>
<li><a href="#on-enter">On Enter</a></li>
<li><a href="#on-typing-assists">On Typing Assists</a></li>
<li><a href="#open-docs">Open Docs</a></li>
<li><a href="#parent-module">Parent Module</a></li>
<li><a href="#related-tests">Related Tests</a></li>
<li><a href="#rename">Rename</a></li>
<li><a href="#run">Run</a></li>
<li><a href="#semantic-syntax-highlighting">Semantic Syntax Highlighting</a></li>
<li><a href="#show-dependency-tree">Show Dependency Tree</a></li>
<li><a href="#show-syntax-tree">Show Syntax Tree</a></li>
<li><a href="#shuffle-crate-graph">Shuffle Crate Graph</a></li>
<li><a href="#status">Status</a></li>
<li><a href="#structural-search-and-replace">Structural Search and Replace</a></li>
<li><a href="#user-snippet-completions">User Snippet Completions</a></li>
<li><a href="#view-crate-graph">View Crate Graph</a></li>
<li><a href="#view-hir">View Hir</a></li>
<li><a href="#view-memory-layout">View Memory Layout</a></li>
<li><a href="#view-mir">View Mir</a></li>
<li><a href="#workspace-symbol">Workspace Symbol</a></li>
</ul>
</li>
<li><a href="#assists-code-actions">Assists (Code Actions)</a></li>
<li><a href="#diagnostics">Diagnostics</a>
<ul class="sectlevel2">
<li><a href="#clippy">Clippy</a></li>
<li><a href="#break-outside-of-loop">break-outside-of-loop</a></li>
<li><a href="#expected-function">expected-function</a></li>
<li><a href="#inactive-code">inactive-code</a></li>
<li><a href="#incoherent-impl">incoherent-impl</a></li>
<li><a href="#incorrect-ident-case">incorrect-ident-case</a></li>
<li><a href="#invalid-derive-target">invalid-derive-target</a></li>
<li><a href="#macro-error">macro-error</a></li>
<li><a href="#macro-error-2">macro-error</a></li>
<li><a href="#malformed-derive">malformed-derive</a></li>
<li><a href="#mismatched-arg-count">mismatched-arg-count</a></li>
<li><a href="#mismatched-tuple-struct-pat-arg-count">mismatched-tuple-struct-pat-arg-count</a></li>
<li><a href="#missing-fields">missing-fields</a></li>
<li><a href="#missing-match-arm">missing-match-arm</a></li>
<li><a href="#missing-unsafe">missing-unsafe</a></li>
<li><a href="#moved-out-of-ref">moved-out-of-ref</a></li>
<li><a href="#need-mut">need-mut</a></li>
<li><a href="#no-such-field">no-such-field</a></li>
<li><a href="#private-assoc-item">private-assoc-item</a></li>
<li><a href="#private-field">private-field</a></li>
<li><a href="#remove-trailing-return">remove-trailing-return</a></li>
<li><a href="#remove-unnecessary-else">remove-unnecessary-else</a></li>
<li><a href="#replace-filter-map-next-with-find-map">replace-filter-map-next-with-find-map</a></li>
<li><a href="#trait-impl-incorrect-safety">trait-impl-incorrect-safety</a></li>
<li><a href="#trait-impl-missing-assoc_item">trait-impl-missing-assoc_item</a></li>
<li><a href="#trait-impl-orphan">trait-impl-orphan</a></li>
<li><a href="#trait-impl-redundant-assoc_item">trait-impl-redundant-assoc_item</a></li>
<li><a href="#type-mismatch">type-mismatch</a></li>
<li><a href="#typed-hole">typed-hole</a></li>
<li><a href="#undeclared-label">undeclared-label</a></li>
<li><a href="#unimplemented-builtin-macro">unimplemented-builtin-macro</a></li>
<li><a href="#unlinked-file">unlinked-file</a></li>
<li><a href="#unnecessary-braces">unnecessary-braces</a></li>
<li><a href="#unreachable-label">unreachable-label</a></li>
<li><a href="#unresolved-assoc-item">unresolved-assoc-item</a></li>
<li><a href="#unresolved-extern-crate">unresolved-extern-crate</a></li>
<li><a href="#unresolved-field">unresolved-field</a></li>
<li><a href="#unresolved-import">unresolved-import</a></li>
<li><a href="#unresolved-macro-call">unresolved-macro-call</a></li>
<li><a href="#unresolved-method">unresolved-method</a></li>
<li><a href="#unresolved-module">unresolved-module</a></li>
<li><a href="#unresolved-proc-macro">unresolved-proc-macro</a></li>
<li><a href="#unused-mut">unused-mut</a></li>
<li><a href="#unused-variables">unused-variables</a></li>
</ul>
</li>
<li><a href="#editor-features">Editor Features</a>
<ul class="sectlevel2">
<li><a href="#vs-code-2">VS Code</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In theory, one should be able to just install the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a> and have it automatically work with any editor.
We are not there yet, so some editor specific setup is required.</p>
</div>
<div class="paragraph">
<p>Additionally, rust-analyzer needs the sources of the standard library.
If the source code is not present, rust-analyzer will attempt to install it automatically.</p>
</div>
<div class="paragraph">
<p>To add the sources manually, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>rustup component add rust-src
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="toolchain"><a class="anchor" href="#toolchain"></a>Toolchain</h3>
<div class="paragraph">
<p>Only the latest stable standard library source is officially supported for use with rust-analyzer.
If you are using an older toolchain or have an override set, rust-analyzer may fail to understand the Rust source.
You will either need to update your toolchain or use an older version of rust-analyzer that is compatible with your toolchain.</p>
</div>
<div class="paragraph">
<p>If you are using an override in your project, you can still force rust-analyzer to use the stable toolchain via the environment variable <code>RUSTUP_TOOLCHAIN</code>.
For example, with VS Code or coc-rust-analyzer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.server.extraEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"RUSTUP_TOOLCHAIN"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stable"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vs-code"><a class="anchor" href="#vs-code"></a>VS Code</h3>
<div class="paragraph">
<p>This is the best supported editor at the moment.
The rust-analyzer plugin for VS Code is maintained
<a href="https://github.com/rust-lang/rust-analyzer/tree/master/editors/code">in tree</a>.</p>
</div>
<div class="paragraph">
<p>You can install the latest release of the plugin from
<a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer">the marketplace</a>.</p>
</div>
<div class="paragraph">
<p>Note that the plugin may cause conflicts with the
<a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">previous official Rust plugin</a>.
The latter is no longer maintained and should be uninstalled.</p>
</div>
<div class="paragraph">
<p>The server binary is stored in the extension install directory, which starts with <code>rust-lang.rust-analyzer-</code> and is located under:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux: <code>~/.vscode/extensions</code></p>
</li>
<li>
<p>Linux (Remote, such as WSL): <code>~/.vscode-server/extensions</code></p>
</li>
<li>
<p>macOS: <code>~/.vscode/extensions</code></p>
</li>
<li>
<p>Windows: <code>%USERPROFILE%\.vscode\extensions</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As an exception, on NixOS, the extension makes a copy of the server and stores it under <code>~/.config/Code/User/globalStorage/rust-lang.rust-analyzer</code>.</p>
</div>
<div class="paragraph">
<p>Note that we only support the two most recent versions of VS Code.</p>
</div>
<div class="sect3">
<h4 id="updates"><a class="anchor" href="#updates"></a>Updates</h4>
<div class="paragraph">
<p>The extension will be updated automatically as new versions become available.
It will ask your permission to download the matching language server version binary if needed.</p>
</div>
<div class="sect4">
<h5 id="nightly"><a class="anchor" href="#nightly"></a>Nightly</h5>
<div class="paragraph">
<p>We ship nightly releases for VS Code.
To help us out by testing the newest code, you can enable pre-release versions in the Code extension page.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="manual-installation"><a class="anchor" href="#manual-installation"></a>Manual installation</h4>
<div class="paragraph">
<p>Alternatively, download a VSIX corresponding to your platform from the
<a href="https://github.com/rust-lang/rust-analyzer/releases">releases</a> page.</p>
</div>
<div class="paragraph">
<p>Install the extension with the <code>Extensions: Install from VSIX</code> command within VS Code, or from the command line via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>$ code --install-extension /path/to/rust-analyzer.vsix
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are running an unsupported platform, you can install <code>rust-analyzer-no-server.vsix</code> and compile or obtain a server binary.
Copy the server anywhere, then add the path to your settings.json, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.server.path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~/.local/bin/rust-analyzer-linux"</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="building-from-source"><a class="anchor" href="#building-from-source"></a>Building From Source</h4>
<div class="paragraph">
<p>Both the server and the Code plugin can be installed from source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre>$ git clone https://github.com/rust-lang/rust-analyzer.git &amp;&amp; cd rust-analyzer
$ cargo xtask install
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll need Cargo, nodejs (matching a supported version of VS Code) and npm for this.</p>
</div>
<div class="paragraph">
<p>Note that installing via <code>xtask install</code> does not work for VS Code Remote, instead you&#8217;ll need to install the <code>.vsix</code> manually.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re not using Code, you can compile and install only the LSP server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>$ cargo xtask install --server
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure that <code>.cargo/bin</code> is in <code>$PATH</code> and precedes paths where <code>rust-analyzer</code> may also be installed.
Specifically, <code>rustup</code> includes a proxy called <code>rust-analyzer</code>, which can cause problems if you&#8217;re planning to use a source build or even a downloaded binary.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rust-analyzer-language-server-binary"><a class="anchor" href="#rust-analyzer-language-server-binary"></a>rust-analyzer Language Server Binary</h3>
<div class="paragraph">
<p>Other editors generally require the <code>rust-analyzer</code> binary to be in <code>$PATH</code>.
You can download pre-built binaries from the <a href="https://github.com/rust-lang/rust-analyzer/releases">releases</a> page.
You will need to uncompress and rename the binary for your platform, e.g. from <code>rust-analyzer-aarch64-apple-darwin.gz</code> on Mac OS to <code>rust-analyzer</code>, make it executable, then move it into a directory in your <code>$PATH</code>.</p>
</div>
<div class="paragraph">
<p>On Linux to install the <code>rust-analyzer</code> binary into <code>~/.local/bin</code>, these commands should work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.local/bin
<span class="nv">$ </span>curl <span class="nt">-L</span> https://github.com/rust-lang/rust-analyzer/releases/latest/download/rust-analyzer-x86_64-unknown-linux-gnu.gz | <span class="nb">gunzip</span> <span class="nt">-c</span> - <span class="o">&gt;</span> ~/.local/bin/rust-analyzer
<span class="nv">$ </span><span class="nb">chmod</span> +x ~/.local/bin/rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure that <code>~/.local/bin</code> is listed in the <code>$PATH</code> variable and use the appropriate URL if you&#8217;re not on a <code>x86-64</code> system.</p>
</div>
<div class="paragraph">
<p>You don&#8217;t have to use <code>~/.local/bin</code>, any other path like <code>~/.cargo/bin</code> or <code>/usr/local/bin</code> will work just as well.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can install it from source using the command below.
You&#8217;ll need the latest stable version of the Rust toolchain.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nv">$ </span>git clone https://github.com/rust-lang/rust-analyzer.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>rust-analyzer
<span class="nv">$ </span>cargo xtask <span class="nb">install</span> <span class="nt">--server</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If your editor can&#8217;t find the binary even though the binary is on your <code>$PATH</code>, the likely explanation is that it doesn&#8217;t see the same <code>$PATH</code> as the shell, see <a href="https://github.com/rust-lang/rust-analyzer/issues/1811">this issue</a>.
On Unix, running the editor from a shell or changing the <code>.desktop</code> file to set the environment should help.</p>
</div>
<div class="sect3">
<h4 id="rustup"><a class="anchor" href="#rustup"></a>rustup</h4>
<div class="paragraph">
<p><code>rust-analyzer</code> is available in <code>rustup</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>rustup component add rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="arch-linux"><a class="anchor" href="#arch-linux"></a>Arch Linux</h4>
<div class="paragraph">
<p>The <code>rust-analyzer</code> binary can be installed from the repos or AUR (Arch User Repository):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.archlinux.org/packages/extra/x86_64/rust-analyzer/"><code>rust-analyzer</code></a> (built from latest tagged source)</p>
</li>
<li>
<p><a href="https://aur.archlinux.org/packages/rust-analyzer-git"><code>rust-analyzer-git</code></a> (latest Git version)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Install it with pacman, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>pacman <span class="nt">-S</span> rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gentoo-linux"><a class="anchor" href="#gentoo-linux"></a>Gentoo Linux</h4>
<div class="paragraph">
<p>There are two ways to install <code>rust-analyzer</code> under Gentoo:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>when installing <code>dev-lang/rust</code> or <code>dev-lang/rust-bin</code>, enable the <code>rust-analyzer</code> and <code>rust-src</code> USE flags</p>
</li>
<li>
<p>use the <code>rust-analyzer</code> component in <code>rustup</code> (see instructions above)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that in both cases, the version installed lags for a couple of months behind the official releases on GitHub.
To obtain a newer one, you can download a binary from GitHub Releases or building from source.</p>
</div>
</div>
<div class="sect3">
<h4 id="macos"><a class="anchor" href="#macos"></a>macOS</h4>
<div class="paragraph">
<p>The <code>rust-analyzer</code> binary can be installed via <a href="https://brew.sh/">Homebrew</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>brew <span class="nb">install </span>rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vs-code-or-vscodium-in-flatpak"><a class="anchor" href="#vs-code-or-vscodium-in-flatpak"></a>VS Code or VSCodium in Flatpak</h3>
<div class="paragraph">
<p>Setting up <code>rust-analyzer</code> with a Flatpak version of Code is not trivial because of the Flatpak sandbox.
While the sandbox can be disabled for some directories, <code>/usr/bin</code> will always be mounted under <code>/run/host/usr/bin</code>.
This prevents access to the system&#8217;s C compiler, a system-wide installation of Rust, or any other libraries you might want to link to.
Some compilers and libraries can be acquired as Flatpak SDKs, such as <code>org.freedesktop.Sdk.Extension.rust-stable</code> or <code>org.freedesktop.Sdk.Extension.llvm15</code>.</p>
</div>
<div class="paragraph">
<p>If you use a Flatpak SDK for Rust, there should be no extra steps necessary.</p>
</div>
<div class="paragraph">
<p>If you want to use Flatpak in combination with <code>rustup</code>, the following steps might help:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>both Rust and <code>rustup</code> have to be installed using <a href="https://rustup.rs" class="bare">https://rustup.rs</a>. Distro packages <em>will not</em> work.</p>
</li>
<li>
<p>you need to launch Code, open a terminal and run <code>echo $PATH</code></p>
</li>
<li>
<p>using <a href="https://flathub.org/apps/details/com.github.tchx84.Flatseal">Flatseal</a>, you must add an environment variable called <code>PATH</code>.
Set its value to the output from above, appending <code>:~/.cargo/bin</code>, where <code>~</code> is the path to your home directory.
You must replace <code>~</code>, as it won&#8217;t be expanded otherwise.</p>
</li>
<li>
<p>while Flatseal is open, you must enable access to "All user files"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A C compiler should already be available via <code>org.freedesktop.Sdk</code>.
Any other tools or libraries you will need to acquire  from Flatpak.</p>
</div>
</div>
<div class="sect2">
<h3 id="emacs"><a class="anchor" href="#emacs"></a>Emacs</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</div>
<div class="paragraph">
<p>To use <code>rust-analyzer</code>, you need to install and enable one of the two popular LSP client implementations for Emacs, <a href="https://github.com/joaotavora/eglot">Eglot</a> or <a href="https://github.com/emacs-lsp/lsp-mode">LSP Mode</a>. Both enable <code>rust-analyzer</code> by default in rust buffers if it is available.</p>
</div>
<div class="sect3">
<h4 id="eglot"><a class="anchor" href="#eglot"></a>Eglot</h4>
<div class="paragraph">
<p>Eglot is the more minimalistic and lightweight LSP client for Emacs, integrates well with existing Emacs functionality and is built into Emacs starting from release 29.</p>
</div>
<div class="paragraph">
<p>After installing Eglot, e.g. via <code>M-x package-install</code> (not needed from Emacs 29), you can enable it via the <code>M-x eglot</code> command or load it automatically in <code>rust-mode</code> via</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="emacs-lisp"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'rust-mode-hook</span> <span class="ss">'eglot-ensure</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable clippy, you will need to configure the initialization options to pass the <code>check.command</code> setting.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="emacs-lisp"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'eglot-server-programs</span>
             <span class="o">'</span><span class="p">((</span><span class="nv">rust-ts-mode</span> <span class="nv">rust-mode</span><span class="p">)</span> <span class="o">.</span>
               <span class="p">(</span><span class="s">"rust-analyzer"</span> <span class="ss">:initializationOptions</span> <span class="p">(</span><span class="ss">:check</span> <span class="p">(</span><span class="ss">:command</span> <span class="s">"clippy"</span><span class="p">)))))</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>For more detailed instructions and options see the <a href="https://joaotavora.github.io/eglot">Eglot manual</a> (also available from Emacs via <code>M-x info</code>) and the
<a href="https://github.com/joaotavora/eglot/blob/master/README.md">Eglot readme</a>.</p>
</div>
<div class="paragraph">
<p>Eglot does not support the rust-analyzer extensions to the language-server protocol and does not aim to do so in the future. The <a href="https://github.com/nemethf/eglot-x#rust-analyzer-extensions">eglot-x</a> package adds experimental support for those LSP extensions.</p>
</div>
</div>
<div class="sect3">
<h4 id="lsp-mode"><a class="anchor" href="#lsp-mode"></a>LSP Mode</h4>
<div class="paragraph">
<p>LSP-mode is the original LSP-client for emacs. Compared to Eglot it has a larger codebase and supports more features, like LSP protocol extensions.
With extension packages like <a href="https://github.com/emacs-lsp/lsp-mode">LSP UI</a> it offers a lot of visual eyecandy.
Further it integrates well with <a href="https://github.com/emacs-lsp/dap-mode">DAP mode</a> for support of the Debug Adapter Protocol.</p>
</div>
<div class="paragraph">
<p>You can install LSP-mode via <code>M-x package-install</code> and then run it via the <code>M-x lsp</code> command or load it automatically in rust buffers with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="emacs-lisp"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'rust-mode-hook</span> <span class="ss">'lsp-deferred</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information on how to set up LSP mode and its extension package see the instructions in the <a href="https://emacs-lsp.github.io/lsp-mode/page/installation">LSP mode manual</a>.
Also see the <a href="https://emacs-lsp.github.io/lsp-mode/page/lsp-rust-analyzer/">rust-analyzer section</a> for <code>rust-analyzer</code> specific options and commands, which you can optionally bind to keys.</p>
</div>
<div class="paragraph">
<p>Note the excellent <a href="https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/">guide</a> from <a href="https://github.com/rksm">@rksm</a> on how to set-up Emacs for Rust development with LSP mode and several other packages.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vimneovim"><a class="anchor" href="#vimneovim"></a>Vim/Neovim</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.
Not needed if the extension can install/update it on its own, coc-rust-analyzer is one example.</p>
</div>
<div class="paragraph">
<p>There are several LSP client implementations for Vim or Neovim:</p>
</div>
<div class="sect3">
<h4 id="coc-rust-analyzer"><a class="anchor" href="#coc-rust-analyzer"></a>coc-rust-analyzer</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install coc.nvim by following the instructions at
<a href="https://github.com/neoclide/coc.nvim">coc.nvim</a>
(Node.js required)</p>
</li>
<li>
<p>Run <code>:CocInstall coc-rust-analyzer</code> to install
<a href="https://github.com/fannheyward/coc-rust-analyzer">coc-rust-analyzer</a>,
this extension implements <em>most</em> of the features supported in the VSCode extension:</p>
<div class="ulist">
<ul>
<li>
<p>automatically install and upgrade stable/nightly releases</p>
</li>
<li>
<p>same configurations as VSCode extension, <code>rust-analyzer.server.path</code>, <code>rust-analyzer.cargo.features</code> etc.</p>
</li>
<li>
<p>same commands too, <code>rust-analyzer.analyzerStatus</code>, <code>rust-analyzer.ssr</code> etc.</p>
</li>
<li>
<p>inlay hints for variables and method chaining, <em>Neovim Only</em></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note: for code actions, use <code>coc-codeaction-cursor</code> and <code>coc-codeaction-selected</code>; <code>coc-codeaction</code> and <code>coc-codeaction-line</code> are unlikely to be useful.</p>
</div>
</div>
<div class="sect3">
<h4 id="languageclient-neovim"><a class="anchor" href="#languageclient-neovim"></a>LanguageClient-neovim</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install LanguageClient-neovim by following the instructions
<a href="https://github.com/autozimu/LanguageClient-neovim">here</a></p>
<div class="ulist">
<ul>
<li>
<p>The GitHub project wiki has extra tips on configuration</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure by adding this to your Vim/Neovim config file (replacing the existing Rust-specific line if it exists):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:LanguageClient_serverCommands</span> <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span> <span class="s1">'rust'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust-analyzer'</span><span class="p">],</span>
<span class="se">\</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="youcompleteme"><a class="anchor" href="#youcompleteme"></a>YouCompleteMe</h4>
<div class="paragraph">
<p>Install YouCompleteMe by following the instructions
  <a href="https://github.com/ycm-core/YouCompleteMe#installation">here</a>.</p>
</div>
<div class="paragraph">
<p>rust-analyzer is the default in ycm, it should work out of the box.</p>
</div>
</div>
<div class="sect3">
<h4 id="ale"><a class="anchor" href="#ale"></a>ALE</h4>
<div class="paragraph">
<p>To use the LSP server in <a href="https://github.com/dense-analysis/ale">ale</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:ale_linters</span> <span class="p">=</span> <span class="p">{</span><span class="s1">'rust'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'analyzer'</span><span class="p">]}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="nvim-lsp"><a class="anchor" href="#nvim-lsp"></a>nvim-lsp</h4>
<div class="paragraph">
<p>Neovim 0.5 has built-in language server support.
For a quick start configuration of rust-analyzer, use <a href="https://github.com/neovim/nvim-lspconfig#rust_analyzer">neovim/nvim-lspconfig</a>.
Once <code>neovim/nvim-lspconfig</code> is installed, use <code>lua require'lspconfig'.rust_analyzer.setup({})</code> in your <code>init.vim</code>.</p>
</div>
<div class="paragraph">
<p>You can also pass LSP settings to the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre><span class="k">lua</span> <span class="p">&lt;&lt;</span> EOF
local nvim_lsp <span class="p">=</span> require<span class="s1">'lspconfig'</span>

local on_attach <span class="p">=</span> <span class="k">function</span><span class="p">(</span>client<span class="p">)</span>
    require<span class="s1">'completion'</span><span class="p">.</span>on_attach<span class="p">(</span>client<span class="p">)</span>
end

nvim_lsp<span class="p">.</span>rust_analyzer<span class="p">.</span>setup<span class="p">({</span>
    on_attach<span class="p">=</span>on_attach<span class="p">,</span>
    settings <span class="p">=</span> <span class="p">{</span>
        <span class="p">[</span><span class="s2">"rust-analyzer"</span><span class="p">]</span> <span class="p">=</span> <span class="p">{</span>
            imports <span class="p">=</span> <span class="p">{</span>
                granularity <span class="p">=</span> <span class="p">{</span>
                    group <span class="p">=</span> <span class="s2">"module"</span><span class="p">,</span>
                <span class="p">},</span>
                prefix <span class="p">=</span> <span class="s2">"self"</span><span class="p">,</span>
            <span class="p">},</span>
            cargo <span class="p">=</span> <span class="p">{</span>
                buildScripts <span class="p">=</span> <span class="p">{</span>
                    enable <span class="p">=</span> true<span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
            procMacro <span class="p">=</span> <span class="p">{</span>
                enable <span class="p">=</span> true
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
EOF
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://sharksforarms.dev/posts/neovim-rust/" class="bare">https://sharksforarms.dev/posts/neovim-rust/</a> for more tips on getting started.</p>
</div>
<div class="paragraph">
<p>Check out <a href="https://github.com/mrcjkb/rustaceanvim" class="bare">https://github.com/mrcjkb/rustaceanvim</a> for a batteries included rust-analyzer setup for Neovim.</p>
</div>
</div>
<div class="sect3">
<h4 id="vim-lsp"><a class="anchor" href="#vim-lsp"></a>vim-lsp</h4>
<div class="paragraph">
<p>vim-lsp is installed by following <a href="https://github.com/prabirshrestha/vim-lsp">the plugin instructions</a>.
It can be as simple as adding this line to your <code>.vimrc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>Plug <span class="s1">'prabirshrestha/vim-lsp'</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next you need to register the <code>rust-analyzer</code> binary.
If it is available in <code>$PATH</code>, you may want to add this to your <code>.vimrc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">if</span> <span class="nb">executable</span><span class="p">(</span><span class="s1">'rust-analyzer'</span><span class="p">)</span>
  <span class="k">au</span> <span class="nb">User</span> lsp_setup <span class="k">call</span> <span class="nb">lsp</span>#register_server<span class="p">({</span>
<span class="se">        \</span>   <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Rust Language Server'</span><span class="p">,</span>
<span class="se">        \</span>   <span class="s1">'cmd'</span><span class="p">:</span> <span class="p">{</span>server_info<span class="p">-&gt;[</span><span class="s1">'rust-analyzer'</span><span class="p">]},</span>
<span class="se">        \</span>   <span class="s1">'whitelist'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust'</span><span class="p">],</span>
<span class="se">        \</span> <span class="p">})</span>
<span class="k">endif</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no dedicated UI for the server configuration, so you would need to send any options as a value of the <code>initialization_options</code> field, as described in the <a href="#configuration">Configuration</a> section.
Here is an example of how to enable the proc-macro support:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="k">if</span> <span class="nb">executable</span><span class="p">(</span><span class="s1">'rust-analyzer'</span><span class="p">)</span>
  <span class="k">au</span> <span class="nb">User</span> lsp_setup <span class="k">call</span> <span class="nb">lsp</span>#register_server<span class="p">({</span>
<span class="se">        \</span>   <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Rust Language Server'</span><span class="p">,</span>
<span class="se">        \</span>   <span class="s1">'cmd'</span><span class="p">:</span> <span class="p">{</span>server_info<span class="p">-&gt;[</span><span class="s1">'rust-analyzer'</span><span class="p">]},</span>
<span class="se">        \</span>   <span class="s1">'whitelist'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust'</span><span class="p">],</span>
<span class="se">        \</span>   <span class="s1">'initialization_options'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>     <span class="s1">'cargo'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>       <span class="s1">'buildScripts'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>         <span class="s1">'enable'</span><span class="p">:</span> <span class="k">v</span><span class="p">:</span>true<span class="p">,</span>
<span class="se">        \</span>       <span class="p">},</span>
<span class="se">        \</span>     <span class="p">},</span>
<span class="se">        \</span>     <span class="s1">'procMacro'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>       <span class="s1">'enable'</span><span class="p">:</span> <span class="k">v</span><span class="p">:</span>true<span class="p">,</span>
<span class="se">        \</span>     <span class="p">},</span>
<span class="se">        \</span>   <span class="p">},</span>
<span class="se">        \</span> <span class="p">})</span>
<span class="k">endif</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sublime-text"><a class="anchor" href="#sublime-text"></a>Sublime Text</h3>
<div class="sect3">
<h4 id="sublime-text-4"><a class="anchor" href="#sublime-text-4"></a>Sublime Text 4:</h4>
<div class="ulist">
<ul>
<li>
<p>Follow the instructions in <a href="https://github.com/sublimelsp/LSP-rust-analyzer">LSP-rust-analyzer</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Install <a href="https://packagecontrol.io/packages/LSP-file-watcher-chokidar">LSP-file-watcher-chokidar</a> to enable file watching (<code>workspace/didChangeWatchedFiles</code>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="sublime-text-3"><a class="anchor" href="#sublime-text-3"></a>Sublime Text 3:</h4>
<div class="ulist">
<ul>
<li>
<p>Install the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</li>
<li>
<p>Install the <a href="https://packagecontrol.io/packages/LSP">LSP package</a>.</p>
</li>
<li>
<p>From the command palette, run <code>LSP: Enable Language Server Globally</code> and select <code>rust-analyzer</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If it worked, you should see "rust-analyzer, Line X, Column Y" on the left side of the status bar, and after waiting a bit, functionalities like tooltips on hovering over variables should become available.</p>
</div>
<div class="paragraph">
<p>If you get an error saying <code>No such file or directory: 'rust-analyzer'</code>, see the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a> section on installing the language server binary.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gnome-builder"><a class="anchor" href="#gnome-builder"></a>GNOME Builder</h3>
<div class="paragraph">
<p>GNOME Builder 3.37.1 and newer has native <code>rust-analyzer</code> support.
If the LSP binary is not available, GNOME Builder can install it when opening a Rust file.</p>
</div>
</div>
<div class="sect2">
<h3 id="eclipse-ide"><a class="anchor" href="#eclipse-ide"></a>Eclipse IDE</h3>
<div class="paragraph">
<p>Support for Rust development in the Eclipse IDE is provided by <a href="https://github.com/eclipse/corrosion">Eclipse Corrosion</a>.
If available in PATH or in some standard location, <code>rust-analyzer</code> is detected and powers editing of Rust files without further configuration.
If <code>rust-analyzer</code> is not detected, Corrosion will prompt you for configuration of your Rust toolchain and language server with a link to the <em>Window &gt; Preferences &gt; Rust</em> preference page; from here a button allows to download and configure <code>rust-analyzer</code>, but you can also reference another installation.
You&#8217;ll need to close and reopen all .rs and Cargo files, or to restart the IDE, for this change to take effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="kate-text-editor"><a class="anchor" href="#kate-text-editor"></a>Kate Text Editor</h3>
<div class="paragraph">
<p>Support for the language server protocol is built into Kate through the LSP plugin, which is included by default.
It is preconfigured to use rust-analyzer for Rust sources since Kate 21.12.</p>
</div>
<div class="paragraph">
<p>To change rust-analyzer config options, start from the following example and put it into Kate&#8217;s "User Server Settings" tab (located under the LSP Client settings):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"servers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"rust"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"initializationOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cachePriming"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allTargets"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"checkOnSave"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then click on apply, and restart the LSP server for your rust project.</p>
</div>
</div>
<div class="sect2">
<h3 id="juci"><a class="anchor" href="#juci"></a>juCi++</h3>
<div class="paragraph">
<p><a href="https://gitlab.com/cppit/jucipp">juCi++</a> has built-in support for the language server protocol, and since version 1.7.0 offers installation of both Rust and rust-analyzer when opening a Rust file.</p>
</div>
</div>
<div class="sect2">
<h3 id="kakoune"><a class="anchor" href="#kakoune"></a>Kakoune</h3>
<div class="paragraph">
<p><a href="https://kakoune.org/">Kakoune</a> supports LSP with the help of <a href="https://github.com/kak-lsp/kak-lsp"><code>kak-lsp</code></a>.
Follow the <a href="https://github.com/kak-lsp/kak-lsp#installation">instructions</a> to install <code>kak-lsp</code>.
To configure <code>kak-lsp</code>, refer to the <a href="https://github.com/kak-lsp/kak-lsp#configuring-kak-lsp">configuration section</a> which is basically about copying the <a href="https://github.com/kak-lsp/kak-lsp/blob/master/kak-lsp.toml">configuration file</a> in the right place (latest versions should use <code>rust-analyzer</code> by default).</p>
</div>
<div class="paragraph">
<p>Finally, you need to configure Kakoune to talk to <code>kak-lsp</code> (see <a href="https://github.com/kak-lsp/kak-lsp#usage">Usage section</a>).
A basic configuration will only get you LSP but you can also activate inlay diagnostics and auto-formatting on save.
The following might help you get all of this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre>eval %sh{kak-lsp --kakoune -s $kak_session}  # Not needed if you load it with plug.kak.
hook global WinSetOption filetype=rust %{
    # Enable LSP
    lsp-enable-window

    # Auto-formatting on save
    hook window BufWritePre .* lsp-formatting-sync

    # Configure inlay hints (only on save)
    hook window -group rust-inlay-hints BufWritePost .* rust-analyzer-inlay-hints
    hook -once -always window WinSetOption filetype=.* %{
        remove-hooks window rust-inlay-hints
    }
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="helix"><a class="anchor" href="#helix"></a>Helix</h3>
<div class="paragraph">
<p><a href="https://docs.helix-editor.com/">Helix</a> supports LSP by default.
However, it won&#8217;t install <code>rust-analyzer</code> automatically.
You can follow instructions for installing <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="visual-studio"><a class="anchor" href="#visual-studio"></a><a id="visual-studio-2022"></a>Visual Studio 2022</h3>
<div class="paragraph">
<p>There are multiple rust-analyzer extensions for Visual Studio 2022 on Windows:</p>
</div>
<div class="sect3">
<h4 id="rust-analyzer-vs"><a class="anchor" href="#rust-analyzer-vs"></a>rust-analyzer.vs</h4>
<div class="paragraph">
<p>(License: Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International)</p>
</div>
<div class="paragraph">
<p><a href="https://marketplace.visualstudio.com/items?itemName=kitamstudios.RustAnalyzer">Visual Studio Marketplace</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/kitamstudios/rust-analyzer/">GitHub</a></p>
</div>
<div class="paragraph">
<p>Support for Rust development in the Visual Studio IDE is enabled by the <a href="https://marketplace.visualstudio.com/items?itemName=kitamstudios.RustAnalyzer">rust-analyzer</a> package. Either click on the download link or install from IDE&#8217;s extension manager.
For now <a href="https://visualstudio.microsoft.com/downloads/">Visual Studio 2022</a> is required. All editions are supported viz. Community, Professional &amp; Enterprise.
The package aims to provide 0-friction installation and therefore comes loaded with most things required including rust-analyzer binary. If anything it needs is missing, appropriate errors / warnings will guide the user. E.g. cargo.exe needs to be in path and the package will tell you as much.
This package is under rapid active development. So if you encounter any issues please file it at <a href="https://github.com/kitamstudios/rust-analyzer/">rust-analyzer.vs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="vs_rustanalyzer"><a class="anchor" href="#vs_rustanalyzer"></a>VS_RustAnalyzer</h4>
<div class="paragraph">
<p>(License: GPL)</p>
</div>
<div class="paragraph">
<p><a href="https://marketplace.visualstudio.com/items?itemName=cchharris.vsrustanalyzer">Visual Studio Marketplace</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/cchharris/VS-RustAnalyzer">GitHub</a></p>
</div>
</div>
<div class="sect3">
<h4 id="sourcegear-rust"><a class="anchor" href="#sourcegear-rust"></a>SourceGear Rust</h4>
<div class="paragraph">
<p>(License: closed source)</p>
</div>
<div class="paragraph">
<p><a href="https://marketplace.visualstudio.com/items?itemName=SourceGear.SourceGearRust">Visual Studio Marketplace</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/sourcegear/rust-vs-extension">GitHub (docs, issues, discussions)</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Free (no-cost)</p>
</li>
<li>
<p>Supports all editions of Visual Studio 2022 on Windows: Community, Professional, or Enterprise</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lapce"><a class="anchor" href="#lapce"></a>Lapce</h3>
<div class="paragraph">
<p><a href="https://lapce.dev/">Lapce</a> has a Rust plugin which you can install directly.
Unfortunately, it downloads an old version of <code>rust-analyzer</code>, but you can set the server path under Settings.</p>
</div>
</div>
<div class="sect2">
<h3 id="crates"><a class="anchor" href="#crates"></a>Crates</h3>
<div class="paragraph">
<p>There is a package named <code>ra_ap_rust_analyzer</code> available on <a href="https://crates.io/crates/ra_ap_rust-analyzer">crates.io</a>, for someone who wants to use it programmatically.</p>
</div>
<div class="paragraph">
<p>For more details, see <a href="https://github.com/rust-lang/rust-analyzer/blob/master/.github/workflows/publish.yml">the publish workflow</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="zed"><a class="anchor" href="#zed"></a>Zed</h3>
<div class="paragraph">
<p><a href="https://zed.dev">Zed</a> has native <code>rust-analyzer</code> support.
If the LSP binary is not available, Zed can install it when opening a Rust file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start with looking at the rust-analyzer version.
Try <strong>rust-analyzer: Show RA Version</strong> in VS Code (using <strong>Command Palette</strong> feature typically activated by Ctrl+Shift+P) or <code>rust-analyzer --version</code> in the command line.
If the date is more than a week ago, it&#8217;s better to update rust-analyzer version.</p>
</div>
<div class="paragraph">
<p>The next thing to check would be panic messages in rust-analyzer&#8217;s log.
Log messages are printed to stderr, in VS Code you can see them in the <code>Output &gt; Rust Analyzer Language Server</code> tab of the panel.
To see more logs, set the <code>RA_LOG=info</code> environment variable, this can be done either by setting the environment variable manually or by using <code>rust-analyzer.server.extraEnv</code>, note that both of these approaches require the server to be restarted.</p>
</div>
<div class="paragraph">
<p>To fully capture LSP messages between the editor and the server, set <code>"rust-analyzer.trace.server": "verbose"</code> config and check
<code>Output &gt; Rust Analyzer Language Server Trace</code>.</p>
</div>
<div class="paragraph">
<p>The root cause for many &#8220;nothing works&#8221; problems is that rust-analyzer fails to understand the project structure.
To debug that, first note the <code>rust-analyzer</code> section in the status bar.
If it has an error icon and red, that&#8217;s the problem (hover will have somewhat helpful error message).
<strong>rust-analyzer: Status</strong> prints dependency information for the current file.
Finally, <code>RA_LOG=project_model=debug</code> enables verbose logs during project loading.</p>
</div>
<div class="paragraph">
<p>If rust-analyzer outright crashes, try running <code>rust-analyzer analysis-stats /path/to/project/directory/</code> on the command line.
This command type checks the whole project in batch mode bypassing LSP machinery.</p>
</div>
<div class="paragraph">
<p>When filing issues, it is useful (but not necessary) to try to minimize examples.
An ideal bug reproduction looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nv">$ </span>git clone https://github.com/username/repo.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>repo <span class="o">&amp;&amp;</span> git switch <span class="nt">--detach</span> commit-hash
<span class="nv">$ </span>rust-analyzer <span class="nt">--version</span>
rust-analyzer dd12184e4 2021-05-08 dev
<span class="nv">$ </span>rust-analyzer analysis-stats <span class="nb">.</span>
💀 💀 💀
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is especially useful when the <code>repo</code> doesn&#8217;t use external crates or the standard library.</p>
</div>
<div class="paragraph">
<p>If you want to go as far as to modify the source code to debug the problem, be sure to take a look at the
<a href="https://github.com/rust-lang/rust-analyzer/tree/master/docs/dev">dev docs</a>!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/rust-analyzer/src/config.rs">config.rs</a></p>
</div>
<div class="paragraph">
<p>The <a href="#_installation">Installation</a> section contains details on configuration for some of the editors.
In general <code>rust-analyzer</code> is configured via LSP messages, which means that it&#8217;s up to the editor to decide on the exact format and location of configuration files.</p>
</div>
<div class="paragraph">
<p>Some clients, such as <a href="#vs-code">VS Code</a> or <a href="#coc-rust-analyzer">COC plugin in Vim</a> provide <code>rust-analyzer</code> specific configuration UIs. Others may require you to know a bit more about the interaction with <code>rust-analyzer</code>.</p>
</div>
<div class="paragraph">
<p>For the later category, it might help to know that the initial configuration is specified as a value of the <code>initializationOptions</code> field of the <a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#initialize"><code>InitializeParams</code> message, in the LSP protocol</a>.
The spec says that the field type is <code>any?</code>, but <code>rust-analyzer</code> is looking for a JSON object that is constructed using settings from the list below.
Name of the setting, ignoring the <code>rust-analyzer.</code> prefix, is used as a path, and value of the setting becomes the JSON property value.</p>
</div>
<div class="paragraph">
<p>For example, a very common configuration is to enable proc-macro support, can be achieved by sending this JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"cargo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buildScripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"procMacro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Please consult your editor&#8217;s documentation to learn more about how to configure <a href="https://microsoft.github.io/language-server-protocol/">LSP servers</a>.</p>
</div>
<div class="paragraph">
<p>To verify which configuration is actually used by <code>rust-analyzer</code>, set <code>RA_LOG</code> environment variable to <code>rust_analyzer=info</code> and look for config-related messages.
Logs should show both the JSON that <code>rust-analyzer</code> sees as well as the updated config.</p>
</div>
<div class="paragraph">
<p>This is the list of config options <code>rust-analyzer</code> supports:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="rust-analyzer.assist.emitMustUse"></a>rust-analyzer.assist.emitMustUse (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to insert #[must_use] when generating <code>as_</code> methods
for enum variants.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.assist.expressionFillDefault"></a>rust-analyzer.assist.expressionFillDefault (default: <code>"todo"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Placeholder expression to use for missing expressions in assists.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cachePriming.enable"></a>rust-analyzer.cachePriming.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Warm up caches on project load.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cachePriming.numThreads"></a>rust-analyzer.cachePriming.numThreads (default: <code>0</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How many worker threads to handle priming caches. The default <code>0</code> means to pick automatically.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.autoreload"></a>rust-analyzer.cargo.autoreload (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Automatically refresh project info via <code>cargo metadata</code> on
<code>Cargo.toml</code> or <code>.cargo/config.toml</code> changes.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.buildScripts.enable"></a>rust-analyzer.cargo.buildScripts.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Run build scripts (<code>build.rs</code>) for more precise code analysis.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.buildScripts.invocationLocation"></a>rust-analyzer.cargo.buildScripts.invocationLocation (default: <code>"workspace"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Specifies the working directory for running build scripts.
- "workspace": run build scripts for a workspace in the workspace&#8217;s root directory.
  This is incompatible with <code><mark>rust-analyzer.cargo.buildScripts.invocationStrategy</mark></code> set to <code>once</code>.
- "root": run build scripts in the project&#8217;s root directory.
This config only has an effect when <code><mark>rust-analyzer.cargo.buildScripts.overrideCommand</mark></code>
is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.buildScripts.invocationStrategy"></a>rust-analyzer.cargo.buildScripts.invocationStrategy (default: <code>"per_workspace"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Specifies the invocation strategy to use when running the build scripts command.
If <code>per_workspace</code> is set, the command will be executed for each workspace.
If <code>once</code> is set, the command will be executed once.
This config only has an effect when <code><mark>rust-analyzer.cargo.buildScripts.overrideCommand</mark></code>
is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.buildScripts.overrideCommand"></a>rust-analyzer.cargo.buildScripts.overrideCommand (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Override the command rust-analyzer uses to run build scripts and
build procedural macros. The command is required to output json
and should therefore include <code>--message-format=json</code> or a similar
option.</p>
</div>
<div class="paragraph">
<p>If there are multiple linked projects/workspaces, this command is invoked for
each of them, with the working directory being the workspace root
(i.e., the folder containing the <code>Cargo.toml</code>). This can be overwritten
by changing <code><mark>rust-analyzer.cargo.buildScripts.invocationStrategy</mark></code> and
<code><mark>rust-analyzer.cargo.buildScripts.invocationLocation</mark></code>.</p>
</div>
<div class="paragraph">
<p>By default, a cargo invocation will be constructed for the configured
targets and features, with the following base command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>cargo check <span class="nt">--quiet</span> <span class="nt">--workspace</span> <span class="nt">--message-format</span><span class="o">=</span>json <span class="nt">--all-targets</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.buildScripts.rebuildOnSave"></a>rust-analyzer.cargo.buildScripts.rebuildOnSave (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Rerun proc-macros building/build-scripts running when proc-macro
or build-script sources change and are saved.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.buildScripts.useRustcWrapper"></a>rust-analyzer.cargo.buildScripts.useRustcWrapper (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use <code>RUSTC_WRAPPER=rust-analyzer</code> when running build scripts to
avoid checking unnecessary things.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.cfgs"></a>rust-analyzer.cargo.cfgs (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of cfg options to enable with the given values.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.extraArgs"></a>rust-analyzer.cargo.extraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Extra arguments that are passed to every cargo invocation.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.extraEnv"></a>rust-analyzer.cargo.extraEnv (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Extra environment variables that will be set when running cargo, rustc
or other commands within the workspace. Useful for setting RUSTFLAGS.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.features"></a>rust-analyzer.cargo.features (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of features to activate.</p>
</div>
<div class="paragraph">
<p>Set this to <code>"all"</code> to pass <code>--all-features</code> to cargo.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.noDefaultFeatures"></a>rust-analyzer.cargo.noDefaultFeatures (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to pass <code>--no-default-features</code> to cargo.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.sysroot"></a>rust-analyzer.cargo.sysroot (default: <code>"discover"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relative path to the sysroot, or "discover" to try to automatically find it via
"rustc --print sysroot".</p>
</div>
<div class="paragraph">
<p>Unsetting this disables sysroot loading.</p>
</div>
<div class="paragraph">
<p>This option does not take effect until rust-analyzer is restarted.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.sysrootQueryMetadata"></a>rust-analyzer.cargo.sysrootQueryMetadata (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to run cargo metadata on the sysroot library allowing rust-analyzer to analyze
third-party dependencies of the standard libraries.</p>
</div>
<div class="paragraph">
<p>This will cause <code>cargo</code> to create a lockfile in your sysroot directory. rust-analyzer
will attempt to clean up afterwards, but nevertheless requires the location to be
writable to.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.sysrootSrc"></a>rust-analyzer.cargo.sysrootSrc (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relative path to the sysroot library sources. If left unset, this will default to
<code>{cargo.sysroot}/lib/rustlib/src/rust/library</code>.</p>
</div>
<div class="paragraph">
<p>This option does not take effect until rust-analyzer is restarted.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.target"></a>rust-analyzer.cargo.target (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Compilation target override (target triple).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.unsetTest"></a>rust-analyzer.cargo.unsetTest (default: <code>["core"]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Unsets the implicit <code>#[cfg(test)]</code> for the specified crates.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave"></a>rust-analyzer.checkOnSave (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Run the check command for diagnostics on save.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.allTargets"></a>rust-analyzer.check.allTargets (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Check all targets and tests (<code>--all-targets</code>).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.command"></a>rust-analyzer.check.command (default: <code>"check"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Cargo command to use for <code>cargo check</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.extraArgs"></a>rust-analyzer.check.extraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Extra arguments for <code>cargo check</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.extraEnv"></a>rust-analyzer.check.extraEnv (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Extra environment variables that will be set when running <code>cargo check</code>.
Extends <code><mark>rust-analyzer.cargo.extraEnv</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.features"></a>rust-analyzer.check.features (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of features to activate. Defaults to
<code><mark>rust-analyzer.cargo.features</mark></code>.</p>
</div>
<div class="paragraph">
<p>Set to <code>"all"</code> to pass <code>--all-features</code> to Cargo.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.ignore"></a>rust-analyzer.check.ignore (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of <code>cargo check</code> (or other command specified in <code>check.command</code>) diagnostics to ignore.</p>
</div>
<div class="paragraph">
<p>For example for <code>cargo check</code>: <code>dead_code</code>, <code>unused_imports</code>, <code>unused_variables</code>,&#8230;&#8203;</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.invocationLocation"></a>rust-analyzer.check.invocationLocation (default: <code>"workspace"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Specifies the working directory for running checks.
- "workspace": run checks for workspaces in the corresponding workspaces' root directories.
  This falls back to "root" if <code><mark>rust-analyzer.check.invocationStrategy</mark></code> is set to <code>once</code>.
- "root": run checks in the project&#8217;s root directory.
This config only has an effect when <code><mark>rust-analyzer.check.overrideCommand</mark></code>
is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.invocationStrategy"></a>rust-analyzer.check.invocationStrategy (default: <code>"per_workspace"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Specifies the invocation strategy to use when running the check command.
If <code>per_workspace</code> is set, the command will be executed for each workspace.
If <code>once</code> is set, the command will be executed once.
This config only has an effect when <code><mark>rust-analyzer.check.overrideCommand</mark></code>
is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.noDefaultFeatures"></a>rust-analyzer.check.noDefaultFeatures (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to pass <code>--no-default-features</code> to Cargo. Defaults to
<code><mark>rust-analyzer.cargo.noDefaultFeatures</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.overrideCommand"></a>rust-analyzer.check.overrideCommand (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Override the command rust-analyzer uses instead of <code>cargo check</code> for
diagnostics on save. The command is required to output json and
should therefore include <code>--message-format=json</code> or a similar option
(if your client supports the <code>colorDiagnosticOutput</code> experimental
capability, you can use <code>--message-format=json-diagnostic-rendered-ansi</code>).</p>
</div>
<div class="paragraph">
<p>If you&#8217;re changing this because you&#8217;re using some tool wrapping
Cargo, you might also want to change
<code><mark>rust-analyzer.cargo.buildScripts.overrideCommand</mark></code>.</p>
</div>
<div class="paragraph">
<p>If there are multiple linked projects/workspaces, this command is invoked for
each of them, with the working directory being the workspace root
(i.e., the folder containing the <code>Cargo.toml</code>). This can be overwritten
by changing <code><mark>rust-analyzer.check.invocationStrategy</mark></code> and
<code><mark>rust-analyzer.check.invocationLocation</mark></code>.</p>
</div>
<div class="paragraph">
<p>If <code>$saved_file</code> is part of the command, rust-analyzer will pass
the absolute path of the saved file to the provided command. This is
intended to be used with non-Cargo build systems.
Note that <code>$saved_file</code> is experimental and may be removed in the futureg.</p>
</div>
<div class="paragraph">
<p>An example command would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>cargo check <span class="nt">--workspace</span> <span class="nt">--message-format</span><span class="o">=</span>json <span class="nt">--all-targets</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.targets"></a>rust-analyzer.check.targets (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Check for specific targets. Defaults to <code><mark>rust-analyzer.cargo.target</mark></code> if empty.</p>
</div>
<div class="paragraph">
<p>Can be a single target, e.g. <code>"x86_64-unknown-linux-gnu"</code> or a list of targets, e.g.
<code>["aarch64-apple-darwin", "x86_64-apple-darwin"]</code>.</p>
</div>
<div class="paragraph">
<p>Aliased as <code>"checkOnSave.targets"</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.check.workspace"></a>rust-analyzer.check.workspace (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether <code>--workspace</code> should be passed to <code>cargo check</code>.
If false, <code>-p &lt;package&gt;</code> will be passed instead.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.autoimport.enable"></a>rust-analyzer.completion.autoimport.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Toggles the additional completions that automatically add imports when completed.
Note that your client must specify the <code>additionalTextEdits</code> LSP client capability to truly have this feature enabled.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.autoself.enable"></a>rust-analyzer.completion.autoself.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Toggles the additional completions that automatically show method calls and field accesses
with <code>self</code> prefixed to them when inside a method.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.callable.snippets"></a>rust-analyzer.completion.callable.snippets (default: <code>"fill_arguments"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to add parenthesis and argument snippets when completing function.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.fullFunctionSignatures.enable"></a>rust-analyzer.completion.fullFunctionSignatures.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show full function/method signatures in completion docs.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.limit"></a>rust-analyzer.completion.limit (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Maximum number of completions to return. If <code>None</code>, the limit is infinite.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.postfix.enable"></a>rust-analyzer.completion.postfix.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show postfix snippets like <code>dbg</code>, <code>if</code>, <code>not</code>, etc.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.privateEditable.enable"></a>rust-analyzer.completion.privateEditable.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables completions of private items and fields that are defined in the current workspace even if they are not visible at the current position.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.snippets.custom"></a>rust-analyzer.completion.snippets.custom</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
            "Arc::new": {
                "postfix": "arc",
                "body": "Arc::new(${receiver})",
                "requires": "std::sync::Arc",
                "description": "Put the expression into an `Arc`",
                "scope": "expr"
            },
            "Rc::new": {
                "postfix": "rc",
                "body": "Rc::new(${receiver})",
                "requires": "std::rc::Rc",
                "description": "Put the expression into an `Rc`",
                "scope": "expr"
            },
            "Box::pin": {
                "postfix": "pinbox",
                "body": "Box::pin(${receiver})",
                "requires": "std::boxed::Box",
                "description": "Put the expression into a pinned `Box`",
                "scope": "expr"
            },
            "Ok": {
                "postfix": "ok",
                "body": "Ok(${receiver})",
                "description": "Wrap the expression in a `Result::Ok`",
                "scope": "expr"
            },
            "Err": {
                "postfix": "err",
                "body": "Err(${receiver})",
                "description": "Wrap the expression in a `Result::Err`",
                "scope": "expr"
            },
            "Some": {
                "postfix": "some",
                "body": "Some(${receiver})",
                "description": "Wrap the expression in an `Option::Some`",
                "scope": "expr"
            }
        }</pre>
</div>
</div>
<div class="paragraph">
<p>Custom completion snippets.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.termSearch.enable"></a>rust-analyzer.completion.termSearch.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to enable term search based snippets like <code>Some(foo.bar().baz())</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.disabled"></a>rust-analyzer.diagnostics.disabled (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of rust-analyzer diagnostics to disable.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.enable"></a>rust-analyzer.diagnostics.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show native rust-analyzer diagnostics.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.experimental.enable"></a>rust-analyzer.diagnostics.experimental.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show experimental rust-analyzer diagnostics that might
have more false positives than usual.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.remapPrefix"></a>rust-analyzer.diagnostics.remapPrefix (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Map of prefixes to be substituted when parsing diagnostic file paths.
This should be the reverse mapping of what is passed to <code>rustc</code> as <code>--remap-path-prefix</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.warningsAsHint"></a>rust-analyzer.diagnostics.warningsAsHint (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of warnings that should be displayed with hint severity.</p>
</div>
<div class="paragraph">
<p>The warnings will be indicated by faded text or three dots in code
and will not show up in the <code>Problems Panel</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.warningsAsInfo"></a>rust-analyzer.diagnostics.warningsAsInfo (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of warnings that should be displayed with info severity.</p>
</div>
<div class="paragraph">
<p>The warnings will be indicated by a blue squiggly underline in code
and a blue icon in the <code>Problems Panel</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.files.excludeDirs"></a>rust-analyzer.files.excludeDirs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>These directories will be ignored by rust-analyzer. They are
relative to the workspace root, and globs are not supported. You may
also need to add the folders to Code&#8217;s <code>files.watcherExclude</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.files.watcher"></a>rust-analyzer.files.watcher (default: <code>"client"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Controls file watching implementation.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.breakPoints.enable"></a>rust-analyzer.highlightRelated.breakPoints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of related references while the cursor is on <code>break</code>, <code>loop</code>, <code>while</code>, or <code>for</code> keywords.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.closureCaptures.enable"></a>rust-analyzer.highlightRelated.closureCaptures.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of all captures of a closure while the cursor is on the <code>|</code> or move keyword of a closure.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.exitPoints.enable"></a>rust-analyzer.highlightRelated.exitPoints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of all exit points while the cursor is on any <code>return</code>, <code>?</code>, <code>fn</code>, or return type arrow (<code>&#8594;</code>).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.references.enable"></a>rust-analyzer.highlightRelated.references.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of related references while the cursor is on any identifier.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.yieldPoints.enable"></a>rust-analyzer.highlightRelated.yieldPoints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of all break points for a loop or block context while the cursor is on any <code>async</code> or <code>await</code> keywords.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.actions.debug.enable"></a>rust-analyzer.hover.actions.debug.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Debug</code> action. Only applies when
<code><mark>rust-analyzer.hover.actions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.actions.enable"></a>rust-analyzer.hover.actions.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show HoverActions in Rust files.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.actions.gotoTypeDef.enable"></a>rust-analyzer.hover.actions.gotoTypeDef.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Go to Type Definition</code> action. Only applies when
<code><mark>rust-analyzer.hover.actions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.actions.implementations.enable"></a>rust-analyzer.hover.actions.implementations.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Implementations</code> action. Only applies when
<code><mark>rust-analyzer.hover.actions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.actions.references.enable"></a>rust-analyzer.hover.actions.references.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> action. Only applies when
<code><mark>rust-analyzer.hover.actions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.actions.run.enable"></a>rust-analyzer.hover.actions.run.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Run</code> action. Only applies when
<code><mark>rust-analyzer.hover.actions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.documentation.enable"></a>rust-analyzer.hover.documentation.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show documentation on hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.documentation.keywords.enable"></a>rust-analyzer.hover.documentation.keywords.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show keyword hover popups. Only applies when
<code><mark>rust-analyzer.hover.documentation.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.links.enable"></a>rust-analyzer.hover.links.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use markdown syntax for links on hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.memoryLayout.alignment"></a>rust-analyzer.hover.memoryLayout.alignment (default: <code>"hexadecimal"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How to render the align information in a memory layout hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.memoryLayout.enable"></a>rust-analyzer.hover.memoryLayout.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show memory layout data on hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.memoryLayout.niches"></a>rust-analyzer.hover.memoryLayout.niches (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How to render the niche information in a memory layout hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.memoryLayout.offset"></a>rust-analyzer.hover.memoryLayout.offset (default: <code>"hexadecimal"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How to render the offset information in a memory layout hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.memoryLayout.size"></a>rust-analyzer.hover.memoryLayout.size (default: <code>"both"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How to render the size information in a memory layout hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.granularity.enforce"></a>rust-analyzer.imports.granularity.enforce (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to enforce the import granularity setting for all files. If set to false rust-analyzer will try to keep import styles consistent per file.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.granularity.group"></a>rust-analyzer.imports.granularity.group (default: <code>"crate"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How imports should be grouped into use statements.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.group.enable"></a>rust-analyzer.imports.group.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Group inserted imports by the <a href="https://rust-analyzer.github.io/manual.html#auto-import">following order</a>. Groups are separated by newlines.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.merge.glob"></a>rust-analyzer.imports.merge.glob (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to allow import insertion to merge new imports into single path glob imports like <code>use std::fmt::*;</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.preferNoStd"></a>rust-analyzer.imports.preferNoStd (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Prefer to unconditionally use imports of the core and alloc crate, over the std crate.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.preferPrelude"></a>rust-analyzer.imports.preferPrelude (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to prefer import paths containing a <code>prelude</code> module.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.imports.prefix"></a>rust-analyzer.imports.prefix (default: <code>"plain"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The path structure for newly inserted paths to use.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.bindingModeHints.enable"></a>rust-analyzer.inlayHints.bindingModeHints.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for binding modes.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.chainingHints.enable"></a>rust-analyzer.inlayHints.chainingHints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for method chains.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.closingBraceHints.enable"></a>rust-analyzer.inlayHints.closingBraceHints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay hints after a closing <code>}</code> to indicate what item it belongs to.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.closingBraceHints.minLines"></a>rust-analyzer.inlayHints.closingBraceHints.minLines (default: <code>25</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Minimum number of lines required before the <code>}</code> until the hint is shown (set to 0 or 1
to always show them).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.closureCaptureHints.enable"></a>rust-analyzer.inlayHints.closureCaptureHints.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay hints for closure captures.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.closureReturnTypeHints.enable"></a>rust-analyzer.inlayHints.closureReturnTypeHints.enable (default: <code>"never"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for return types of closures.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.closureStyle"></a>rust-analyzer.inlayHints.closureStyle (default: <code>"impl_fn"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Closure notation in type and chaining inlay hints.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.discriminantHints.enable"></a>rust-analyzer.inlayHints.discriminantHints.enable (default: <code>"never"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show enum variant discriminant hints.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.expressionAdjustmentHints.enable"></a>rust-analyzer.inlayHints.expressionAdjustmentHints.enable (default: <code>"never"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay hints for type adjustments.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.expressionAdjustmentHints.hideOutsideUnsafe"></a>rust-analyzer.inlayHints.expressionAdjustmentHints.hideOutsideUnsafe (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to hide inlay hints for type adjustments outside of <code>unsafe</code> blocks.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.expressionAdjustmentHints.mode"></a>rust-analyzer.inlayHints.expressionAdjustmentHints.mode (default: <code>"prefix"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay hints as postfix ops (<code>.<strong></code> instead of <code></strong></code>, etc).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.implicitDrops.enable"></a>rust-analyzer.inlayHints.implicitDrops.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show implicit drop hints.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.lifetimeElisionHints.enable"></a>rust-analyzer.inlayHints.lifetimeElisionHints.enable (default: <code>"never"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for elided lifetimes in function signatures.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.lifetimeElisionHints.useParameterNames"></a>rust-analyzer.inlayHints.lifetimeElisionHints.useParameterNames (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to prefer using parameter names as the name for elided lifetime hints if possible.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.maxLength"></a>rust-analyzer.inlayHints.maxLength (default: <code>25</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Maximum length for inlay hints. Set to null to have an unlimited length.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.parameterHints.enable"></a>rust-analyzer.inlayHints.parameterHints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show function parameter name inlay hints at the call
site.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.rangeExclusiveHints.enable"></a>rust-analyzer.inlayHints.rangeExclusiveHints.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show exclusive range inlay hints.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.reborrowHints.enable"></a>rust-analyzer.inlayHints.reborrowHints.enable (default: <code>"never"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay hints for compiler inserted reborrows.
This setting is deprecated in favor of <mark>rust-analyzer.inlayHints.expressionAdjustmentHints.enable</mark>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.renderColons"></a>rust-analyzer.inlayHints.renderColons (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to render leading colons for type hints, and trailing colons for parameter hints.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.typeHints.enable"></a>rust-analyzer.inlayHints.typeHints.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for variables.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.typeHints.hideClosureInitialization"></a>rust-analyzer.inlayHints.typeHints.hideClosureInitialization (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to hide inlay type hints for <code>let</code> statements that initialize to a closure.
Only applies to closures with blocks, same as <code><mark>rust-analyzer.inlayHints.closureReturnTypeHints.enable</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.typeHints.hideNamedConstructor"></a>rust-analyzer.inlayHints.typeHints.hideNamedConstructor (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to hide inlay type hints for constructors.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.interpret.tests"></a>rust-analyzer.interpret.tests (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables the experimental support for interpreting tests.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.joinAssignments"></a>rust-analyzer.joinLines.joinAssignments (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines merges consecutive declaration and initialization of an assignment.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.joinElseIf"></a>rust-analyzer.joinLines.joinElseIf (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines inserts else between consecutive ifs.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.removeTrailingComma"></a>rust-analyzer.joinLines.removeTrailingComma (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines removes trailing commas.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.unwrapTrivialBlock"></a>rust-analyzer.joinLines.unwrapTrivialBlock (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines unwraps trivial blocks.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.debug.enable"></a>rust-analyzer.lens.debug.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Debug</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.enable"></a>rust-analyzer.lens.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show CodeLens in Rust files.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.forceCustomCommands"></a>rust-analyzer.lens.forceCustomCommands (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Internal config: use custom client-side commands even when the
client doesn&#8217;t set the corresponding capability.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.implementations.enable"></a>rust-analyzer.lens.implementations.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Implementations</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.location"></a>rust-analyzer.lens.location (default: <code>"above_name"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Where to render annotations.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.references.adt.enable"></a>rust-analyzer.lens.references.adt.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> lens for Struct, Enum, and Union.
Only applies when <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.references.enumVariant.enable"></a>rust-analyzer.lens.references.enumVariant.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> lens for Enum Variants.
Only applies when <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.references.method.enable"></a>rust-analyzer.lens.references.method.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Method References</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.references.trait.enable"></a>rust-analyzer.lens.references.trait.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> lens for Trait.
Only applies when <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.run.enable"></a>rust-analyzer.lens.run.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Run</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.linkedProjects"></a>rust-analyzer.linkedProjects (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Disable project auto-discovery in favor of explicitly specified set
of projects.</p>
</div>
<div class="paragraph">
<p>Elements must be paths pointing to <code>Cargo.toml</code>,
<code>rust-project.json</code>, or JSON objects in <code>rust-project.json</code> format.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lru.capacity"></a>rust-analyzer.lru.capacity (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Number of syntax trees rust-analyzer keeps in memory. Defaults to 128.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lru.query.capacities"></a>rust-analyzer.lru.query.capacities (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Sets the LRU capacity of the specified queries.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.notifications.cargoTomlNotFound"></a>rust-analyzer.notifications.cargoTomlNotFound (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>can&#8217;t find Cargo.toml</code> error message.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.notifications.unindexedProject"></a>rust-analyzer.notifications.unindexedProject (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to send an UnindexedProject notification to the client.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.numThreads"></a>rust-analyzer.numThreads (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How many worker threads in the main loop. The default <code>null</code> means to pick automatically.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.procMacro.attributes.enable"></a>rust-analyzer.procMacro.attributes.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Expand attribute macros. Requires <code><mark>rust-analyzer.procMacro.enable</mark></code> to be set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.procMacro.enable"></a>rust-analyzer.procMacro.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enable support for procedural macros, implies <code><mark>rust-analyzer.cargo.buildScripts.enable</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.procMacro.ignored"></a>rust-analyzer.procMacro.ignored (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>These proc-macros will be ignored when trying to expand them.</p>
</div>
<div class="paragraph">
<p>This config takes a map of crate names with the exported proc-macro names to ignore as values.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.procMacro.server"></a>rust-analyzer.procMacro.server (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Internal config, path to proc-macro server executable.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.references.excludeImports"></a>rust-analyzer.references.excludeImports (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Exclude imports from find-all-references.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.references.excludeTests"></a>rust-analyzer.references.excludeTests (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Exclude tests from find-all-references.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.runnables.command"></a>rust-analyzer.runnables.command (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Command to be executed instead of 'cargo' for runnables.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.runnables.extraArgs"></a>rust-analyzer.runnables.extraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional arguments to be passed to cargo for runnables such as
tests or binaries. For example, it may be <code>--release</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rust.analyzerTargetDir"></a>rust-analyzer.rust.analyzerTargetDir (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Optional path to a rust-analyzer specific target directory.
This prevents rust-analyzer&#8217;s <code>cargo check</code> from locking the <code>Cargo.lock</code>
at the expense of duplicating build artifacts.</p>
</div>
<div class="paragraph">
<p>Set to <code>true</code> to use a subdirectory of the existing target directory or
set to a path relative to the workspace to use that path.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustc.source"></a>rust-analyzer.rustc.source (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Path to the Cargo.toml of the rust compiler workspace, for usage in rustc_private
projects, or "discover" to try to automatically find it if the <code>rustc-dev</code> component
is installed.</p>
</div>
<div class="paragraph">
<p>Any project which uses rust-analyzer with the rustcPrivate
crates must set <code>[package.metadata.rust-analyzer] rustc_private=true</code> to use it.</p>
</div>
<div class="paragraph">
<p>This option does not take effect until rust-analyzer is restarted.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustfmt.extraArgs"></a>rust-analyzer.rustfmt.extraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional arguments to <code>rustfmt</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustfmt.overrideCommand"></a>rust-analyzer.rustfmt.overrideCommand (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Advanced option, fully override the command rust-analyzer uses for
formatting. This should be the equivalent of <code>rustfmt</code> here, and
not that of <code>cargo fmt</code>. The file contents will be passed on the
standard input and the formatted result will be read from the
standard output.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustfmt.rangeFormatting.enable"></a>rust-analyzer.rustfmt.rangeFormatting.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables the use of rustfmt&#8217;s unstable range formatting command for the
<code>textDocument/rangeFormatting</code> request. The rustfmt option is unstable and only
available on a nightly build.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.doc.comment.inject.enable"></a>rust-analyzer.semanticHighlighting.doc.comment.inject.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Inject additional highlighting into doc comments.</p>
</div>
<div class="paragraph">
<p>When enabled, rust-analyzer will highlight rust source in doc comments as well as intra
doc links.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.nonStandardTokens"></a>rust-analyzer.semanticHighlighting.nonStandardTokens (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether the server is allowed to emit non-standard tokens and modifiers.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.operator.enable"></a>rust-analyzer.semanticHighlighting.operator.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use semantic tokens for operators.</p>
</div>
<div class="paragraph">
<p>When disabled, rust-analyzer will emit semantic tokens only for operator tokens when
they are tagged with modifiers.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.operator.specialization.enable"></a>rust-analyzer.semanticHighlighting.operator.specialization.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use specialized semantic tokens for operators.</p>
</div>
<div class="paragraph">
<p>When enabled, rust-analyzer will emit special token types for operator tokens instead
of the generic <code>operator</code> token type.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.punctuation.enable"></a>rust-analyzer.semanticHighlighting.punctuation.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use semantic tokens for punctuation.</p>
</div>
<div class="paragraph">
<p>When disabled, rust-analyzer will emit semantic tokens only for punctuation tokens when
they are tagged with modifiers or have a special role.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.punctuation.separate.macro.bang"></a>rust-analyzer.semanticHighlighting.punctuation.separate.macro.bang (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When enabled, rust-analyzer will emit a punctuation semantic token for the <code>!</code> of macro
calls.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.punctuation.specialization.enable"></a>rust-analyzer.semanticHighlighting.punctuation.specialization.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use specialized semantic tokens for punctuation.</p>
</div>
<div class="paragraph">
<p>When enabled, rust-analyzer will emit special token types for punctuation tokens instead
of the generic <code>punctuation</code> token type.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.semanticHighlighting.strings.enable"></a>rust-analyzer.semanticHighlighting.strings.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use semantic tokens for strings.</p>
</div>
<div class="paragraph">
<p>In some editors (e.g. vscode) semantic tokens override other highlighting grammars.
By disabling semantic tokens for strings, other grammars can be used to highlight
their contents.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.signatureInfo.detail"></a>rust-analyzer.signatureInfo.detail (default: <code>"full"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Show full signature of the callable. Only shows parameters if disabled.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.signatureInfo.documentation.enable"></a>rust-analyzer.signatureInfo.documentation.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Show documentation.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.typing.autoClosingAngleBrackets.enable"></a>rust-analyzer.typing.autoClosingAngleBrackets.enable (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to insert closing angle brackets when typing an opening angle bracket of a generic argument list.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.workspace.symbol.search.kind"></a>rust-analyzer.workspace.symbol.search.kind (default: <code>"only_types"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Workspace symbol search kind.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.workspace.symbol.search.limit"></a>rust-analyzer.workspace.symbol.search.limit (default: <code>128</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Limits the number of items returned from a workspace symbol search (Defaults to 128).
Some clients like vs-code issue new searches on result filtering and don&#8217;t require all results to be returned in the initial search.
Other clients requires all results upfront and might require a higher limit.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.workspace.symbol.search.scope"></a>rust-analyzer.workspace.symbol.search.scope (default: <code>"workspace"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Workspace symbol search scope.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="non-cargo-based-projects"><a class="anchor" href="#non-cargo-based-projects"></a>Non-Cargo Based Projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>rust-analyzer does not require Cargo.
However, if you use some other build system, you&#8217;ll have to describe the structure of your project for rust-analyzer in the <code>rust-project.json</code> format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="TypeScript"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
</pre></td><td class="code"><pre>interface JsonProject {
    /// Path to the sysroot directory.
    ///
    /// The sysroot is where rustc looks for the
    /// crates that are built-in to rust, such as
    /// std.
    ///
    /// https://doc.rust-lang.org/rustc/command-line-arguments.html#--sysroot-override-the-system-root
    ///
    /// To see the current value of sysroot, you
    /// can query rustc:
    ///
    /// ```
    /// $ rustc --print sysroot
    /// /Users/yourname/.rustup/toolchains/stable-x86_64-apple-darwin
    /// ```
    sysroot?: string;
    /// Path to the directory with *source code* of
    /// sysroot crates.
    ///
    /// By default, this is `lib/rustlib/src/rust/library`
    /// relative to the sysroot.
    ///
    /// It should point to the directory where std,
    /// core, and friends can be found:
    ///
    /// https://github.com/rust-lang/rust/tree/master/library.
    ///
    /// If provided, rust-analyzer automatically adds
    /// dependencies on sysroot crates. Conversely,
    /// if you omit this path, you can specify sysroot
    /// dependencies yourself and, for example, have
    /// several different "sysroots" in one graph of
    /// crates.
    sysroot_src?: string;
    /// The set of crates comprising the current
    /// project. Must include all transitive
    /// dependencies as well as sysroot crate (libstd,
    /// libcore and such).
    crates: Crate[];
}

interface Crate {
    /// Optional crate name used for display purposes,
    /// without affecting semantics. See the `deps`
    /// key for semantically-significant crate names.
    display_name?: string;
    /// Path to the root module of the crate.
    root_module: string;
    /// Edition of the crate.
    edition: "2015" | "2018" | "2021";
    /// Dependencies
    deps: Dep[];
    /// Should this crate be treated as a member of
    /// current "workspace".
    ///
    /// By default, inferred from the `root_module`
    /// (members are the crates which reside inside
    /// the directory opened in the editor).
    ///
    /// Set this to `false` for things like standard
    /// library and 3rd party crates to enable
    /// performance optimizations (rust-analyzer
    /// assumes that non-member crates don't change).
    is_workspace_member?: boolean;
    /// Optionally specify the (super)set of `.rs`
    /// files comprising this crate.
    ///
    /// By default, rust-analyzer assumes that only
    /// files under `root_module.parent` can belong
    /// to a crate. `include_dirs` are included
    /// recursively, unless a subdirectory is in
    /// `exclude_dirs`.
    ///
    /// Different crates can share the same `source`.
    ///
    /// If two crates share an `.rs` file in common,
    /// they *must* have the same `source`.
    /// rust-analyzer assumes that files from one
    /// source can't refer to files in another source.
    source?: {
        include_dirs: string[],
        exclude_dirs: string[],
    },
    /// The set of cfgs activated for a given crate, like
    /// `["unix", "feature=\"foo\"", "feature=\"bar\""]`.
    cfg: string[];
    /// Target triple for this Crate.
    ///
    /// Used when running `rustc --print cfg`
    /// to get target-specific cfgs.
    target?: string;
    /// Environment variables, used for
    /// the `env!` macro
    env: { [key: string]: string; },

    /// Whether the crate is a proc-macro crate.
    is_proc_macro: boolean;
    /// For proc-macro crates, path to compiled
    /// proc-macro (.so file).
    proc_macro_dylib_path?: string;
}

interface Dep {
    /// Index of a crate in the `crates` array.
    crate: number,
    /// Name as should appear in the (implicit)
    /// `extern crate name` declaration.
    name: string,
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This format is provisional and subject to change.
Specifically, the <code>roots</code> setup will be different eventually.</p>
</div>
<div class="paragraph">
<p>There are three ways to feed <code>rust-project.json</code> to rust-analyzer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Place <code>rust-project.json</code> file at the root of the project, and rust-analyzer will discover it.</p>
</li>
<li>
<p>Specify <code>"rust-analyzer.linkedProjects": [ "path/to/rust-project.json" ]</code> in the settings (and make sure that your LSP client sends settings as a part of initialize request).</p>
</li>
<li>
<p>Specify <code>"rust-analyzer.linkedProjects": [ { "roots": [&#8230;&#8203;], "crates": [&#8230;&#8203;] }]</code> inline.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relative paths are interpreted relative to <code>rust-project.json</code> file location or (for inline JSON) relative to <code>rootUri</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rust-analyzer/rust-project.json-example" class="bare">https://github.com/rust-analyzer/rust-project.json-example</a> for a small example.</p>
</div>
<div class="paragraph">
<p>You can set the <code>RA_LOG</code> environment variable to <code>rust_analyzer=info</code> to inspect how rust-analyzer handles config and project loading.</p>
</div>
<div class="paragraph">
<p>Note that calls to <code>cargo check</code> are disabled when using <code>rust-project.json</code> by default, so compilation errors and warnings will no longer be sent to your LSP client.
To enable these compilation errors you will need to specify explicitly what command rust-analyzer should run to perform the checks using the <code>rust-analyzer.check.overrideCommand</code> configuration.
As an example, the following configuration explicitly sets <code>cargo check</code> as the <code>check</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.check.overrideCommand"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"cargo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"check"</span><span class="p">,</span><span class="w"> </span><span class="s2">"--message-format=json"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>check.overrideCommand</code> requires the command specified to output json error messages for rust-analyzer to consume.
The <code>--message-format=json</code> flag does this for <code>cargo check</code> so whichever command you use must also output errors in this format.
See the <a href="#configuration">Configuration</a> section for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="#security"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At the moment, rust-analyzer assumes that all code is trusted.
Here is a <strong>non-exhaustive</strong> list of ways to make rust-analyzer execute arbitrary code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>proc macros and build scripts are executed by default</p>
</li>
<li>
<p><code>.cargo/config</code> can override <code>rustc</code> with an arbitrary executable</p>
</li>
<li>
<p><code>rust-toolchain.toml</code> can override <code>rustc</code> with an arbitrary executable</p>
</li>
<li>
<p>VS Code plugin reads configuration from project directory, and that can be used to override paths to various executables, like <code>rustfmt</code> or <code>rust-analyzer</code> itself.</p>
</li>
<li>
<p>rust-analyzer&#8217;s syntax trees library uses a lot of <code>unsafe</code> and hasn&#8217;t been properly audited for memory safety.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="privacy"><a class="anchor" href="#privacy"></a>Privacy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The LSP server performs no network access in itself, but runs <code>cargo metadata</code> which will update or download the crate registry and the source code of the project dependencies.
If enabled (the default), build scripts and procedural macros can do anything.</p>
</div>
<div class="paragraph">
<p>The Code extension does not access the network.</p>
</div>
<div class="paragraph">
<p>Any other editor plugins are not under the control of the <code>rust-analyzer</code> developers. For any privacy concerns, you should check with their respective developers.</p>
</div>
<div class="paragraph">
<p>For <code>rust-analyzer</code> developers, <code>cargo xtask release</code> uses the GitHub API to put together the release notes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="annotations"><a class="anchor" href="#annotations"></a>Annotations</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/annotations.rs#L21">annotations.rs</a></p>
</div>
<div class="paragraph">
<p>Provides user with annotations above items for looking up references or impl blocks
and running/debugging binaries.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020672-b7c34f00-917a-11eb-8f6e-858735660a0e.png" alt="113020672 b7c34f00 917a 11eb 8f6e 858735660a0e">
</div>
</div>
</div>
<div class="sect2">
<h3 id="auto-import"><a class="anchor" href="#auto-import"></a>Auto Import</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/auto_import.rs#L15">auto_import.rs</a></p>
</div>
<div class="paragraph">
<p>Using the <code>auto-import</code> assist it is possible to insert missing imports for unresolved items.
When inserting an import it will do so in a structured manner by keeping imports grouped,
separated by a newline in the following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>std</code> and <code>core</code></p>
</li>
<li>
<p>External Crates</p>
</li>
<li>
<p>Current Crate, paths prefixed by <code>crate</code></p>
</li>
<li>
<p>Current Module, paths prefixed by <code>self</code></p>
</li>
<li>
<p>Super Module, paths prefixed by <code>super</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">itertools</span><span class="p">::</span><span class="n">Itertools</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">syntax</span><span class="p">::</span><span class="n">ast</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">crate</span><span class="p">::</span><span class="nn">utils</span><span class="p">::</span><span class="n">insert_use</span><span class="p">;</span>

<span class="k">use</span> <span class="k">self</span><span class="p">::</span><span class="n">auto_import</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="n">AssistContext</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Import Granularity</div>
<p>It is possible to configure how use-trees are merged with the <code>imports.granularity.group</code> setting.
It has the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>crate</code>: Merge imports from the same crate into a single use statement. This kind of
nesting is only supported in Rust versions later than 1.24.</p>
</li>
<li>
<p><code>module</code>: Merge imports from the same module into a single use statement.</p>
</li>
<li>
<p><code>item</code>: Don&#8217;t merge imports at all, creating one import per item.</p>
</li>
<li>
<p><code>preserve</code>: Do not change the granularity of any imports. For auto-import this has the same
effect as <code>item</code>.</p>
</li>
<li>
<p><code>one</code>: Merge all imports into a single use statement as long as they have the same visibility
and attributes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <code>VS Code</code> the configuration for this is <code>rust-analyzer.imports.granularity.group</code>.</p>
</div>
<div class="paragraph">
<div class="title">Import Prefix</div>
<p>The style of imports in the same crate is configurable through the <code>imports.prefix</code> setting.
It has the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>crate</code>: This setting will force paths to be always absolute, starting with the <code>crate</code>
prefix, unless the item is defined outside of the current crate.</p>
</li>
<li>
<p><code>self</code>: This setting will force paths that are relative to the current module to always
start with <code>self</code>. This will result in paths that always start with either <code>crate</code>, <code>self</code>,
<code>super</code> or an extern crate identifier.</p>
</li>
<li>
<p><code>plain</code>: This setting does not impose any restrictions in imports.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <code>VS Code</code> the configuration for this is <code>rust-analyzer.imports.prefix</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020673-b85be580-917a-11eb-9022-59585f35d4f8.gif" alt="113020673 b85be580 917a 11eb 9022 59585f35d4f8">
</div>
</div>
</div>
<div class="sect2">
<h3 id="completion-with-autoimport"><a class="anchor" href="#completion-with-autoimport"></a>Completion With Autoimport</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-completion/src/completions/flyimport.rs#L19">flyimport.rs</a></p>
</div>
<div class="paragraph">
<p>When completing names in the current scope, proposes additional imports from other modules or crates,
if they can be qualified in the scope, and their name contains all symbols from the completion input.</p>
</div>
<div class="paragraph">
<p>To be considered applicable, the name must contain all input symbols in the given order, not necessarily adjacent.
If any input symbol is not lowercased, the name must contain all symbols in exact case; otherwise the containing is checked case-insensitively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre>fn main() {
    pda$0
}
# pub mod std { pub mod marker { pub struct PhantomData { } } }
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8594;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>use std::marker::PhantomData;

fn main() {
    PhantomData
}
# pub mod std { pub mod marker { pub struct PhantomData { } } }
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Also completes associated items, that require trait imports.
If any unresolved and/or partially-qualified path precedes the input, it will be taken into account.
Currently, only the imports with their import path ending with the whole qualifier will be proposed
(no fuzzy matching for qualifier).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre>mod foo {
    pub mod bar {
        pub struct Item;

        impl Item {
            pub const TEST_ASSOC: usize = 3;
        }
    }
}

fn main() {
    bar::Item::TEST_A$0
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8594;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre>use foo::bar;

mod foo {
    pub mod bar {
        pub struct Item;

        impl Item {
            pub const TEST_ASSOC: usize = 3;
        }
    }
}

fn main() {
    bar::Item::TEST_ASSOC
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
currently, if an assoc item comes from a trait that&#8217;s not currently imported, and it also has an unresolved and/or partially-qualified path,
no imports will be proposed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Fuzzy search details</div>
<p>To avoid an excessive amount of the results returned, completion input is checked for inclusion in the names only
(i.e. in <code>HashMap</code> in the <code>std::collections::HashMap</code> path).
For the same reasons, avoids searching for any path imports for inputs with their length less than 2 symbols
(but shows all associated items for any input length).</p>
</div>
<div class="paragraph">
<div class="title">Import configuration</div>
<p>It is possible to configure how use-trees are merged with the <code>imports.granularity.group</code> setting.
Mimics the corresponding behavior of the <code>Auto Import</code> feature.</p>
</div>
<div class="paragraph">
<div class="title">LSP and performance implications</div>
<p>The feature is enabled only if the LSP client supports LSP protocol version 3.16+ and reports the <code>additionalTextEdits</code>
(case-sensitive) resolve client capability in its client capabilities.
This way the server is able to defer the costly computations, doing them for a selected completion item only.
For clients with no such support, all edits have to be calculated on the completion request, including the fuzzy search completion ones,
which might be slow ergo the feature is automatically disabled.</p>
</div>
<div class="paragraph">
<div class="title">Feature toggle</div>
<p>The feature can be forcefully turned off in the settings with the <code>rust-analyzer.completion.autoimport.enable</code> flag.
Note that having this flag set to <code>true</code> does not guarantee that the feature is enabled: your client needs to have the corresponding
capability enabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="debug-itemtree"><a class="anchor" href="#debug-itemtree"></a>Debug ItemTree</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/view_item_tree.rs#L5">view_item_tree.rs</a></p>
</div>
<div class="paragraph">
<p>Displays the ItemTree of the currently open file, for debugging.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Debug ItemTree</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="expand-macro-recursively"><a class="anchor" href="#expand-macro-recursively"></a>Expand Macro Recursively</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/expand_macro.rs#L15">expand_macro.rs</a></p>
</div>
<div class="paragraph">
<p>Shows the full macro expansion of the macro at the current caret position.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Expand macro recursively at caret</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020648-b3973180-917a-11eb-84a9-ecb921293dc5.gif" alt="113020648 b3973180 917a 11eb 84a9 ecb921293dc5">
</div>
</div>
</div>
<div class="sect2">
<h3 id="expand-and-shrink-selection"><a class="anchor" href="#expand-and-shrink-selection"></a>Expand and Shrink Selection</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/extend_selection.rs#L15">extend_selection.rs</a></p>
</div>
<div class="paragraph">
<p>Extends or shrinks the current selection to the encompassing syntactic construct
(expression, statement, item, module, etc). It works with multiple cursors.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>→</kbd></span>, <span class="keyseq"><kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>←</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020651-b42fc800-917a-11eb-8a4f-cf1a07859fac.gif" alt="113020651 b42fc800 917a 11eb 8a4f cf1a07859fac">
</div>
</div>
</div>
<div class="sect2">
<h3 id="file-structure"><a class="anchor" href="#file-structure"></a>File Structure</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/file_structure.rs#L25">file_structure.rs</a></p>
</div>
<div class="paragraph">
<p>Provides a tree of the symbols defined in the file. Can be used to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fuzzy search symbol in a file (super useful)</p>
</li>
<li>
<p>draw breadcrumbs to describe the context around the cursor</p>
</li>
<li>
<p>draw outline of the file</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020654-b42fc800-917a-11eb-8388-e7dc4d92b02e.gif" alt="113020654 b42fc800 917a 11eb 8388 e7dc4d92b02e">
</div>
</div>
</div>
<div class="sect2">
<h3 id="find-all-references"><a class="anchor" href="#find-all-references"></a>Find All References</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/references.rs#L42">references.rs</a></p>
</div>
<div class="paragraph">
<p>Shows all references of the item at the cursor location</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Shift</kbd>+<kbd>Alt</kbd>+<kbd>F12</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020670-b7c34f00-917a-11eb-8003-370ac5f2b3cb.gif" alt="113020670 b7c34f00 917a 11eb 8003 370ac5f2b3cb">
</div>
</div>
</div>
<div class="sect2">
<h3 id="folding"><a class="anchor" href="#folding"></a>Folding</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/folding_ranges.rs#L36">folding_ranges.rs</a></p>
</div>
<div class="paragraph">
<p>Defines folding regions for curly braced blocks, runs of consecutive use, mod, const or static
items, and <code>region</code> / <code>endregion</code> comment markers.</p>
</div>
</div>
<div class="sect2">
<h3 id="format-string-completion"><a class="anchor" href="#format-string-completion"></a>Format String Completion</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-completion/src/completions/postfix/format_like.rs#L0">format_like.rs</a></p>
</div>
<div class="paragraph">
<p><code>"Result {result} is {2 + 2}"</code> is expanded to the <code>"Result {} is {}", result, 2 + 2</code>.</p>
</div>
<div class="paragraph">
<p>The following postfix snippets are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>format</code> &#8594; <code>format!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>panic</code> &#8594; <code>panic!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>println</code> &#8594; <code>println!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>log</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>logd</code> &#8594; <code>log::debug!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>logt</code> &#8594; <code>log::trace!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>logi</code> &#8594; <code>log::info!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>logw</code> &#8594; <code>log::warn!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>loge</code> &#8594; <code>log::error!(&#8230;&#8203;)</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020656-b560f500-917a-11eb-87de-02991f61beb8.gif" alt="113020656 b560f500 917a 11eb 87de 02991f61beb8">
</div>
</div>
</div>
<div class="sect2">
<h3 id="go-to-declaration"><a class="anchor" href="#go-to-declaration"></a>Go to Declaration</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/goto_declaration.rs#L13">goto_declaration.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the declaration of an identifier.</p>
</div>
<div class="paragraph">
<p>This is the same as <code>Go to Definition</code> with the following exceptions:
- outline modules will navigate to the <code>mod name;</code> item declaration
- trait assoc items will navigate to the assoc item of the trait declaration opposed to the trait impl
- fields in patterns will navigate to the field declaration of the struct, union or variant</p>
</div>
</div>
<div class="sect2">
<h3 id="go-to-definition"><a class="anchor" href="#go-to-definition"></a>Go to Definition</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/goto_definition.rs#L17">goto_definition.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the definition of an identifier.</p>
</div>
<div class="paragraph">
<p>For outline modules, this will navigate to the source file of the module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>F12</kbd></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065563-025fbe00-91b1-11eb-83e4-a5a703610b23.gif" alt="113065563 025fbe00 91b1 11eb 83e4 a5a703610b23">
</div>
</div>
</div>
<div class="sect2">
<h3 id="go-to-implementation"><a class="anchor" href="#go-to-implementation"></a>Go to Implementation</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/goto_implementation.rs#L11">goto_implementation.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the impl blocks of types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>F12</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065566-02f85480-91b1-11eb-9288-aaad8abd8841.gif" alt="113065566 02f85480 91b1 11eb 9288 aaad8abd8841">
</div>
</div>
</div>
<div class="sect2">
<h3 id="go-to-type-definition"><a class="anchor" href="#go-to-type-definition"></a>Go to Type Definition</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/goto_type_definition.rs#L7">goto_type_definition.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the type of an identifier.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Go to Type Definition</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020657-b560f500-917a-11eb-9007-0f809733a338.gif" alt="113020657 b560f500 917a 11eb 9007 0f809733a338">
</div>
</div>
</div>
<div class="sect2">
<h3 id="highlight-related"><a class="anchor" href="#highlight-related"></a>Highlight Related</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/highlight_related.rs#L41">highlight_related.rs</a></p>
</div>
<div class="paragraph">
<p>Highlights constructs related to the thing under the cursor:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>if on an identifier, highlights all references to that identifier in the current file</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>additionally, if the identifier is a trait in a where clause, type parameter trait bound or use item, highlights all references to that trait&#8217;s assoc items in the corresponding scope</p>
</li>
</ol>
</div>
</li>
<li>
<p>if on an <code>async</code> or <code>await</code> token, highlights all yield points for that async context</p>
</li>
<li>
<p>if on a <code>return</code> or <code>fn</code> keyword, <code>?</code> character or <code>&#8594;</code> return type arrow, highlights all exit points for that context</p>
</li>
<li>
<p>if on a <code>break</code>, <code>loop</code>, <code>while</code> or <code>for</code> token, highlights all break points for that loop or block context</p>
</li>
<li>
<p>if on a <code>move</code> or <code>|</code> token that belongs to a closure, highlights all captures of the closure.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note: <code>?</code>, <code>|</code> and <code>&#8594;</code> do not currently trigger this behavior in the VSCode editor.</p>
</div>
</div>
<div class="sect2">
<h3 id="hover"><a class="anchor" href="#hover"></a>Hover</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/hover.rs#L98">hover.rs</a></p>
</div>
<div class="paragraph">
<p>Shows additional information, like the type of an expression or the documentation for a definition when "focusing" code.
Focusing is usually hovering with a mouse, but can also be triggered with a shortcut.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020658-b5f98b80-917a-11eb-9f88-3dbc27320c95.gif" alt="113020658 b5f98b80 917a 11eb 9f88 3dbc27320c95">
</div>
</div>
</div>
<div class="sect2">
<h3 id="inlay-hints"><a class="anchor" href="#inlay-hints"></a>Inlay Hints</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/inlay_hints.rs#L433">inlay_hints.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer shows additional information inline with the source code.
Editors usually render this using read-only virtual text snippets interspersed with code.</p>
</div>
<div class="paragraph">
<p>rust-analyzer by default shows hints for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>types of local variables</p>
</li>
<li>
<p>names of function arguments</p>
</li>
<li>
<p>types of chained expressions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optionally, one can enable additional hints for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>return types of closure expressions</p>
</li>
<li>
<p>elided lifetimes</p>
</li>
<li>
<p>compiler inserted reborrows</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020660-b5f98b80-917a-11eb-8d70-3be3fd558cdd.png" alt="113020660 b5f98b80 917a 11eb 8d70 3be3fd558cdd">
</div>
</div>
</div>
<div class="sect2">
<h3 id="interpret-function"><a class="anchor" href="#interpret-function"></a>Interpret Function</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/interpret_function.rs#L9">interpret_function.rs</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Interpret Function</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="join-lines"><a class="anchor" href="#join-lines"></a>Join Lines</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/join_lines.rs#L20">join_lines.rs</a></p>
</div>
<div class="paragraph">
<p>Join selected lines into one, smartly fixing up whitespace, trailing commas, and braces.</p>
</div>
<div class="paragraph">
<p>See
<a href="https://user-images.githubusercontent.com/1711539/124515923-4504e800-dde9-11eb-8d58-d97945a1a785.gif">this gif</a>
for the cases handled specially by joined lines.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Join lines</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020661-b6922200-917a-11eb-87c4-b75acc028f11.gif" alt="113020661 b6922200 917a 11eb 87c4 b75acc028f11">
</div>
</div>
</div>
<div class="sect2">
<h3 id="magic-completions"><a class="anchor" href="#magic-completions"></a>Magic Completions</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-completion/src/lib.rs#L45">lib.rs</a></p>
</div>
<div class="paragraph">
<p>In addition to usual reference completion, rust-analyzer provides some ✨magic✨
completions as well:</p>
</div>
<div class="paragraph">
<p>Keywords like <code>if</code>, <code>else</code> <code>while</code>, <code>loop</code> are completed with braces, and cursor
is placed at the appropriate position. Even though <code>if</code> is easy to type, you
still want to complete it, to get ` { }` for free! <code>return</code> is inserted with a
space or <code>;</code> depending on the return type of the function.</p>
</div>
<div class="paragraph">
<p>When completing a function call, <code>()</code> are automatically inserted. If a function
takes arguments, the cursor is positioned inside the parenthesis.</p>
</div>
<div class="paragraph">
<p>There are postfix completions, which can be triggered by typing something like
<code>foo().if</code>. The word after <code>.</code> determines postfix completion. Possible variants are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>expr.if</code> &#8594; <code>if expr {}</code> or <code>if let &#8230;&#8203; {}</code> for <code>Option</code> or <code>Result</code></p>
</li>
<li>
<p><code>expr.match</code> &#8594; <code>match expr {}</code></p>
</li>
<li>
<p><code>expr.while</code> &#8594; <code>while expr {}</code> or <code>while let &#8230;&#8203; {}</code> for <code>Option</code> or <code>Result</code></p>
</li>
<li>
<p><code>expr.ref</code> &#8594; <code>&amp;expr</code></p>
</li>
<li>
<p><code>expr.refm</code> &#8594; <code>&amp;mut expr</code></p>
</li>
<li>
<p><code>expr.let</code> &#8594; <code>let $0 = expr;</code></p>
</li>
<li>
<p><code>expr.lete</code> &#8594; <code>let $1 = expr else { $0 };</code></p>
</li>
<li>
<p><code>expr.letm</code> &#8594; <code>let mut $0 = expr;</code></p>
</li>
<li>
<p><code>expr.not</code> &#8594; <code>!expr</code></p>
</li>
<li>
<p><code>expr.dbg</code> &#8594; <code>dbg!(expr)</code></p>
</li>
<li>
<p><code>expr.dbgr</code> &#8594; <code>dbg!(&amp;expr)</code></p>
</li>
<li>
<p><code>expr.call</code> &#8594; <code>(expr)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There also snippet completions:</p>
</div>
<div class="ulist">
<div class="title">Expressions</div>
<ul>
<li>
<p><code>pd</code> &#8594; <code>eprintln!(" = {:?}", );</code></p>
</li>
<li>
<p><code>ppd</code> &#8594; <code>eprintln!(" = {:#?}", );</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Items</div>
<ul>
<li>
<p><code>tfn</code> &#8594; <code>#[test] fn feature(){}</code></p>
</li>
<li>
<p><code>tmod</code> &#8594;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="nd">#[cfg(test)]</span>
<span class="k">mod</span> <span class="n">tests</span> <span class="p">{</span>
    <span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>

    <span class="nd">#[test]</span>
    <span class="k">fn</span> <span class="nf">test_name</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>And the auto import completions, enabled with the <code>rust-analyzer.completion.autoimport.enable</code> setting and the corresponding LSP client capabilities.
Those are the additional completion options with automatic <code>use</code> import and options from all project importable items,
fuzzy matched against the completion input.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020667-b72ab880-917a-11eb-8778-716cf26a0eb3.gif" alt="113020667 b72ab880 917a 11eb 8778 716cf26a0eb3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="matching-brace"><a class="anchor" href="#matching-brace"></a>Matching Brace</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/matching_brace.rs#L6">matching_brace.rs</a></p>
</div>
<div class="paragraph">
<p>If the cursor is on any brace (<code>&lt;&gt;(){}[]||</code>) which is a part of a brace-pair,
moves cursor to the matching brace. It uses the actual parser to determine
braces, so it won&#8217;t confuse generics with comparisons.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Find matching brace</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065573-04298180-91b1-11eb-8dec-d4e2a202f304.gif" alt="113065573 04298180 91b1 11eb 8dec d4e2a202f304">
</div>
</div>
</div>
<div class="sect2">
<h3 id="memory-usage"><a class="anchor" href="#memory-usage"></a>Memory Usage</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-db/src/apply_change.rs#L44">apply_change.rs</a></p>
</div>
<div class="paragraph">
<p>Clears rust-analyzer&#8217;s internal database and prints memory usage statistics.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Memory Usage (Clears Database)</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065592-08559f00-91b1-11eb-8c96-64b88068ec02.gif" alt="113065592 08559f00 91b1 11eb 8c96 64b88068ec02">
</div>
</div>
</div>
<div class="sect2">
<h3 id="move-item"><a class="anchor" href="#move-item"></a>Move Item</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/move_item.rs#L15">move_item.rs</a></p>
</div>
<div class="paragraph">
<p>Move item under cursor or selection up and down.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Move item up</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Move item down</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065576-04298180-91b1-11eb-91ce-4505e99ed598.gif" alt="113065576 04298180 91b1 11eb 91ce 4505e99ed598">
</div>
</div>
</div>
<div class="sect2">
<h3 id="on-enter"><a class="anchor" href="#on-enter"></a>On Enter</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/typing/on_enter.rs#L16">on_enter.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer can override <kbd>Enter</kbd> key to make it smarter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>Enter</kbd> inside triple-slash comments automatically inserts <code>///</code></p>
</li>
<li>
<p><kbd>Enter</kbd> in the middle or after a trailing space in <code>//</code> inserts <code>//</code></p>
</li>
<li>
<p><kbd>Enter</kbd> inside <code>//!</code> doc comments automatically inserts <code>//!</code></p>
</li>
<li>
<p><kbd>Enter</kbd> after <code>{</code> indents contents and closing <code>}</code> of single-line block</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This action needs to be assigned to shortcut explicitly.</p>
</div>
<div class="paragraph">
<p>Note that, depending on the other installed extensions, this feature can visibly slow down typing.
Similarly, if rust-analyzer crashes or stops responding, <code>Enter</code> might not work.
In that case, you can still press <code>Shift-Enter</code> to insert a newline.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">VS Code</dt>
<dd>
<p>Add the following to <code>keybindings.json</code>:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.onEnter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"editorTextFocus &amp;&amp; !suggestWidgetVisible &amp;&amp; editorLangId == rust"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When using the Vim plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.onEnter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"editorTextFocus &amp;&amp; !suggestWidgetVisible &amp;&amp; editorLangId == rust &amp;&amp; vim.mode == 'Insert'"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065578-04c21800-91b1-11eb-82b8-22b8c481e645.gif" alt="113065578 04c21800 91b1 11eb 82b8 22b8c481e645">
</div>
</div>
</div>
<div class="sect2">
<h3 id="on-typing-assists"><a class="anchor" href="#on-typing-assists"></a>On Typing Assists</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/typing.rs#L42">typing.rs</a></p>
</div>
<div class="paragraph">
<p>Some features trigger on typing certain characters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>typing <code>let =</code> tries to smartly add <code>;</code> if <code>=</code> is followed by an existing expression</p>
</li>
<li>
<p>typing <code>=</code> between two expressions adds <code>;</code> when in statement position</p>
</li>
<li>
<p>typing <code>=</code> to turn an assignment into an equality comparison removes <code>;</code> when in expression position</p>
</li>
<li>
<p>typing <code>.</code> in a chain method call auto-indents</p>
</li>
<li>
<p>typing <code>{</code> or <code>(</code> in front of an expression inserts a closing <code>}</code> or <code>)</code> after the expression</p>
</li>
<li>
<p>typing <code>{</code> in a use item adds a closing <code>}</code> in the right place</p>
<div class="dlist">
<dl>
<dt class="hdlist1">VS Code</dt>
<dd>
<p>Add the following to <code>settings.json</code>:</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>"editor.formatOnType": true,</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113166163-69758500-923a-11eb-81ee-eb33ec380399.gif" alt="113166163 69758500 923a 11eb 81ee eb33ec380399">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113171066-105c2000-923f-11eb-87ab-f4a263346567.gif" alt="113171066 105c2000 923f 11eb 87ab f4a263346567">
</div>
</div>
</div>
<div class="sect2">
<h3 id="open-docs"><a class="anchor" href="#open-docs"></a>Open Docs</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/doc_links.rs#L122">doc_links.rs</a></p>
</div>
<div class="paragraph">
<p>Retrieve a links to documentation for the given symbol.</p>
</div>
<div class="paragraph">
<p>The simplest way to use this feature is via the context menu. Right-click on
the selected item. The context menu opens. Select <strong>Open Docs</strong>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Open Docs</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="parent-module"><a class="anchor" href="#parent-module"></a>Parent Module</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/parent_module.rs#L14">parent_module.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the parent module of the current module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Locate parent module</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065580-04c21800-91b1-11eb-9a32-00086161c0bd.gif" alt="113065580 04c21800 91b1 11eb 9a32 00086161c0bd">
</div>
</div>
</div>
<div class="sect2">
<h3 id="related-tests"><a class="anchor" href="#related-tests"></a>Related Tests</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/runnables.rs#L195">runnables.rs</a></p>
</div>
<div class="paragraph">
<p>Provides a sneak peek of all tests where the current item is used.</p>
</div>
<div class="paragraph">
<p>The simplest way to use this feature is via the context menu. Right-click on
the selected item. The context menu opens. Select <strong>Peek Related Tests</strong>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Peek Related Tests</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rename"><a class="anchor" href="#rename"></a>Rename</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/rename.rs#L72">rename.rs</a></p>
</div>
<div class="paragraph">
<p>Renames the item below the cursor and all of its references</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>F2</kbd></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065582-055aae80-91b1-11eb-8ade-2b58e6d81883.gif" alt="113065582 055aae80 91b1 11eb 8ade 2b58e6d81883">
</div>
</div>
</div>
<div class="sect2">
<h3 id="run"><a class="anchor" href="#run"></a>Run</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/runnables.rs#L111">runnables.rs</a></p>
</div>
<div class="paragraph">
<p>Shows a popup suggesting to run a test/benchmark/binary <strong>at the current cursor
location</strong>. Super useful for repeatedly running just a single test. Do bind this
to a shortcut!</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Run</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065583-055aae80-91b1-11eb-958f-d67efcaf6a2f.gif" alt="113065583 055aae80 91b1 11eb 958f d67efcaf6a2f">
</div>
</div>
</div>
<div class="sect2">
<h3 id="semantic-syntax-highlighting"><a class="anchor" href="#semantic-syntax-highlighting"></a>Semantic Syntax Highlighting</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/syntax_highlighting.rs#L65">syntax_highlighting.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer highlights the code semantically.
For example, <code>Bar</code> in <code>foo::Bar</code> might be colored differently depending on whether <code>Bar</code> is an enum or a trait.
rust-analyzer does not specify colors directly, instead it assigns a tag (like <code>struct</code>) and a set of modifiers (like <code>declaration</code>) to each token.
It&#8217;s up to the client to map those to specific colors.</p>
</div>
<div class="paragraph">
<p>The general rule is that a reference to an entity gets colored the same way as the entity itself.
We also give special modifier for <code>mut</code> and <code>&amp;mut</code> local variables.</p>
</div>
<div class="paragraph">
<div class="title">Token Tags</div>
<p>Rust-analyzer currently emits the following token tags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For items:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
attribute
</td>
<td class="hdlist2">
<p>Emitted for attribute macros.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
enum
</td>
<td class="hdlist2">
<p>Emitted for enums.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
function
</td>
<td class="hdlist2">
<p>Emitted for free-standing functions.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
derive
</td>
<td class="hdlist2">
<p>Emitted for derive macros.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
macro
</td>
<td class="hdlist2">
<p>Emitted for function-like macros.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method
</td>
<td class="hdlist2">
<p>Emitted for associated functions, also knowns as methods.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
namespace
</td>
<td class="hdlist2">
<p>Emitted for modules.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
struct
</td>
<td class="hdlist2">
<p>Emitted for structs.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
trait
</td>
<td class="hdlist2">
<p>Emitted for traits.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
typeAlias
</td>
<td class="hdlist2">
<p>Emitted for type aliases and <code>Self</code> in `impl`s.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
union
</td>
<td class="hdlist2">
<p>Emitted for unions.</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For literals:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
boolean
</td>
<td class="hdlist2">
<p>Emitted for the boolean literals <code>true</code> and <code>false</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
character
</td>
<td class="hdlist2">
<p>Emitted for character literals.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
number
</td>
<td class="hdlist2">
<p>Emitted for numeric literals.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
string
</td>
<td class="hdlist2">
<p>Emitted for string literals.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
escapeSequence
</td>
<td class="hdlist2">
<p>Emitted for escaped sequences inside strings like <code>\n</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
formatSpecifier
</td>
<td class="hdlist2">
<p>Emitted for format specifiers <code>{:?}</code> in <code>format!</code>-like macros.</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For operators:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
operator
</td>
<td class="hdlist2">
<p>Emitted for general operators.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
arithmetic
</td>
<td class="hdlist2">
<p>Emitted for the arithmetic operators <code>+</code>, <code>-</code>, <code><strong></code>, <code>/</code>, <code>+=</code>, <code>-=</code>, <code></strong>=</code>, <code>/=</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
bitwise
</td>
<td class="hdlist2">
<p>Emitted for the bitwise operators <code>|</code>, <code>&amp;</code>, <code>!</code>, <code>^</code>, <code>|=</code>, <code>&amp;=</code>, <code>^=</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
comparison
</td>
<td class="hdlist2">
<p>Emitted for the comparison operators <code>&gt;</code>, <code>&lt;</code>, <code>==</code>, <code>&gt;=</code>, <code>&#8656;</code>, <code>!=</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
logical
</td>
<td class="hdlist2">
<p>Emitted for the logical operators <code>||</code>, <code>&amp;&amp;</code>, <code>!</code>.</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For punctuation:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
punctuation
</td>
<td class="hdlist2">
<p>Emitted for general punctuation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
attributeBracket
</td>
<td class="hdlist2">
<p>Emitted for attribute invocation brackets, that is the <code>#[</code> and <code>]</code> tokens.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
angle
</td>
<td class="hdlist2">
<p>Emitted for <code>&lt;&gt;</code> angle brackets.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
brace
</td>
<td class="hdlist2">
<p>Emitted for <code>{}</code> braces.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
bracket
</td>
<td class="hdlist2">
<p>Emitted for <code>[]</code> brackets.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
parenthesis
</td>
<td class="hdlist2">
<p>Emitted for <code>()</code> parentheses.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
colon
</td>
<td class="hdlist2">
<p>Emitted for the <code>:</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
comma
</td>
<td class="hdlist2">
<p>Emitted for the <code>,</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
dot
</td>
<td class="hdlist2">
<p>Emitted for the <code>.</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
semi
</td>
<td class="hdlist2">
<p>Emitted for the <code>;</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
macroBang
</td>
<td class="hdlist2">
<p>Emitted for the <code>!</code> token in macro calls.</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
builtinAttribute
</td>
<td class="hdlist2">
<p>Emitted for names to builtin attributes in attribute path, the <code>repr</code> in <code>#[repr(u8)]</code> for example.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
builtinType
</td>
<td class="hdlist2">
<p>Emitted for builtin types like <code>u32</code>, <code>str</code> and <code>f32</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
comment
</td>
<td class="hdlist2">
<p>Emitted for comments.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
constParameter
</td>
<td class="hdlist2">
<p>Emitted for const parameters.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
deriveHelper
</td>
<td class="hdlist2">
<p>Emitted for derive helper attributes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
enumMember
</td>
<td class="hdlist2">
<p>Emitted for enum variants.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
generic
</td>
<td class="hdlist2">
<p>Emitted for generic tokens that have no mapping.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
keyword
</td>
<td class="hdlist2">
<p>Emitted for keywords.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
label
</td>
<td class="hdlist2">
<p>Emitted for labels.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
lifetime
</td>
<td class="hdlist2">
<p>Emitted for lifetimes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
parameter
</td>
<td class="hdlist2">
<p>Emitted for non-self function parameters.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
property
</td>
<td class="hdlist2">
<p>Emitted for struct and union fields.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
selfKeyword
</td>
<td class="hdlist2">
<p>Emitted for the self function parameter and self path-specifier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
selfTypeKeyword
</td>
<td class="hdlist2">
<p>Emitted for the Self type parameter.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
toolModule
</td>
<td class="hdlist2">
<p>Emitted for tool modules.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
typeParameter
</td>
<td class="hdlist2">
<p>Emitted for type parameters.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
unresolvedReference
</td>
<td class="hdlist2">
<p>Emitted for unresolved references, names that rust-analyzer can&#8217;t find the definition of.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
variable
</td>
<td class="hdlist2">
<p>Emitted for locals, constants and statics.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Token Modifiers</div>
<p>Token modifiers allow to style some elements in the source code more precisely.</p>
</div>
<div class="paragraph">
<p>Rust-analyzer currently emits the following token modifiers:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
async
</td>
<td class="hdlist2">
<p>Emitted for async functions and the <code>async</code> and <code>await</code> keywords.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
attribute
</td>
<td class="hdlist2">
<p>Emitted for tokens inside attributes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
callable
</td>
<td class="hdlist2">
<p>Emitted for locals whose types implements one of the <code>Fn*</code> traits.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
constant
</td>
<td class="hdlist2">
<p>Emitted for consts.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
consuming
</td>
<td class="hdlist2">
<p>Emitted for locals that are being consumed when use in a function call.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
controlFlow
</td>
<td class="hdlist2">
<p>Emitted for control-flow related tokens, this includes the <code>?</code> operator.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
crateRoot
</td>
<td class="hdlist2">
<p>Emitted for crate names, like <code>serde</code> and <code>crate</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
declaration
</td>
<td class="hdlist2">
<p>Emitted for names of definitions, like <code>foo</code> in <code>fn foo() {}</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
defaultLibrary
</td>
<td class="hdlist2">
<p>Emitted for items from built-in crates (std, core, alloc, test and proc_macro).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
documentation
</td>
<td class="hdlist2">
<p>Emitted for documentation comments.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
injected
</td>
<td class="hdlist2">
<p>Emitted for doc-string injected highlighting like rust source blocks in documentation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
intraDocLink
</td>
<td class="hdlist2">
<p>Emitted for intra doc links in doc-strings.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
library
</td>
<td class="hdlist2">
<p>Emitted for items that are defined outside of the current crate.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
macro
</td>
<td class="hdlist2">
<p>Emitted for tokens inside macro calls.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
mutable
</td>
<td class="hdlist2">
<p>Emitted for mutable locals and statics as well as functions taking <code>&amp;mut self</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
public
</td>
<td class="hdlist2">
<p>Emitted for items that are from the current crate and are <code>pub</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
reference
</td>
<td class="hdlist2">
<p>Emitted for locals behind a reference and functions taking <code>self</code> by reference.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
static
</td>
<td class="hdlist2">
<p>Emitted for "static" functions, also known as functions that do not take a <code>self</code> param, as well as statics and consts.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
trait
</td>
<td class="hdlist2">
<p>Emitted for associated trait items.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
unsafe
</td>
<td class="hdlist2">
<p>Emitted for unsafe operations, like unsafe function calls, as well as the <code>unsafe</code> token.</p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113164457-06cfb980-9239-11eb-819b-0f93e646acf8.png" alt="113164457 06cfb980 9239 11eb 819b 0f93e646acf8">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113187625-f7f50100-9250-11eb-825e-91c58f236071.png" alt="113187625 f7f50100 9250 11eb 825e 91c58f236071">
</div>
</div>
</div>
<div class="sect2">
<h3 id="show-dependency-tree"><a class="anchor" href="#show-dependency-tree"></a>Show Dependency Tree</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/fetch_crates.rs#L13">fetch_crates.rs</a></p>
</div>
<div class="paragraph">
<p>Shows a view tree with all the dependencies of this project</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Panel Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Dependencies</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/5748995/229394139-2625beab-f4c9-484b-84ed-ad5dee0b1e1a.png" alt="229394139 2625beab f4c9 484b 84ed ad5dee0b1e1a">
</div>
</div>
</div>
<div class="sect2">
<h3 id="show-syntax-tree"><a class="anchor" href="#show-syntax-tree"></a>Show Syntax Tree</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/syntax_tree.rs#L9">syntax_tree.rs</a></p>
</div>
<div class="paragraph">
<p>Shows the parse tree of the current file. It exists mostly for debugging
rust-analyzer itself.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Show Syntax Tree</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065586-068bdb80-91b1-11eb-9507-fee67f9f45a0.gif" alt="113065586 068bdb80 91b1 11eb 9507 fee67f9f45a0">
</div>
</div>
</div>
<div class="sect2">
<h3 id="shuffle-crate-graph"><a class="anchor" href="#shuffle-crate-graph"></a>Shuffle Crate Graph</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/shuffle_crate_graph.rs#L8">shuffle_crate_graph.rs</a></p>
</div>
<div class="paragraph">
<p>Randomizes all crate IDs in the crate graph, for debugging.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Shuffle Crate Graph</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="status"><a class="anchor" href="#status"></a>Status</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/status.rs#L28">status.rs</a></p>
</div>
<div class="paragraph">
<p>Shows internal statistic about memory usage of rust-analyzer.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Status</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065584-05f34500-91b1-11eb-98cc-5c196f76be7f.gif" alt="113065584 05f34500 91b1 11eb 98cc 5c196f76be7f">
</div>
</div>
</div>
<div class="sect2">
<h3 id="structural-search-and-replace"><a class="anchor" href="#structural-search-and-replace"></a>Structural Search and Replace</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-ssr/src/lib.rs#L8">lib.rs</a></p>
</div>
<div class="paragraph">
<p>Search and replace with named wildcards that will match any expression, type, path, pattern or item.
The syntax for a structural search replace command is <code>&lt;search_pattern&gt; =&#8658;&gt; &lt;replace_pattern&gt;</code>.
A <code>$&lt;name&gt;</code> placeholder in the search pattern will match any AST node and <code>$&lt;name&gt;</code> will reference it in the replacement.
Within a macro call, a placeholder will match up until whatever token follows the placeholder.</p>
</div>
<div class="paragraph">
<p>All paths in both the search pattern and the replacement template must resolve in the context
in which this command is invoked. Paths in the search pattern will then match the code if they
resolve to the same item, even if they&#8217;re written differently. For example if we invoke the
command in the module <code>foo</code> with a pattern of <code>Bar</code>, then code in the parent module that refers
to <code>foo::Bar</code> will match.</p>
</div>
<div class="paragraph">
<p>Paths in the replacement template will be rendered appropriately for the context in which the
replacement occurs. For example if our replacement template is <code>foo::Bar</code> and we match some
code in the <code>foo</code> module, we&#8217;ll insert just <code>Bar</code>.</p>
</div>
<div class="paragraph">
<p>Inherent method calls should generally be written in UFCS form. e.g. <code>foo::Bar::baz($s, $a)</code> will
match <code>$s.baz($a)</code>, provided the method call <code>baz</code> resolves to the method <code>foo::Bar::baz</code>. When a
placeholder is the receiver of a method call in the search pattern (e.g. <code>$s.foo()</code>), but not in
the replacement template (e.g. <code>bar($s)</code>), then *, &amp; and &amp;mut will be added as needed to mirror
whatever autoderef and autoref was happening implicitly in the matched code.</p>
</div>
<div class="paragraph">
<p>The scope of the search / replace will be restricted to the current selection if any, otherwise
it will apply to the whole workspace.</p>
</div>
<div class="paragraph">
<p>Placeholders may be given constraints by writing them as <code>${&lt;name&gt;:&lt;constraint1&gt;:&lt;constraint2&gt;&#8230;&#8203;}</code>.</p>
</div>
<div class="paragraph">
<p>Supported constraints:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Restricts placeholder</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind(literal)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a literal (e.g. <code>42</code> or <code>"forty two"</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not(a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negates the constraint <code>a</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Available via the command <code>rust-analyzer.ssr</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="c">// Using structural search replace command [foo($a, $b) ==&gt;&gt; ($a).foo($b)]</span>

<span class="c">// BEFORE</span>
<span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>

<span class="c">// AFTER</span>
<span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span><span class="nf">.foo</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: Structural Search Replace</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Also available as an assist, by writing a comment containing the structural
search and replace rule. You will only see the assist if the comment can
be parsed as a valid structural search and replace rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="c">// Place the cursor on the line below to see the assist 💡.</span>
<span class="c">// foo($a, $b) ==&gt;&gt; ($a).foo($b)</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="user-snippet-completions"><a class="anchor" href="#user-snippet-completions"></a>User Snippet Completions</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-completion/src/snippet.rs#L5">snippet.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer allows the user to define custom (postfix)-snippets that may depend on items to be accessible for the current scope to be applicable.</p>
</div>
<div class="paragraph">
<p>A custom snippet can be defined by adding it to the <code>rust-analyzer.completion.snippets.custom</code> object respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"rust-analyzer.completion.snippets.custom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"thread spawn"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"spawn"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tspawn"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"thread::spawn(move || {"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"</span><span class="se">\t</span><span class="s2">$0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"});"</span><span class="p">,</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Insert a thread::spawn call"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"std::thread"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"thread spawn"</code> is the name of the snippet.</p>
</li>
<li>
<p><code>prefix</code> defines one or more trigger words that will trigger the snippets completion.
Using <code>postfix</code> will instead create a postfix snippet.</p>
</li>
<li>
<p><code>body</code> is one or more lines of content joined via newlines for the final output.</p>
</li>
<li>
<p><code>description</code> is an optional description of the snippet, if unset the snippet name will be used.</p>
</li>
<li>
<p><code>requires</code> is an optional list of item paths that have to be resolvable in the current crate where the completion is rendered.
On failure of resolution the snippet won&#8217;t be applicable, otherwise the snippet will insert an import for the items on insertion if
the items aren&#8217;t yet in scope.</p>
</li>
<li>
<p><code>scope</code> is an optional filter for when the snippet should be applicable. Possible values are:</p>
<div class="ulist">
<ul>
<li>
<p>for Snippet-Scopes: <code>expr</code>, <code>item</code> (default: <code>item</code>)</p>
</li>
<li>
<p>for Postfix-Snippet-Scopes: <code>expr</code>, <code>type</code> (default: <code>expr</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>body</code> field also has access to placeholders as visible in the example as <code>$0</code>.
These placeholders take the form of <code>$number</code> or <code>${number:placeholder_text}</code> which can be traversed as tabstop in ascending order starting from 1,
with <code>$0</code> being a special case that always comes last.</p>
</div>
<div class="paragraph">
<p>There is also a special placeholder, <code>${receiver}</code>, which will be replaced by the receiver expression for postfix snippets, or a <code>$0</code> tabstop in case of normal snippets.
This replacement for normal snippets allows you to reuse a snippet for both post- and prefix in a single definition.</p>
</div>
<div class="paragraph">
<p>For the VSCode editor, rust-analyzer also ships with a small set of defaults which can be removed
by overwriting the settings object mentioned above, the defaults are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"Arc::new"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"postfix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arc"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Arc::new(${receiver})"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"std::sync::Arc"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Put the expression into an `Arc`"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Rc::new"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"postfix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rc"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rc::new(${receiver})"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"std::rc::Rc"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Put the expression into an `Rc`"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Box::pin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"postfix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pinbox"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Box::pin(${receiver})"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"std::boxed::Box"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Put the expression into a pinned `Box`"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Ok"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"postfix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ok(${receiver})"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wrap the expression in a `Result::Ok`"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Err"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"postfix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"err"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Err(${receiver})"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wrap the expression in a `Result::Err`"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Some"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"postfix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some(${receiver})"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wrap the expression in an `Option::Some`"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="view-crate-graph"><a class="anchor" href="#view-crate-graph"></a>View Crate Graph</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/view_crate_graph.rs#L8">view_crate_graph.rs</a></p>
</div>
<div class="paragraph">
<p>Renders the currently loaded crate graph as an SVG graphic. Requires the <code>dot</code> tool, which
is part of graphviz, to be installed.</p>
</div>
<div class="paragraph">
<p>Only workspace crates are included, no crates.io dependencies or sysroot crates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: View Crate Graph</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="view-hir"><a class="anchor" href="#view-hir"></a>View Hir</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/view_hir.rs#L6">view_hir.rs</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: View Hir</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065588-068bdb80-91b1-11eb-9a78-0b4ef1e972fb.gif" alt="113065588 068bdb80 91b1 11eb 9a78 0b4ef1e972fb">
</div>
</div>
</div>
<div class="sect2">
<h3 id="view-memory-layout"><a class="anchor" href="#view-memory-layout"></a>View Memory Layout</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/view_memory_layout.rs#L77">view_memory_layout.rs</a></p>
</div>
<div class="paragraph">
<p>Displays the recursive memory layout of a datatype.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: View Memory Layout</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="view-mir"><a class="anchor" href="#view-mir"></a>View Mir</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide/src/view_mir.rs#L6">view_mir.rs</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rust-analyzer: View Mir</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="workspace-symbol"><a class="anchor" href="#workspace-symbol"></a>Workspace Symbol</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-db/src/symbol_index.rs#L176">symbol_index.rs</a></p>
</div>
<div class="paragraph">
<p>Uses fuzzy-search to find types, modules and functions by name across your
project and dependencies. This is <strong>the</strong> most useful feature, which improves code
navigation tremendously. It mostly works on top of the built-in LSP
functionality, however <code>#</code> and <code>*</code> symbols can be used to narrow down the
search. Specifically,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Foo</code> searches for <code>Foo</code> type in the current workspace</p>
</li>
<li>
<p><code>foo#</code> searches for <code>foo</code> function in the current workspace</p>
</li>
<li>
<p><code>Foo*</code> searches for <code>Foo</code> type among dependencies, including <code>stdlib</code></p>
</li>
<li>
<p><code>foo#*</code> searches for <code>foo</code> function among dependencies</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That is, <code>#</code> switches from "types" to all symbols, <code>*</code> switches from the current
workspace to dependencies.</p>
</div>
<div class="paragraph">
<p>Note that filtering does not currently work in VSCode due to the editor never
sending the special symbols to the language server. Instead, you can configure
the filtering via the <code>rust-analyzer.workspace.symbol.search.scope</code> and
<code>rust-analyzer.workspace.symbol.search.kind</code> settings.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>T</kbd></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assists-code-actions"><a class="anchor" href="#assists-code-actions"></a>Assists (Code Actions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assists, or code actions, are small local refactorings, available in a particular context.
They are usually triggered by a shortcut or by clicking a light bulb icon in the editor.
Cursor position or selection is signified by <code>┃</code> character.</p>
</div>
<h3 id="add_braces" class="discrete"><code>add_braces</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_braces.rs#L8">add_braces.rs</a></p>
</div>
<div class="paragraph">
<p>Adds braces to lambda and match arm expressions.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">n</span> <span class="p">{</span>
        <span class="mi">1</span> <span class="k">=&gt;</span><span class="err">┃</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">n</span> <span class="p">{</span>
        <span class="mi">1</span> <span class="k">=&gt;</span> <span class="p">{</span>
            <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_explicit_type" class="discrete"><code>add_explicit_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_explicit_type.rs#L7">add_explicit_type.rs</a></p>
</div>
<div class="paragraph">
<p>Specify type for a let binding.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="err">┃</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_hash" class="discrete"><code>add_hash</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/raw_string.rs#L89">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a hash to a raw string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r##"Hello, World!"##</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_impl_default_members" class="discrete"><code>add_impl_default_members</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_missing_impl_members.rs#L55">add_missing_impl_members.rs</a></p>
</div>
<div class="paragraph">
<p>Adds scaffold for overriding default impl members.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">);</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span> <span class="o">=</span> <span class="p">();</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">);</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span> <span class="o">=</span> <span class="p">();</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>

    <span class="err">┃</span><span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_impl_missing_members" class="discrete"><code>add_impl_missing_members</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_missing_impl_members.rs#L13">add_missing_impl_members.rs</a></p>
</div>
<div class="paragraph">
<p>Adds scaffold for required impl members.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span><span class="err">┃</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">type</span> <span class="n">X</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
        <span class="nd">todo!</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_label_to_loop" class="discrete"><code>add_label_to_loop</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_label_to_loop.rs#L9">add_label_to_loop.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a label to a loop.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">loop</span><span class="err">┃</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
        <span class="n">continue</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">'l</span><span class="p">:</span> <span class="k">loop</span> <span class="p">{</span>
        <span class="k">break</span> <span class="nv">'l</span><span class="p">;</span>
        <span class="n">continue</span> <span class="nv">'l</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_lifetime_to_type" class="discrete"><code>add_lifetime_to_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_lifetime_to_type.rs#L5">add_lifetime_to_type.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new lifetime to a struct, enum or union.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="o">&amp;</span><span class="err">┃</span><span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="o">&amp;</span><span class="nv">'a</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_missing_match_arms" class="discrete"><code>add_missing_match_arms</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_missing_match_arms.rs#L13">add_missing_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>Adds missing clauses to a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span><span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nd">todo!</span><span class="p">(),</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nd">todo!</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_return_type" class="discrete"><code>add_return_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_return_type.rs#L6">add_return_type.rs</a></p>
</div>
<div class="paragraph">
<p>Adds the return type to a function or closure inferred from its tail expression if it doesn&#8217;t have a return
type specified. This assists is useable in a functions or closures tail expression or return type position.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="mi">4</span><span class="err">┃</span><span class="mi">2i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_turbo_fish" class="discrete"><code>add_turbo_fish</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/add_turbo_fish.rs#L13">add_turbo_fish.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>::&lt;_&gt;</code> to a call of a generic method or function.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="nd">todo!</span><span class="p">()</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">make</span><span class="err">┃</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="nd">todo!</span><span class="p">()</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nn">make</span><span class="p">::</span><span class="o">&lt;</span><span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="apply_demorgan" class="discrete"><code>apply_demorgan</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/apply_demorgan.rs#L17">apply_demorgan.rs</a></p>
</div>
<div class="paragraph">
<p>Apply <a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws">De Morgan&#8217;s law</a>.
This transforms expressions of the form <code>!l || !r</code> into <code>!(l &amp;&amp; r)</code>.
This also works with <code>&amp;&amp;</code>. This assist can only be applied with the cursor
on either <code>||</code> or <code>&amp;&amp;</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">4</span> <span class="p">||</span><span class="err">┃</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mf">3.14</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mf">3.14</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="apply_demorgan_iterator" class="discrete"><code>apply_demorgan_iterator</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/apply_demorgan.rs#L153">apply_demorgan.rs</a></p>
</div>
<div class="paragraph">
<p>Apply <a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws">De Morgan&#8217;s law</a> to
<code>Iterator::all</code> and <code>Iterator::any</code>.</p>
</div>
<div class="paragraph">
<p>This transforms expressions of the form <code>!iter.any(|x| predicate(x))</code> into
<code>iter.all(|x| !predicate(x))</code> and vice versa. This also works the other way for
<code>Iterator::all</code> into <code>Iterator::any</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">arr</span><span class="nf">.into_iter</span><span class="p">()</span><span class="err">.┃</span><span class="nf">any</span><span class="p">(|</span><span class="n">num</span><span class="p">|</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="k">if</span> <span class="n">arr</span><span class="nf">.into_iter</span><span class="p">()</span><span class="nf">.all</span><span class="p">(|</span><span class="n">num</span><span class="p">|</span> <span class="n">num</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="auto_import" class="discrete"><code>auto_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/auto_import.rs#L73">auto_import.rs</a></p>
</div>
<div class="paragraph">
<p>If the name is unresolved, provides all possible imports for it.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="n">HashMap</span><span class="err">┃</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="bind_unused_param" class="discrete"><code>bind_unused_param</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/bind_unused_param.rs#L12">bind_unused_param.rs</a></p>
</div>
<div class="paragraph">
<p>Binds unused function parameter to an underscore.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="err">┃</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="bool_to_enum" class="discrete"><code>bool_to_enum</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/bool_to_enum.rs#L28">bool_to_enum.rs</a></p>
</div>
<div class="paragraph">
<p>This converts boolean local variables, fields, constants, and statics into a new
enum with two variants <code>Bool::True</code> and <code>Bool::False</code>, as well as replacing
all assignments with the variants and replacing all usages with <code>== Bool::True</code> or
<code>== Bool::False</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="err">┃</span><span class="nb">bool</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="nd">#[derive(PartialEq,</span> <span class="nd">Eq)]</span>
<span class="k">enum</span> <span class="n">Bool</span> <span class="p">{</span> <span class="n">True</span><span class="p">,</span> <span class="n">False</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nn">Bool</span><span class="p">::</span><span class="n">True</span><span class="p">;</span>

    <span class="k">if</span> <span class="nb">bool</span> <span class="o">==</span> <span class="nn">Bool</span><span class="p">::</span><span class="n">True</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="change_visibility" class="discrete"><code>change_visibility</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/change_visibility.rs#L13">change_visibility.rs</a></p>
</div>
<div class="paragraph">
<p>Adds or changes existing visibility specifier.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="err">┃</span><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_bool_then_to_if" class="discrete"><code>convert_bool_then_to_if</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_bool_then.rs#L131">convert_bool_then.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a <code>bool::then</code> method call to an equivalent if expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="py">.then</span><span class="err">┃</span><span class="p">(||</span> <span class="n">val</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">None</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_for_loop_with_for_each" class="discrete"><code>convert_for_loop_with_for_each</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_iter_for_each_to_for.rs#L76">convert_iter_for_each_to_for.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a for loop into a for_each loop on the Iterator.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="k">for</span><span class="err">┃</span> <span class="n">v</span> <span class="n">in</span> <span class="n">x</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="n">x</span><span class="nf">.into_iter</span><span class="p">()</span><span class="nf">.for_each</span><span class="p">(|</span><span class="n">v</span><span class="p">|</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_if_to_bool_then" class="discrete"><code>convert_if_to_bool_then</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_bool_then.rs#L20">convert_bool_then.rs</a></p>
</div>
<div class="paragraph">
<p>Converts an if expression into a corresponding <code>bool::then</code> call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="err">┃</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">None</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cond</span><span class="nf">.then</span><span class="p">(||</span> <span class="n">val</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_integer_literal" class="discrete"><code>convert_integer_literal</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_integer_literal.rs#L5">convert_integer_literal.rs</a></p>
</div>
<div class="paragraph">
<p>Converts the base of integer literals to other bases.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">10</span><span class="err">┃</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">0b1010</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_into_to_from" class="discrete"><code>convert_into_to_from</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_into_to_from.rs#L8">convert_into_to_from.rs</a></p>
</div>
<div class="paragraph">
<p>Converts an Into impl to an equivalent From impl.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="err">┃</span><span class="n">Into</span><span class="o">&lt;</span><span class="n">Thing</span><span class="o">&gt;</span> <span class="k">for</span> <span class="nb">usize</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">into</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Thing</span> <span class="p">{</span>
        <span class="n">Thing</span> <span class="p">{</span>
            <span class="n">b</span><span class="p">:</span> <span class="k">self</span><span class="nf">.to_string</span><span class="p">(),</span>
            <span class="n">a</span><span class="p">:</span> <span class="k">self</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">usize</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">Thing</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Thing</span> <span class="p">{</span>
            <span class="n">b</span><span class="p">:</span> <span class="n">val</span><span class="nf">.to_string</span><span class="p">(),</span>
            <span class="n">a</span><span class="p">:</span> <span class="n">val</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_iter_for_each_to_for" class="discrete"><code>convert_iter_for_each_to_for</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_iter_for_each_to_for.rs#L11">convert_iter_for_each_to_for.rs</a></p>
</div>
<div class="paragraph">
<p>Converts an Iterator::for_each function into a for loop.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">iter</span> <span class="o">=</span> <span class="nn">iter</span><span class="p">::</span><span class="nf">repeat</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
    <span class="n">iter</span><span class="py">.for_each</span><span class="err">┃</span><span class="p">(|(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)|</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"x: {}, y: {}"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">iter</span> <span class="o">=</span> <span class="nn">iter</span><span class="p">::</span><span class="nf">repeat</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">in</span> <span class="n">iter</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"x: {}, y: {}"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_let_else_to_match" class="discrete"><code>convert_let_else_to_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_let_else_to_match.rs#L9">convert_let_else_to_match.rs</a></p>
</div>
<div class="paragraph">
<p>Converts let-else statement to let statement and match expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nf">Ok</span><span class="p">(</span><span class="k">mut</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="nf">f</span><span class="p">()</span> <span class="k">else</span><span class="err">┃</span> <span class="p">{</span> <span class="k">return</span> <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">x</span> <span class="o">=</span> <span class="k">match</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">x</span><span class="p">,</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="k">return</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_match_to_let_else" class="discrete"><code>convert_match_to_let_else</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_match_to_let_else.rs#L12">convert_match_to_let_else.rs</a></p>
</div>
<div class="paragraph">
<p>Converts let statement with match initializer to let-else statement.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">opt</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">val</span><span class="err">┃</span> <span class="o">=</span> <span class="k">match</span> <span class="n">opt</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">it</span><span class="p">,</span>
        <span class="nb">None</span> <span class="k">=&gt;</span> <span class="k">return</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">opt</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">=</span> <span class="n">opt</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_named_struct_to_tuple_struct" class="discrete"><code>convert_named_struct_to_tuple_struct</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_named_struct_to_tuple_struct.rs#L11">convert_named_struct_to_tuple_struct.rs</a></p>
</div>
<div class="paragraph">
<p>Converts struct with named fields to tuple struct, and analogously for enum variants with named
fields.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span><span class="err">┃</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Point</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">x</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.x</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">y</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.y</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">Point</span><span class="p">(</span><span class="nb">f32</span><span class="p">,</span> <span class="nb">f32</span><span class="p">);</span>

<span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nf">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">x</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">y</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_nested_function_to_closure" class="discrete"><code>convert_nested_function_to_closure</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_nested_function_to_closure.rs#L7">convert_nested_function_to_closure.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a function that is defined within the body of another function into a closure.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="n">fo</span><span class="err">┃</span><span class="nf">o</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">u64</span><span class="p">)</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"{}: {}"</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nf">foo</span><span class="p">(</span><span class="s">"Bar"</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">label</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">u64</span><span class="p">|</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"{}: {}"</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nf">foo</span><span class="p">(</span><span class="s">"Bar"</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_to_guarded_return" class="discrete"><code>convert_to_guarded_return</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_to_guarded_return.rs#L24">convert_to_guarded_return.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a large conditional with a guarded return.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">if</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">();</span>
        <span class="nf">bar</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">cond</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nf">foo</span><span class="p">();</span>
    <span class="nf">bar</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_tuple_return_type_to_struct" class="discrete"><code>convert_tuple_return_type_to_struct</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_tuple_return_type_to_struct.rs#L20">convert_tuple_return_type_to_struct.rs</a></p>
</div>
<div class="paragraph">
<p>This converts the return type of a function from a tuple type
into a tuple struct and updates the body accordingly.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="nf">foo</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="p">(</span><span class="err">┃</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nf">FooResult</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="nf">foo</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="nf">FooResult</span><span class="p">(</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">);</span>

<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">FooResult</span> <span class="p">{</span>
    <span class="nf">FooResult</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_tuple_struct_to_named_struct" class="discrete"><code>convert_tuple_struct_to_named_struct</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_tuple_struct_to_named_struct.rs#L10">convert_tuple_struct_to_named_struct.rs</a></p>
</div>
<div class="paragraph">
<p>Converts tuple struct to struct with named fields, and analogously for tuple enum variants.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span><span class="err">┃</span><span class="p">(</span><span class="nb">f32</span><span class="p">,</span> <span class="nb">f32</span><span class="p">);</span>

<span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nf">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">x</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">y</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">field1</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">field2</span><span class="p">:</span> <span class="nb">f32</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Point</span> <span class="p">{</span> <span class="n">field1</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">field2</span><span class="p">:</span> <span class="n">y</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">x</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.field1</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">y</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.field2</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_two_arm_bool_match_to_matches_macro" class="discrete"><code>convert_two_arm_bool_match_to_matches_macro</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_two_arm_bool_match_to_matches_macro.rs#L8">convert_two_arm_bool_match_to_matches_macro.rs</a></p>
</div>
<div class="paragraph">
<p>Convert 2-arm match that evaluates to a boolean into the equivalent matches! invocation.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">scrutinee</span><span class="err">┃</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span><span class="nf">.cond</span><span class="p">()</span> <span class="k">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">matches!</span><span class="p">(</span><span class="n">scrutinee</span><span class="p">,</span> <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span><span class="nf">.cond</span><span class="p">())</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_while_to_loop" class="discrete"><code>convert_while_to_loop</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_while_to_loop.rs#L19">convert_while_to_loop.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a while with a loop.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">while</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">loop</span> <span class="p">{</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">cond</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nf">foo</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="destructure_tuple_binding" class="discrete"><code>destructure_tuple_binding</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/destructure_tuple_binding.rs#L15">destructure_tuple_binding.rs</a></p>
</div>
<div class="paragraph">
<p>Destructures a tuple binding in place.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="err">┃</span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="n">t</span><span class="err">.</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="p">(</span><span class="err">┃</span><span class="mi">_0</span><span class="p">,</span> <span class="mi">_1</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">_0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="desugar_doc_comment" class="discrete"><code>desugar_doc_comment</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/desugar_doc_comment.rs#L14">desugar_doc_comment.rs</a></p>
</div>
<div class="paragraph">
<p>Desugars doc-comments to the attribute form.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="c">/// Multi-line┃</span>
<span class="c">/// comment</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nd">#[doc</span> <span class="nd">=</span> <span class="s">r"Multi-line
comment"</span><span class="nd">]</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="expand_glob_import" class="discrete"><code>expand_glob_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/expand_glob_import.rs#L18">expand_glob_import.rs</a></p>
</div>
<div class="paragraph">
<p>Expands glob imports.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">use</span> <span class="nn">foo</span><span class="p">::</span><span class="o">*</span><span class="err">┃</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">qux</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">use</span> <span class="nn">foo</span><span class="p">::{</span><span class="n">Bar</span><span class="p">,</span> <span class="n">Baz</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">qux</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_expressions_from_format_string" class="discrete"><code>extract_expressions_from_format_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/extract_expressions_from_format_string.rs#L14">extract_expressions_from_format_string.rs</a></p>
</div>
<div class="paragraph">
<p>Move an expression out of a format string.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">print!</span><span class="p">(</span><span class="s">"{var} {x + 1}┃"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">print!</span><span class="p">(</span><span class="s">"{var} {}"</span>┃<span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_function" class="discrete"><code>extract_function</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/extract_function.rs#L37">extract_function.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts selected statements and comments into new function.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="err">┃</span><span class="k">let</span> <span class="n">m</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="c">// calculate</span>
    <span class="k">let</span> <span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">;</span><span class="err">┃</span>
    <span class="k">let</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nf">fun_name</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="err">┃</span><span class="nf">fun_name</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">m</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="c">// calculate</span>
    <span class="k">let</span> <span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_module" class="discrete"><code>extract_module</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/extract_module.rs#L30">extract_module.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts a selected region as separate module. All the references, visibility and imports are
resolved.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="err">┃</span><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">+</span> <span class="mi">1</span>
<span class="p">}</span><span class="err">┃</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">+</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">modname</span> <span class="p">{</span>
    <span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
        <span class="n">name</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">+</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_struct_from_enum_variant" class="discrete"><code>extract_struct_from_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/extract_struct_from_enum_variant.rs#L26">extract_struct_from_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts a struct from enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="err">┃</span><span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="nf">One</span><span class="p">(</span><span class="n">One</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_type_alias" class="discrete"><code>extract_type_alias</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/extract_type_alias.rs#L10">extract_type_alias.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts the selected type as a type alias.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span> <span class="p">{</span>
    <span class="n">field</span><span class="p">:</span> <span class="err">┃</span><span class="p">(</span><span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">)</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">type</span> <span class="err">┃</span><span class="n">Type</span> <span class="o">=</span> <span class="p">(</span><span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">S</span> <span class="p">{</span>
    <span class="n">field</span><span class="p">:</span> <span class="n">Type</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_variable" class="discrete"><code>extract_variable</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/extract_variable.rs#L11">extract_variable.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts subexpression into a variable.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span><span class="err">┃</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="err">┃</span><span class="n">var_name</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">var_name</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="fix_visibility" class="discrete"><code>fix_visibility</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/fix_visibility.rs#L14">fix_visibility.rs</a></p>
</div>
<div class="paragraph">
<p>Makes inaccessible item public.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">m</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">m</span><span class="p">::</span><span class="n">frobnicate</span><span class="err">┃</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">m</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">m</span><span class="p">::</span><span class="nf">frobnicate</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_binexpr" class="discrete"><code>flip_binexpr</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/flip_binexpr.rs#L5">flip_binexpr.rs</a></p>
</div>
<div class="paragraph">
<p>Flips operands of a binary expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">+</span><span class="err">┃</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">90</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_comma" class="discrete"><code>flip_comma</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/flip_comma.rs#L5">flip_comma.rs</a></p>
</div>
<div class="paragraph">
<p>Flips two comma-separated items.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span><span class="err">┃</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_trait_bound" class="discrete"><code>flip_trait_bound</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/flip_trait_bound.rs#L9">flip_trait_bound.rs</a></p>
</div>
<div class="paragraph">
<p>Flips two trait bounds.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span><span class="err">┃</span> <span class="nb">Copy</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="nb">Copy</span> <span class="o">+</span> <span class="n">Clone</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_constant" class="discrete"><code>generate_constant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_constant.rs#L13">generate_constant.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a named constant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span> <span class="p">{</span> <span class="n">i</span><span class="p">:</span> <span class="nb">usize</span> <span class="p">}</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span> <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="nn">S</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="n">CAPA</span><span class="err">┃</span><span class="n">CITY</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span> <span class="p">{</span> <span class="n">i</span><span class="p">:</span> <span class="nb">usize</span> <span class="p">}</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span> <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">CAPACITY</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="err">┃</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="nn">S</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="n">CAPACITY</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_default_from_enum_variant" class="discrete"><code>generate_default_from_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_default_from_enum_variant.rs#L6">generate_default_from_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a Default impl for an enum using a variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="err">┃</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Default</span> <span class="k">for</span> <span class="n">Version</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">default</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="n">Minor</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_default_from_new" class="discrete"><code>generate_default_from_new</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_default_from_new.rs#L13">generate_default_from_new.rs</a></p>
</div>
<div class="paragraph">
<p>Generates default implementation from new method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Example</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">n</span><span class="err">┃</span><span class="nf">ew</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Self</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Example</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Self</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Default</span> <span class="k">for</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">default</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="nf">new</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_delegate_methods" class="discrete"><code>generate_delegate_methods</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_delegate_methods.rs#L15">generate_delegate_methods.rs</a></p>
</div>
<div class="paragraph">
<p>Generate delegate methods.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">Age</span><span class="p">(</span><span class="nb">u8</span><span class="p">);</span>
<span class="k">impl</span> <span class="n">Age</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">age</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">ag</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="n">Age</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">Age</span><span class="p">(</span><span class="nb">u8</span><span class="p">);</span>
<span class="k">impl</span> <span class="n">Age</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">age</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Age</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">fn</span> <span class="nf">age</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.age</span><span class="nf">.age</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_delegate_trait" class="discrete"><code>generate_delegate_trait</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_delegate_trait.rs#L26">generate_delegate_trait.rs</a></p>
</div>
<div class="paragraph">
<p>Generate delegate trait implementation for `StructField`s.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">SomeTrait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">fn_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">method_</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">A</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">SomeTrait</span> <span class="k">for</span> <span class="n">A</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">T</span> <span class="o">=</span> <span class="nb">u32</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">fn_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
        <span class="mi">42</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">method_</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="k">false</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
    <span class="n">a</span><span class="err">┃</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">SomeTrait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">fn_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">method_</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">A</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">SomeTrait</span> <span class="k">for</span> <span class="n">A</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">T</span> <span class="o">=</span> <span class="nb">u32</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">fn_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
        <span class="mi">42</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">method_</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="k">false</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">SomeTrait</span> <span class="k">for</span> <span class="n">B</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">T</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">A</span> <span class="k">as</span> <span class="n">SomeTrait</span><span class="o">&gt;</span><span class="p">::</span><span class="n">T</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">fn_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
        <span class="o">&lt;</span><span class="n">A</span> <span class="k">as</span> <span class="n">SomeTrait</span><span class="o">&gt;</span><span class="p">::</span><span class="nf">fn_</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="nf">method_</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="o">&lt;</span><span class="n">A</span> <span class="k">as</span> <span class="n">SomeTrait</span><span class="o">&gt;</span><span class="p">::</span><span class="nf">method_</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="py">.a</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_deref" class="discrete"><code>generate_deref</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_deref.rs#L16">generate_deref.rs</a></p>
</div>
<div class="paragraph">
<p>Generate <code>Deref</code> impl using the given struct field.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
   <span class="err">┃</span><span class="n">a</span><span class="p">:</span> <span class="n">A</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
   <span class="n">a</span><span class="p">:</span> <span class="n">A</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="nn">core</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="n">Deref</span> <span class="k">for</span> <span class="n">B</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">Target</span> <span class="o">=</span> <span class="n">A</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">deref</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nn">Self</span><span class="p">::</span><span class="n">Target</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">self</span><span class="py">.a</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_derive" class="discrete"><code>generate_derive</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_derive.rs#L8">generate_derive.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new <code>#[derive()]</code> clause to a struct or enum.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nd">#[derive(</span><span class="err">┃</span><span class="nd">)]</span>
<span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_doc_example" class="discrete"><code>generate_doc_example</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_documentation_template.rs#L76">generate_documentation_template.rs</a></p>
</div>
<div class="paragraph">
<p>Generates a rustdoc example when editing an item&#8217;s documentation.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="c">/// Adds two numbers.┃</span>
<span class="k">pub</span> <span class="k">fn</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="c">/// Adds two numbers.</span>
<span class="c">///</span>
<span class="c">/// # Examples</span>
<span class="c">///</span>
<span class="c">/// ```</span>
<span class="c">/// use test::add;</span>
<span class="c">///</span>
<span class="c">/// assert_eq!(add(a, b), );</span>
<span class="c">/// ```</span>
<span class="k">pub</span> <span class="k">fn</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_documentation_template" class="discrete"><code>generate_documentation_template</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_documentation_template.rs#L13">generate_documentation_template.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a documentation template above a function definition / declaration.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">pub</span> <span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">unsafe</span> <span class="k">fn</span> <span class="n">set_len</span><span class="err">┃</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">len</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="p">(),</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="cm">/* ... */</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">pub</span> <span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span>
    <span class="c">/// Sets the length of this [`S`].</span>
    <span class="c">///</span>
    <span class="c">/// # Errors</span>
    <span class="c">///</span>
    <span class="c">/// This function will return an error if .</span>
    <span class="c">///</span>
    <span class="c">/// # Safety</span>
    <span class="c">///</span>
    <span class="c">/// .</span>
    <span class="k">pub</span> <span class="k">unsafe</span> <span class="k">fn</span> <span class="nf">set_len</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">len</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="p">(),</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="cm">/* ... */</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_as_method" class="discrete"><code>generate_enum_as_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_enum_projection_method.rs#L59">generate_enum_projection_method.rs</a></p>
</div>
<div class="paragraph">
<p>Generate an <code>as_</code> method for this enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Value</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">as_text</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nn">Self</span><span class="p">::</span><span class="nf">Text</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nf">Some</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">None</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_is_method" class="discrete"><code>generate_enum_is_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_enum_is_method.rs#L11">generate_enum_is_method.rs</a></p>
</div>
<div class="paragraph">
<p>Generate an <code>is_</code> method for this enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="err">┃</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Version</span> <span class="p">{</span>
    <span class="c">/// Returns `true` if the version is [`Minor`].</span>
    <span class="c">///</span>
    <span class="c">/// [`Minor`]: Version::Minor</span>
    <span class="nd">#[must_use]</span>
    <span class="k">fn</span> <span class="nf">is_minor</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="nd">matches!</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nn">Self</span><span class="p">::</span><span class="n">Minor</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_try_into_method" class="discrete"><code>generate_enum_try_into_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_enum_projection_method.rs#L12">generate_enum_projection_method.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a <code>try_into_</code> method for this enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Value</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">try_into_text</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="n">Self</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nn">Self</span><span class="p">::</span><span class="nf">Text</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nf">Ok</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">Err</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_variant" class="discrete"><code>generate_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_enum_variant.rs#L10">generate_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a variant to an enum.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Countries</span> <span class="p">{</span>
    <span class="n">Ghana</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">country</span> <span class="o">=</span> <span class="nn">Countries</span><span class="p">::</span><span class="n">Lesotho</span><span class="err">┃</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Countries</span> <span class="p">{</span>
    <span class="n">Ghana</span><span class="p">,</span>
    <span class="n">Lesotho</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">country</span> <span class="o">=</span> <span class="nn">Countries</span><span class="p">::</span><span class="n">Lesotho</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_from_impl_for_enum" class="discrete"><code>generate_from_impl_for_enum</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_from_impl_for_enum.rs#L8">generate_from_impl_for_enum.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a From impl for this enum variant with one tuple field.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="err">┃</span><span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">A</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="nf">One</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_function" class="discrete"><code>generate_function</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_function.rs#L29">generate_function.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a stub function with a signature matching the function under the cursor.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">baz</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Baz</span> <span class="p">{</span> <span class="n">Baz</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">bar</span><span class="err">┃</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nf">baz</span><span class="p">());</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">baz</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Baz</span> <span class="p">{</span> <span class="n">Baz</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">bar</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nf">baz</span><span class="p">());</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="k">-&gt;</span> <span class="mi">_</span><span class="p">}</span> <span class="p">{</span>
    <span class="nd">todo!</span><span class="p">()</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_getter" class="discrete"><code>generate_getter</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_getter_or_setter.rs#L73">generate_getter_or_setter.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a getter method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">nam</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">name</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">self</span><span class="py">.name</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_getter_mut" class="discrete"><code>generate_getter_mut</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_getter_or_setter.rs#L127">generate_getter_or_setter.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a mut getter method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">nam</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">name_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="py">.name</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_impl" class="discrete"><code>generate_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_impl.rs#L8">generate_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new inherent impl for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="err">┃</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span><span class="err">┃</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_is_empty_from_len" class="discrete"><code>generate_is_empty_from_len</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_is_empty_from_len.rs#L12">generate_is_empty_from_len.rs</a></p>
</div>
<div class="paragraph">
<p>Generates is_empty implementation from the len method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">MyStruct</span> <span class="p">{</span> <span class="n">data</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">MyStruct</span> <span class="p">{</span>
    <span class="nd">#[must_use]</span>
    <span class="n">p</span><span class="err">┃</span><span class="n">ub</span> <span class="k">fn</span> <span class="nf">len</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.data</span><span class="nf">.len</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">MyStruct</span> <span class="p">{</span> <span class="n">data</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">MyStruct</span> <span class="p">{</span>
    <span class="nd">#[must_use]</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">len</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.data</span><span class="nf">.len</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="nd">#[must_use]</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">is_empty</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="k">self</span><span class="nf">.len</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_mut_trait_impl" class="discrete"><code>generate_mut_trait_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_mut_trait_impl.rs#L12">generate_mut_trait_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a IndexMut impl from the <code>Index</code> trait.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">pub</span> <span class="k">enum</span> <span class="n">Axis</span> <span class="p">{</span> <span class="n">X</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Z</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nn">core</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="nb">Index</span><span class="err">┃</span><span class="o">&lt;</span><span class="n">Axis</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">[</span><span class="n">T</span><span class="p">;</span> <span class="mi">3</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">Output</span> <span class="o">=</span> <span class="n">T</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">index</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Axis</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nn">Self</span><span class="p">::</span><span class="n">Output</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">self</span><span class="p">[</span><span class="n">index</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">pub</span> <span class="k">enum</span> <span class="n">Axis</span> <span class="p">{</span> <span class="n">X</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Z</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">}</span>

<span class="err">┃</span><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nn">core</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="n">IndexMut</span><span class="o">&lt;</span><span class="n">Axis</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">[</span><span class="n">T</span><span class="p">;</span> <span class="mi">3</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">index_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Axis</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="nn">Self</span><span class="p">::</span><span class="n">Output</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">self</span><span class="p">[</span><span class="n">index</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nn">core</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="nb">Index</span><span class="o">&lt;</span><span class="n">Axis</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">[</span><span class="n">T</span><span class="p">;</span> <span class="mi">3</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">Output</span> <span class="o">=</span> <span class="n">T</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">index</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Axis</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nn">Self</span><span class="p">::</span><span class="n">Output</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">self</span><span class="p">[</span><span class="n">index</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_new" class="discrete"><code>generate_new</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_new.rs#L14">generate_new.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a <code>fn new</code> for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">new</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Self</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_setter" class="discrete"><code>generate_setter</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_getter_or_setter.rs#L13">generate_getter_or_setter.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a setter method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">nam</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">set_name</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_trait_from_impl" class="discrete"><code>generate_trait_from_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_trait_from_impl.rs#L18">generate_trait_from_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Generate trait for an already defined inherent impl and convert impl to a trait impl.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">N</span><span class="p">:</span> <span class="nb">usize</span><span class="o">&gt;</span><span class="p">([</span><span class="nb">i32</span><span class="p">;</span> <span class="n">N</span><span class="p">]);</span>

<span class="nd">macro_rules!</span> <span class="n">const_maker</span> <span class="p">{</span>
    <span class="p">(</span><span class="nv">$t:ty</span><span class="p">,</span> <span class="nv">$v:tt</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
        <span class="k">const</span> <span class="n">CONST</span><span class="p">:</span> <span class="nv">$t</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">N</span><span class="p">:</span> <span class="nb">usize</span><span class="o">&gt;</span> <span class="n">Fo</span><span class="err">┃</span><span class="n">o</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c">// Used as an associated constant.</span>
    <span class="k">const</span> <span class="n">CONST_ASSOC</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">N</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">create</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(())</span>
    <span class="p">}</span>

    <span class="nd">const_maker!</span> <span class="p">{</span><span class="nb">i32</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">N</span><span class="p">:</span> <span class="nb">usize</span><span class="o">&gt;</span><span class="p">([</span><span class="nb">i32</span><span class="p">;</span> <span class="n">N</span><span class="p">]);</span>

<span class="nd">macro_rules!</span> <span class="n">const_maker</span> <span class="p">{</span>
    <span class="p">(</span><span class="nv">$t:ty</span><span class="p">,</span> <span class="nv">$v:tt</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">{</span>
        <span class="k">const</span> <span class="n">CONST</span><span class="p">:</span> <span class="nv">$t</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">trait</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">NewTrait</span><span class="p">}</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">N</span><span class="p">:</span> <span class="nb">usize</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c">// Used as an associated constant.</span>
    <span class="k">const</span> <span class="n">CONST_ASSOC</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">N</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">create</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="nd">const_maker!</span> <span class="p">{</span><span class="nb">i32</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">N</span><span class="p">:</span> <span class="nb">usize</span><span class="o">&gt;</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">NewTrait</span><span class="p">}</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c">// Used as an associated constant.</span>
    <span class="k">const</span> <span class="n">CONST_ASSOC</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="n">N</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">create</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(())</span>
    <span class="p">}</span>

    <span class="nd">const_maker!</span> <span class="p">{</span><span class="nb">i32</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_trait_impl" class="discrete"><code>generate_trait_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/generate_impl.rs#L59">generate_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new trait impl for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="err">┃</span><span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span> <span class="k">for</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_call" class="discrete"><code>inline_call</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_call.rs#L161">inline_call.rs</a></p>
</div>
<div class="paragraph">
<p>Inlines a function or method body creating a <code>let</code> statement per parameter unless the parameter
can be inlined. The parameter will be inlined either if it the supplied argument is a simple local
or if the parameter is only accessed inside the function body once.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="py">.unwrap</span><span class="err">┃</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="k">match</span> <span class="n">name</span> <span class="p">{</span>
            <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">val</span><span class="p">,</span>
            <span class="nb">None</span> <span class="k">=&gt;</span> <span class="nd">panic!</span><span class="p">(</span><span class="s">"called `Option::unwrap()` on a `None` value"</span><span class="p">),</span>
        <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_const_as_literal" class="discrete"><code>inline_const_as_literal</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_const_as_literal.rs#L5">inline_const_as_literal.rs</a></p>
</div>
<div class="paragraph">
<p>Evaluate and inline const variable as literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">const</span> <span class="n">STRING</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="o">=</span> <span class="s">"Hello, World!"</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">something</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nv">'static</span> <span class="nb">str</span> <span class="p">{</span>
    <span class="n">STRING</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">const</span> <span class="n">STRING</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="o">=</span> <span class="s">"Hello, World!"</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">something</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nv">'static</span> <span class="nb">str</span> <span class="p">{</span>
    <span class="s">"Hello, World!"</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_into_callers" class="discrete"><code>inline_into_callers</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_call.rs#L27">inline_call.rs</a></p>
</div>
<div class="paragraph">
<p>Inline a function or method body into all of its callers where possible, creating a <code>let</code> statement per parameter
unless the parameter can be inlined. The parameter will be inlined either if it the supplied argument is a simple local
or if the parameter is only accessed inside the function body once.
If all calls can be inlined the function will be removed.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">print</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{}</span>
<span class="k">fn</span> <span class="n">foo</span><span class="err">┃</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">word</span><span class="nf">.is_empty</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">foo</span><span class="p">(</span><span class="s">"안녕하세요"</span><span class="p">);</span>
    <span class="nf">foo</span><span class="p">(</span><span class="s">"여러분"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">print</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">{</span>
        <span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"안녕하세요"</span><span class="p">;</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">word</span><span class="nf">.is_empty</span><span class="p">()</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="p">{</span>
        <span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"여러분"</span><span class="p">;</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">word</span><span class="nf">.is_empty</span><span class="p">()</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_local_variable" class="discrete"><code>inline_local_variable</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_local_variable.rs#L18">inline_local_variable.rs</a></p>
</div>
<div class="paragraph">
<p>Inlines a local variable.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="err">┃</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_macro" class="discrete"><code>inline_macro</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_macro.rs#L6">inline_macro.rs</a></p>
</div>
<div class="paragraph">
<p>Takes a macro and inlines it one step.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="nd">macro_rules!</span> <span class="n">num</span> <span class="p">{</span>
    <span class="p">(</span><span class="o">+</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t:tt</span><span class="p">)</span><span class="o">+</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nd">num!</span><span class="p">(</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t</span> <span class="p">)</span><span class="o">+</span><span class="p">));</span>
    <span class="p">(</span><span class="o">-</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t:tt</span><span class="p">)</span><span class="o">+</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="nd">num!</span><span class="p">(</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t</span> <span class="p">)</span><span class="o">+</span><span class="p">));</span>
    <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">(</span><span class="o">-</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">number</span> <span class="o">=</span> <span class="n">num</span><span class="err">┃</span><span class="o">!</span><span class="p">(</span><span class="o">+</span> <span class="o">+</span> <span class="o">+</span> <span class="o">-</span> <span class="o">+</span> <span class="o">+</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{number}"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="nd">macro_rules!</span> <span class="n">num</span> <span class="p">{</span>
    <span class="p">(</span><span class="o">+</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t:tt</span><span class="p">)</span><span class="o">+</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nd">num!</span><span class="p">(</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t</span> <span class="p">)</span><span class="o">+</span><span class="p">));</span>
    <span class="p">(</span><span class="o">-</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t:tt</span><span class="p">)</span><span class="o">+</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="nd">num!</span><span class="p">(</span><span class="nv">$</span><span class="p">(</span><span class="nv">$t</span> <span class="p">)</span><span class="o">+</span><span class="p">));</span>
    <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">(</span><span class="o">-</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="nd">num!</span><span class="p">(</span><span class="o">+</span> <span class="o">+</span> <span class="o">-</span> <span class="o">+</span> <span class="o">+</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{number}"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_type_alias" class="discrete"><code>inline_type_alias</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_type_alias.rs#L105">inline_type_alias.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a type alias with its concrete type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">type</span> <span class="n">A</span><span class="o">&lt;</span><span class="n">T</span> <span class="o">=</span> <span class="nb">u32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span><span class="p">:</span> <span class="err">┃</span><span class="n">A</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">type</span> <span class="n">A</span><span class="o">&lt;</span><span class="n">T</span> <span class="o">=</span> <span class="nb">u32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_type_alias_uses" class="discrete"><code>inline_type_alias_uses</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/inline_type_alias.rs#L24">inline_type_alias.rs</a></p>
</div>
<div class="paragraph">
<p>Inline a type alias into all of its uses where possible.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">type</span> <span class="err">┃</span><span class="n">A</span> <span class="o">=</span> <span class="nb">i32</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">id</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">A</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">A</span> <span class="p">{</span>
    <span class="n">x</span>
<span class="p">};</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span><span class="p">:</span> <span class="n">A</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">id</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">x</span>
<span class="p">};</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="into_to_qualified_from" class="discrete"><code>into_to_qualified_from</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/into_to_qualified_from.rs#L10">into_to_qualified_from.rs</a></p>
</div>
<div class="paragraph">
<p>Convert an <code>into</code> method call to a fully qualified <code>from</code> call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="c">//- minicore: from</span>
<span class="k">struct</span> <span class="n">B</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">B</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
       <span class="n">B</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">b</span><span class="p">:</span> <span class="n">B</span> <span class="o">=</span> <span class="n">a</span><span class="py">.in</span><span class="err">┃</span><span class="nf">to</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">B</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">B</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
       <span class="n">B</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">b</span><span class="p">:</span> <span class="n">B</span> <span class="o">=</span> <span class="nn">B</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="introduce_named_generic" class="discrete"><code>introduce_named_generic</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/introduce_named_generic.rs#L8">introduce_named_generic.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>impl Trait</code> function argument with the named generic.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="err">┃</span><span class="k">impl</span> <span class="n">Bar</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="err">┃</span><span class="n">B</span><span class="p">:</span> <span class="n">Bar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">B</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="introduce_named_lifetime" class="discrete"><code>introduce_named_lifetime</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/introduce_named_lifetime.rs#L13">introduce_named_lifetime.rs</a></p>
</div>
<div class="paragraph">
<p>Change an anonymous lifetime to a named lifetime.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Cursor</span><span class="o">&lt;</span><span class="nv">'_</span><span class="err">┃</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">node</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="n">SyntaxNode</span> <span class="p">{</span>
        <span class="k">match</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Replace</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">node</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">impl</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="n">Cursor</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">node</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="n">SyntaxNode</span> <span class="p">{</span>
        <span class="k">match</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Replace</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">node</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="invert_if" class="discrete"><code>invert_if</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/invert_if.rs#L13">invert_if.rs</a></p>
</div>
<div class="paragraph">
<p>This transforms if expressions of the form <code>if !x {A} else {B}</code> into <code>if x {B} else {A}</code>
This also works with <code>!=</code>. This assist can only be applied with the cursor on <code>if</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="err">┃</span> <span class="o">!</span><span class="n">y</span> <span class="p">{</span> <span class="n">A</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">B</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">y</span> <span class="p">{</span> <span class="n">B</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">A</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="line_to_block" class="discrete"><code>line_to_block</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/convert_comment_block.rs#L9">convert_comment_block.rs</a></p>
</div>
<div class="paragraph">
<p>Converts comments between block and single-line form.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre>   <span class="c">// Multi-line┃</span>
   <span class="c">// comment</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre>  <span class="cm">/*
  Multi-line
  comment
  */</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="make_raw_string" class="discrete"><code>make_raw_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/raw_string.rs#L7">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>r#</code> to a plain string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">"Hello,┃ World!"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello, World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="make_usual_string" class="discrete"><code>make_usual_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/raw_string.rs#L47">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Turns a raw string into a plain string.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ "World!""#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">"Hello, </span><span class="se">\"</span><span class="s">World!</span><span class="se">\"</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_imports" class="discrete"><code>merge_imports</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/merge_imports.rs#L21">merge_imports.rs</a></p>
</div>
<div class="paragraph">
<p>Merges neighbor imports with a common prefix.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="err">┃</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">,</span> <span class="n">io</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_match_arms" class="discrete"><code>merge_match_arms</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/merge_match_arms.rs#L12">merge_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>Merges the current match arm with the following if their bodies are identical.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span><span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_nested_if" class="discrete"><code>merge_nested_if</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/merge_nested_if.rs#L11">merge_nested_if.rs</a></p>
</div>
<div class="paragraph">
<p>This transforms if expressions of the form <code>if x { if y {A} }</code> into <code>if x &amp;&amp; y {A}</code>
This assist can only be applied with the cursor on <code>if</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">i</span><span class="err">┃</span><span class="n">f</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">{</span> <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_arm_cond_to_match_guard" class="discrete"><code>move_arm_cond_to_match_guard</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_guard.rs#L69">move_guard.rs</a></p>
</div>
<div class="paragraph">
<p>Moves if expression from match arm body into a guard.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="err">┃</span><span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">{</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_bounds_to_where_clause" class="discrete"><code>move_bounds_to_where_clause</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_bounds.rs#L12">move_bounds.rs</a></p>
</div>
<div class="paragraph">
<p>Moves inline type bounds to a where clause.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">apply</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="err">┃</span><span class="n">F</span><span class="p">:</span> <span class="nf">FnOnce</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="p">{</span>
    <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">apply</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="k">where</span> <span class="n">F</span><span class="p">:</span> <span class="nf">FnOnce</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="p">{</span>
    <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_const_to_impl" class="discrete"><code>move_const_to_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_const_to_impl.rs#L14">move_const_to_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Move a local constant item in a method to impl&#8217;s associated constant. All the references will be
qualified with <code>Self::</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
        <span class="c">/// The answer.</span>
        <span class="k">const</span> <span class="n">C</span><span class="err">┃</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

        <span class="n">C</span> <span class="o">*</span> <span class="n">C</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span>
    <span class="c">/// The answer.</span>
    <span class="k">const</span> <span class="n">C</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="n">C</span> <span class="o">*</span> <span class="nn">Self</span><span class="p">::</span><span class="n">C</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_from_mod_rs" class="discrete"><code>move_from_mod_rs</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_from_mod_rs.rs#L12">move_from_mod_rs.rs</a></p>
</div>
<div class="paragraph">
<p>Moves xxx/mod.rs to xxx.rs.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="c">//- /main.rs</span>
<span class="k">mod</span> <span class="n">a</span><span class="p">;</span>
<span class="c">//- /a/mod.rs</span>
<span class="err">┃</span><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span><span class="err">┃</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_guard_to_arm_body" class="discrete"><code>move_guard_to_arm_body</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_guard.rs#L8">move_guard.rs</a></p>
</div>
<div class="paragraph">
<p>Moves match guard into match arm body.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="err">┃</span><span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
            <span class="nf">foo</span><span class="p">()</span>
        <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_module_to_file" class="discrete"><code>move_module_to_file</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_module_to_file.rs#L14">move_module_to_file.rs</a></p>
</div>
<div class="paragraph">
<p>Moves inline module&#8217;s contents to a separate file.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="err">┃</span><span class="n">foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_to_mod_rs" class="discrete"><code>move_to_mod_rs</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/move_to_mod_rs.rs#L12">move_to_mod_rs.rs</a></p>
</div>
<div class="paragraph">
<p>Moves xxx.rs to xxx/mod.rs.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="c">//- /main.rs</span>
<span class="k">mod</span> <span class="n">a</span><span class="p">;</span>
<span class="c">//- /a.rs</span>
<span class="err">┃</span><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span><span class="err">┃</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="normalize_import" class="discrete"><code>normalize_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/normalize_import.rs#L9">normalize_import.rs</a></p>
</div>
<div class="paragraph">
<p>Normalizes an import.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span><span class="err">┃</span> <span class="nn">std</span><span class="p">::{</span><span class="n">io</span><span class="p">,</span> <span class="p">{</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">}};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">,</span> <span class="n">io</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="promote_local_to_const" class="discrete"><code>promote_local_to_const</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/promote_local_to_const.rs#L19">promote_local_to_const.rs</a></p>
</div>
<div class="paragraph">
<p>Promotes a local variable to a const item changing its name to a <code>SCREAMING_SNAKE_CASE</code> variant
if the local uses no non-const expressions.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span><span class="err">┃</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="n">foo</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's true"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's false"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="err">┃</span><span class="n">FOO</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="n">FOO</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's true"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's false"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="pull_assignment_up" class="discrete"><code>pull_assignment_up</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/pull_assignment_up.rs#L11">pull_assignment_up.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts variable assignment to outside an if or match statement.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="k">if</span> <span class="k">true</span> <span class="p">{</span>
        <span class="err">┃</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="n">foo</span> <span class="o">=</span> <span class="k">if</span> <span class="k">true</span> <span class="p">{</span>
        <span class="mi">5</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="mi">4</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="qualify_method_call" class="discrete"><code>qualify_method_call</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/qualify_method_call.rs#L10">qualify_method_call.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces the method call with a qualified function call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">;</span>
    <span class="n">foo</span><span class="py">.fo</span><span class="err">┃</span><span class="nf">o</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">;</span>
    <span class="nn">Foo</span><span class="p">::</span><span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">foo</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="qualify_path" class="discrete"><code>qualify_path</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/qualify_path.rs#L21">qualify_path.rs</a></p>
</div>
<div class="paragraph">
<p>If the name is unresolved, provides all possible qualified paths for it.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="n">HashMap</span><span class="err">┃</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="reformat_number_literal" class="discrete"><code>reformat_number_literal</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/number_representation.rs#L7">number_representation.rs</a></p>
</div>
<div class="paragraph">
<p>Adds or removes separators from integer literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">1012345</span><span class="err">┃</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">1_012_345</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_dbg" class="discrete"><code>remove_dbg</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/remove_dbg.rs#L9">remove_dbg.rs</a></p>
</div>
<div class="paragraph">
<p>Removes <code>dbg!()</code> macro call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="err">┃</span><span class="nd">dbg!</span><span class="p">(</span><span class="mi">42</span> <span class="o">*</span> <span class="nd">dbg!</span><span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_hash" class="discrete"><code>remove_hash</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/raw_string.rs#L117">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Removes a hash from a raw string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r"Hello, World!"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_mut" class="discrete"><code>remove_mut</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/remove_mut.rs#L5">remove_mut.rs</a></p>
</div>
<div class="paragraph">
<p>Removes the <code>mut</code> keyword.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Walrus</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">feed</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="err">┃</span> <span class="k">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Walrus</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">feed</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_parentheses" class="discrete"><code>remove_parentheses</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/remove_parentheses.rs#L5">remove_parentheses.rs</a></p>
</div>
<div class="paragraph">
<p>Removes redundant parentheses.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="mi">_</span> <span class="o">=</span> <span class="err">┃</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="mi">_</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_unused_imports" class="discrete"><code>remove_unused_imports</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/remove_unused_imports.rs#L15">remove_unused_imports.rs</a></p>
</div>
<div class="paragraph">
<p>Removes any use statements in the current selection that are unused.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">X</span><span class="p">();</span>
<span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="n">X</span><span class="err">┃</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">X</span><span class="p">();</span>
<span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_unused_param" class="discrete"><code>remove_unused_param</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/remove_unused_param.rs#L15">remove_unused_param.rs</a></p>
</div>
<div class="paragraph">
<p>Removes unused function parameter.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="err">┃</span><span class="p">)</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">frobnicate</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">frobnicate</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="reorder_fields" class="discrete"><code>reorder_fields</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/reorder_fields.rs#L8">reorder_fields.rs</a></p>
</div>
<div class="paragraph">
<p>Reorder the fields of record literals and record patterns in the same order as in
the definition.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">i32</span><span class="p">};</span>
<span class="k">const</span> <span class="n">test</span><span class="p">:</span> <span class="n">Foo</span> <span class="o">=</span> <span class="err">┃</span><span class="n">Foo</span> <span class="p">{</span><span class="n">bar</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">i32</span><span class="p">};</span>
<span class="k">const</span> <span class="n">test</span><span class="p">:</span> <span class="n">Foo</span> <span class="o">=</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="reorder_impl_items" class="discrete"><code>reorder_impl_items</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/reorder_impl_items.rs#L11">reorder_impl_items.rs</a></p>
</div>
<div class="paragraph">
<p>Reorder the items of an <code>impl Trait</code>. The items will be ordered
in the same order as in the trait definition.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">A</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">B</span><span class="p">:</span> <span class="nb">u8</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
<span class="err">┃</span><span class="k">impl</span> <span class="n">Foo</span> <span class="k">for</span> <span class="n">Bar</span><span class="err">┃</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">B</span><span class="p">:</span> <span class="nb">u8</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">type</span> <span class="n">A</span> <span class="o">=</span> <span class="nb">String</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">A</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">B</span><span class="p">:</span> <span class="nb">u8</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Foo</span> <span class="k">for</span> <span class="n">Bar</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">A</span> <span class="o">=</span> <span class="nb">String</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">B</span><span class="p">:</span> <span class="nb">u8</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_arith_with_checked" class="discrete"><code>replace_arith_with_checked</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_arith_op.rs#L9">replace_arith_op.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces arithmetic on integers with the <code>checked_*</code> equivalent.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="err">┃</span><span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="nf">.checked_add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_arith_with_saturating" class="discrete"><code>replace_arith_with_saturating</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_arith_op.rs#L28">replace_arith_op.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces arithmetic on integers with the <code>saturating_*</code> equivalent.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="err">┃</span><span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="nf">.saturating_add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_arith_with_wrapping" class="discrete"><code>replace_arith_with_wrapping</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_arith_op.rs#L50">replace_arith_op.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces arithmetic on integers with the <code>wrapping_*</code> equivalent.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="err">┃</span><span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="nf">.wrapping_add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_char_with_string" class="discrete"><code>replace_char_with_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_string_with_char.rs#L51">replace_string_with_char.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a char literal with a string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="err">'</span><span class="p">{</span><span class="err">┃'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="s">"{"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_derive_with_manual_impl" class="discrete"><code>replace_derive_with_manual_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_derive_with_manual_impl.rs#L20">replace_derive_with_manual_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a <code>derive</code> impl into a manual one.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nd">#[derive(Deb</span><span class="err">┃</span><span class="nd">ug,</span> <span class="nd">Display)]</span>
<span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="nd">#[derive(Display)]</span>
<span class="k">struct</span> <span class="n">S</span><span class="p">;</span>

<span class="k">impl</span> <span class="n">Debug</span> <span class="k">for</span> <span class="n">S</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">fn</span> <span class="nf">fmt</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">Formatter</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="n">f</span><span class="nf">.debug_struct</span><span class="p">(</span><span class="s">"S"</span><span class="p">)</span><span class="nf">.finish</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_if_let_with_match" class="discrete"><code>replace_if_let_with_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_if_let_with_match.rs#L24">replace_if_let_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a <code>if let</code> expression with a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">if</span> <span class="k">let</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="o">=</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nf">bar</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_is_some_with_if_let_some" class="discrete"><code>replace_is_some_with_if_let_some</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_is_method_with_if_let_method.rs#L8">replace_is_method_with_if_let_method.rs</a></p>
</div>
<div class="paragraph">
<p>Replace <code>if x.is_some()</code> with <code>if let Some(_tmp) = x</code> or <code>if x.is_ok()</code> with <code>if let Ok(_tmp) = x</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="n">x</span><span class="py">.is_som</span><span class="err">┃</span><span class="nf">e</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">x</span><span class="p">})</span> <span class="o">=</span> <span class="n">x</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_let_with_if_let" class="discrete"><code>replace_let_with_if_let</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_let_with_if_let.rs#L15">replace_let_with_if_let.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>let</code> with an <code>if let</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nf">compute</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">compute</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nb">None</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="nf">compute</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">compute</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nb">None</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_match_with_if_let" class="discrete"><code>replace_match_with_if_let</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_if_let_with_match.rs#L187">replace_if_let_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a binary <code>match</code> with a wildcard pattern and no guards with an <code>if let</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nf">bar</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="o">=</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_named_generic_with_impl" class="discrete"><code>replace_named_generic_with_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_named_generic_with_impl.rs#L19">replace_named_generic_with_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces named generic with an <code>impl Trait</code> in function argument.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">new</span><span class="o">&lt;</span><span class="n">P</span><span class="err">┃</span><span class="p">:</span> <span class="n">AsRef</span><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="n">P</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="k">impl</span> <span class="n">AsRef</span><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_qualified_name_with_use" class="discrete"><code>replace_qualified_name_with_use</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_qualified_name_with_use.rs#L13">replace_qualified_name_with_use.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a use statement for a given fully-qualified name.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">process</span><span class="p">(</span><span class="n">map</span><span class="p">:</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="err">┃</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">process</span><span class="p">(</span><span class="n">map</span><span class="p">:</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_string_with_char" class="discrete"><code>replace_string_with_char</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_string_with_char.rs#L11">replace_string_with_char.rs</a></p>
</div>
<div class="paragraph">
<p>Replace string literal with char literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="s">"{┃"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="sc">'{'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_try_expr_with_match" class="discrete"><code>replace_try_expr_with_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_try_expr_with_match.rs#L18">replace_try_expr_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a <code>try</code> expression with a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">handle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">pat</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="err">┃</span><span class="o">?</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">handle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">pat</span> <span class="o">=</span> <span class="k">match</span> <span class="nf">Some</span><span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">it</span><span class="p">,</span>
        <span class="nb">None</span> <span class="k">=&gt;</span> <span class="k">return</span> <span class="nb">None</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_turbofish_with_explicit_type" class="discrete"><code>replace_turbofish_with_explicit_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_turbofish_with_explicit_type.rs#L13">replace_turbofish_with_explicit_type.rs</a></p>
</div>
<div class="paragraph">
<p>Converts <code>::&lt;_&gt;</code> to an explicit type assignment.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="p">)</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">make</span><span class="err">┃</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="p">)</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="nf">make</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_with_eager_method" class="discrete"><code>replace_with_eager_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_method_eager_lazy.rs#L89">replace_method_eager_lazy.rs</a></p>
</div>
<div class="paragraph">
<p>Replace <code>unwrap_or_else</code> with <code>unwrap_or</code> and <code>ok_or_else</code> with <code>ok_or</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">a</span><span class="py">.unwra</span><span class="err">┃</span><span class="nf">p_or_else</span><span class="p">(||</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">a</span><span class="nf">.unwrap_or</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_with_lazy_method" class="discrete"><code>replace_with_lazy_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/replace_method_eager_lazy.rs#L9">replace_method_eager_lazy.rs</a></p>
</div>
<div class="paragraph">
<p>Replace <code>unwrap_or</code> with <code>unwrap_or_else</code> and <code>ok_or</code> with <code>ok_or_else</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">a</span><span class="py">.unwra</span><span class="err">┃</span><span class="nf">p_or</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">a</span><span class="nf">.unwrap_or_else</span><span class="p">(||</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="sort_items" class="discrete"><code>sort_items</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/sort_items.rs#L12">sort_items.rs</a></p>
</div>
<div class="paragraph">
<p>Sorts item members alphabetically: fields, enum variants and methods.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="err">┃</span><span class="n">Foo</span><span class="err">┃</span> <span class="p">{</span> <span class="n">second</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span> <span class="n">first</span><span class="p">:</span> <span class="nb">String</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span> <span class="n">first</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">second</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<hr>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="err">┃</span><span class="n">Bar</span><span class="err">┃</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Bar</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<hr>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">impl</span> <span class="err">┃</span><span class="n">Baz</span><span class="err">┃</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Baz</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>There is a difference between sorting enum variants:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="err">┃</span><span class="n">Animal</span><span class="err">┃</span> <span class="p">{</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
  <span class="n">Cat</span> <span class="p">{</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span> <span class="p">},</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="n">Cat</span> <span class="p">{</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span> <span class="p">},</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>and sorting a single enum struct variant:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
  <span class="n">Cat</span> <span class="err">┃</span><span class="p">{</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span> <span class="p">}</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
  <span class="n">Cat</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span> <span class="p">},</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="split_import" class="discrete"><code>split_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/split_import.rs#L5">split_import.rs</a></p>
</div>
<div class="paragraph">
<p>Wraps the tail of import into braces.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="err">┃</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="toggle_ignore" class="discrete"><code>toggle_ignore</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/toggle_ignore.rs#L8">toggle_ignore.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>#[ignore]</code> attribute to the test.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="err">┃</span><span class="nd">#[test]</span>
<span class="k">fn</span> <span class="n">arithmetics</span> <span class="p">{</span>
    <span class="nd">assert_eq!</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nd">#[test]</span>
<span class="nd">#[ignore]</span>
<span class="k">fn</span> <span class="n">arithmetics</span> <span class="p">{</span>
    <span class="nd">assert_eq!</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unmerge_match_arm" class="discrete"><code>unmerge_match_arm</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unmerge_match_arm.rs#L10">unmerge_match_arm.rs</a></p>
</div>
<div class="paragraph">
<p>Splits the current match with a <code>|</code> pattern into two arms with identical bodies.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="err">┃</span><span class="p">|</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unmerge_use" class="discrete"><code>unmerge_use</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unmerge_use.rs#L12">unmerge_use.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts single use item from use list.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::{</span><span class="n">Debug</span><span class="p">,</span> <span class="n">Display</span><span class="err">┃</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::{</span><span class="n">Debug</span><span class="p">};</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Display</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unnecessary_async" class="discrete"><code>unnecessary_async</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unnecessary_async.rs#L15">unnecessary_async.rs</a></p>
</div>
<div class="paragraph">
<p>Removes the <code>async</code> mark from functions which have no <code>.await</code> in their body.
Looks for calls to the functions and removes the <code>.await</code> on the call site.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">pub</span> <span class="k">async</span> <span class="n">f</span><span class="err">┃</span><span class="n">n</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{}</span>
<span class="k">pub</span> <span class="k">async</span> <span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span> <span class="nf">foo</span><span class="p">()</span><span class="py">.await</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">pub</span> <span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{}</span>
<span class="k">pub</span> <span class="k">async</span> <span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unqualify_method_call" class="discrete"><code>unqualify_method_call</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unqualify_method_call.rs#L9">unqualify_method_call.rs</a></p>
</div>
<div class="paragraph">
<p>Transforms universal function call syntax into a method call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">std</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="nn">Add</span><span class="p">::</span><span class="n">add</span><span class="err">┃</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="nb">Add</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="mi">1</span><span class="nf">.add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unwrap_block" class="discrete"><code>unwrap_block</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unwrap_block.rs#L12">unwrap_block.rs</a></p>
</div>
<div class="paragraph">
<p>This assist removes if&#8230;&#8203;else, for, while and loop control statements to just keep the body.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">true</span> <span class="p">{</span><span class="err">┃</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unwrap_result_return_type" class="discrete"><code>unwrap_result_return_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unwrap_result_return_type.rs#L13">unwrap_result_return_type.rs</a></p>
</div>
<div class="paragraph">
<p>Unwrap the function&#8217;s return type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="err">┃</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">42i32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unwrap_tuple" class="discrete"><code>unwrap_tuple</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/unwrap_tuple.rs#L8">unwrap_tuple.rs</a></p>
</div>
<div class="paragraph">
<p>Unwrap the tuple to different variables.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">let</span> <span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="s">"Foo"</span><span class="p">,</span> <span class="s">"Bar"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="s">"Foo"</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">bar</span> <span class="o">=</span> <span class="s">"Bar"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="wrap_return_type_in_result" class="discrete"><code>wrap_return_type_in_result</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-assists/src/handlers/wrap_return_type_in_result.rs#L14">wrap_return_type_in_result.rs</a></p>
</div>
<div class="paragraph">
<p>Wrap the function&#8217;s return type into Result.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span><span class="err">┃</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">42i32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="diagnostics"><a class="anchor" href="#diagnostics"></a>Diagnostics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While most errors and warnings provided by rust-analyzer come from the <code>cargo check</code> integration, there&#8217;s a growing number of diagnostics implemented using rust-analyzer&#8217;s own analysis.
Some of these diagnostics don&#8217;t respect <code>#[allow]</code> or <code>\#[deny]</code> attributes yet, but can be turned off using the <code>rust-analyzer.diagnostics.enable</code>, <code>rust-analyzer.diagnostics.experimental.enable</code> or <code>rust-analyzer.diagnostics.disabled</code> settings.</p>
</div>
<div class="sect2">
<h3 id="clippy"><a class="anchor" href="#clippy"></a>Clippy</h3>
<div class="paragraph">
<p>To run <code>cargo clippy</code> instead of <code>cargo check</code>, you can set <code>"rust-analyzer.check.command": "clippy"</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="break-outside-of-loop"><a class="anchor" href="#break-outside-of-loop"></a>break-outside-of-loop</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/break_outside_of_loop.rs#L3">break_outside_of_loop.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if the <code>break</code> keyword is used outside of a loop.</p>
</div>
</div>
<div class="sect2">
<h3 id="expected-function"><a class="anchor" href="#expected-function"></a>expected-function</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/expected_function.rs#L5">expected_function.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a call is made on something that is not callable.</p>
</div>
</div>
<div class="sect2">
<h3 id="inactive-code"><a class="anchor" href="#inactive-code"></a>inactive-code</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/inactive_code.rs#L6">inactive_code.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for code with inactive <code>#[cfg]</code> attributes.</p>
</div>
</div>
<div class="sect2">
<h3 id="incoherent-impl"><a class="anchor" href="#incoherent-impl"></a>incoherent-impl</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/incoherent_impl.rs#L5">incoherent_impl.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if the targe type of an impl is from a foreign crate.</p>
</div>
</div>
<div class="sect2">
<h3 id="incorrect-ident-case"><a class="anchor" href="#incorrect-ident-case"></a>incorrect-ident-case</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/incorrect_case.rs#L13">incorrect_case.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if an item name doesn&#8217;t follow <a href="https://doc.rust-lang.org/1.0.0/style/style/naming/README.html">Rust naming convention</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="invalid-derive-target"><a class="anchor" href="#invalid-derive-target"></a>invalid-derive-target</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/invalid_derive_target.rs#L3">invalid_derive_target.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when the derive attribute is used on an item other than a <code>struct</code>,
<code>enum</code> or <code>union</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="macro-error"><a class="anchor" href="#macro-error"></a>macro-error</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/macro_error.rs#L3">macro_error.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for macro expansion errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="macro-error-2"><a class="anchor" href="#macro-error-2"></a>macro-error</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/macro_error.rs#L17">macro_error.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for macro expansion errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="malformed-derive"><a class="anchor" href="#malformed-derive"></a>malformed-derive</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/malformed_derive.rs#L3">malformed_derive.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when the derive attribute has invalid input.</p>
</div>
</div>
<div class="sect2">
<h3 id="mismatched-arg-count"><a class="anchor" href="#mismatched-arg-count"></a>mismatched-arg-count</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/mismatched_arg_count.rs#L31">mismatched_arg_count.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a function is invoked with an incorrect amount of arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="mismatched-tuple-struct-pat-arg-count"><a class="anchor" href="#mismatched-tuple-struct-pat-arg-count"></a>mismatched-tuple-struct-pat-arg-count</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/mismatched_arg_count.rs#L11">mismatched_arg_count.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a function is invoked with an incorrect amount of arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-fields"><a class="anchor" href="#missing-fields"></a>missing-fields</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/missing_fields.rs#L20">missing_fields.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if record lacks some fields that exist in the corresponding structure.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="nb">u8</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">u8</span> <span class="p">}</span>

<span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="mi">10</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-match-arm"><a class="anchor" href="#missing-match-arm"></a>missing-match-arm</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/missing_match_arms.rs#L3">missing_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if <code>match</code> block is missing one or more match arms.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-unsafe"><a class="anchor" href="#missing-unsafe"></a>missing-unsafe</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/missing_unsafe.rs#L10">missing_unsafe.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if an operation marked as <code>unsafe</code> is used outside of an <code>unsafe</code> function or block.</p>
</div>
</div>
<div class="sect2">
<h3 id="moved-out-of-ref"><a class="anchor" href="#moved-out-of-ref"></a>moved-out-of-ref</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/moved_out_of_ref.rs#L4">moved_out_of_ref.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered on moving non copy things out of references.</p>
</div>
</div>
<div class="sect2">
<h3 id="need-mut"><a class="anchor" href="#need-mut"></a>need-mut</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/mutability_errors.rs#L7">mutability_errors.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered on mutating an immutable variable.</p>
</div>
</div>
<div class="sect2">
<h3 id="no-such-field"><a class="anchor" href="#no-such-field"></a>no-such-field</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/no_such_field.rs#L12">no_such_field.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if created structure does not have field provided in record.</p>
</div>
</div>
<div class="sect2">
<h3 id="private-assoc-item"><a class="anchor" href="#private-assoc-item"></a>private-assoc-item</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/private_assoc_item.rs#L3">private_assoc_item.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if the referenced associated item is not visible from the current
module.</p>
</div>
</div>
<div class="sect2">
<h3 id="private-field"><a class="anchor" href="#private-field"></a>private-field</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/private_field.rs#L3">private_field.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if the accessed field is not visible from the current module.</p>
</div>
</div>
<div class="sect2">
<h3 id="remove-trailing-return"><a class="anchor" href="#remove-trailing-return"></a>remove-trailing-return</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/remove_trailing_return.rs#L8">remove_trailing_return.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when there is a redundant <code>return</code> at the end of a function
or closure.</p>
</div>
</div>
<div class="sect2">
<h3 id="remove-unnecessary-else"><a class="anchor" href="#remove-unnecessary-else"></a>remove-unnecessary-else</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/remove_unnecessary_else.rs#L14">remove_unnecessary_else.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when there is an <code>else</code> block for an <code>if</code> expression whose
then branch diverges (e.g. ends with a <code>return</code>, <code>continue</code>, <code>break</code> e.t.c).</p>
</div>
</div>
<div class="sect2">
<h3 id="replace-filter-map-next-with-find-map"><a class="anchor" href="#replace-filter-map-next-with-find-map"></a>replace-filter-map-next-with-find-map</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/replace_filter_map_next_with_find_map.rs#L11">replace_filter_map_next_with_find_map.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when <code>.filter_map(..).next()</code> is used, rather than the more concise <code>.find_map(..)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="trait-impl-incorrect-safety"><a class="anchor" href="#trait-impl-incorrect-safety"></a>trait-impl-incorrect-safety</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/trait_impl_incorrect_safety.rs#L6">trait_impl_incorrect_safety.rs</a></p>
</div>
<div class="paragraph">
<p>Diagnoses incorrect safety annotations of trait impls.</p>
</div>
</div>
<div class="sect2">
<h3 id="trait-impl-missing-assoc_item"><a class="anchor" href="#trait-impl-missing-assoc_item"></a>trait-impl-missing-assoc_item</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/trait_impl_missing_assoc_item.rs#L7">trait_impl_missing_assoc_item.rs</a></p>
</div>
<div class="paragraph">
<p>Diagnoses missing trait items in a trait impl.</p>
</div>
</div>
<div class="sect2">
<h3 id="trait-impl-orphan"><a class="anchor" href="#trait-impl-orphan"></a>trait-impl-orphan</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/trait_impl_orphan.rs#L5">trait_impl_orphan.rs</a></p>
</div>
<div class="paragraph">
<p>Only traits defined in the current crate can be implemented for arbitrary types</p>
</div>
</div>
<div class="sect2">
<h3 id="trait-impl-redundant-assoc_item"><a class="anchor" href="#trait-impl-redundant-assoc_item"></a>trait-impl-redundant-assoc_item</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/trait_impl_redundant_assoc_item.rs#L11">trait_impl_redundant_assoc_item.rs</a></p>
</div>
<div class="paragraph">
<p>Diagnoses redundant trait items in a trait impl.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-mismatch"><a class="anchor" href="#type-mismatch"></a>type-mismatch</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/type_mismatch.rs#L12">type_mismatch.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when the type of an expression or pattern does not match
the expected type.</p>
</div>
</div>
<div class="sect2">
<h3 id="typed-hole"><a class="anchor" href="#typed-hole"></a>typed-hole</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/typed_hole.rs#L18">typed_hole.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when an underscore expression is used in an invalid position.</p>
</div>
</div>
<div class="sect2">
<h3 id="undeclared-label"><a class="anchor" href="#undeclared-label"></a>undeclared-label</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/undeclared_label.rs#L3">undeclared_label.rs</a></p>
</div>
</div>
<div class="sect2">
<h3 id="unimplemented-builtin-macro"><a class="anchor" href="#unimplemented-builtin-macro"></a>unimplemented-builtin-macro</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unimplemented_builtin_macro.rs#L3">unimplemented_builtin_macro.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for builtin macros which are not yet implemented by rust-analyzer</p>
</div>
</div>
<div class="sect2">
<h3 id="unlinked-file"><a class="anchor" href="#unlinked-file"></a>unlinked-file</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unlinked_file.rs#L19">unlinked_file.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for files that are not included in any crate, or files that are part of
crates rust-analyzer failed to discover. The file will not have IDE features available.</p>
</div>
</div>
<div class="sect2">
<h3 id="unnecessary-braces"><a class="anchor" href="#unnecessary-braces"></a>unnecessary-braces</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/useless_braces.rs#L12">useless_braces.rs</a></p>
</div>
<div class="paragraph">
<p>Diagnostic for unnecessary braces in <code>use</code> items.</p>
</div>
</div>
<div class="sect2">
<h3 id="unreachable-label"><a class="anchor" href="#unreachable-label"></a>unreachable-label</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unreachable_label.rs#L3">unreachable_label.rs</a></p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-assoc-item"><a class="anchor" href="#unresolved-assoc-item"></a>unresolved-assoc-item</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_assoc_item.rs#L3">unresolved_assoc_item.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if the referenced associated item does not exist.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-extern-crate"><a class="anchor" href="#unresolved-extern-crate"></a>unresolved-extern-crate</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_extern_crate.rs#L3">unresolved_extern_crate.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover referred extern crate.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-field"><a class="anchor" href="#unresolved-field"></a>unresolved-field</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_field.rs#L13">unresolved_field.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a field does not exist on a given type.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-import"><a class="anchor" href="#unresolved-import"></a>unresolved-import</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_import.rs#L3">unresolved_import.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to resolve a path in
a <code>use</code> declaration.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-macro-call"><a class="anchor" href="#unresolved-macro-call"></a>unresolved-macro-call</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_macro_call.rs#L3">unresolved_macro_call.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to resolve the path
to a macro in a macro invocation.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-method"><a class="anchor" href="#unresolved-method"></a>unresolved-method</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_method.rs#L16">unresolved_method.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a method does not exist on a given type.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-module"><a class="anchor" href="#unresolved-module"></a>unresolved-module</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_module.rs#L8">unresolved_module.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover referred module.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-proc-macro"><a class="anchor" href="#unresolved-proc-macro"></a>unresolved-proc-macro</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unresolved_proc_macro.rs#L5">unresolved_proc_macro.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when a procedural macro can not be found. This usually means that
procedural macro support is simply disabled (and hence is only a weak hint instead of an error),
but can also indicate project setup problems.</p>
</div>
<div class="paragraph">
<p>If you are seeing a lot of "proc macro not expanded" warnings, you can add this option to the
<code>rust-analyzer.diagnostics.disabled</code> list to prevent them from showing. Alternatively you can
enable support for procedural macros (see <code>rust-analyzer.procMacro.attributes.enable</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="unused-mut"><a class="anchor" href="#unused-mut"></a>unused-mut</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/mutability_errors.rs#L45">mutability_errors.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when a mutable variable isn&#8217;t actually mutated.</p>
</div>
</div>
<div class="sect2">
<h3 id="unused-variables"><a class="anchor" href="#unused-variables"></a>unused-variables</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-lang/rust-analyzer/blob/master/crates/ide-diagnostics/src/handlers/unused_variables.rs#L3">unused_variables.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when a local variable is not used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="editor-features"><a class="anchor" href="#editor-features"></a>Editor Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="vs-code-2"><a class="anchor" href="#vs-code-2"></a>VS Code</h3>
<div class="sect3">
<h4 id="color-configurations"><a class="anchor" href="#color-configurations"></a>Color configurations</h4>
<div class="paragraph">
<p>It is possible to change the foreground/background color and font family/size of inlay hints.
Just add this to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"editor.inlayHints.fontFamily"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Courier New"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"editor.inlayHints.fontSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">

  </span><span class="nl">"workbench.colorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1">// Name of the theme you are currently using</span><span class="w">
    </span><span class="nl">"[Default Dark+]"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"editorInlayHint.foreground"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#868686f0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"editorInlayHint.background"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#3d3d3d48"</span><span class="p">,</span><span class="w">

      </span><span class="c1">// Overrides for specific kinds of inlay hints</span><span class="w">
      </span><span class="nl">"editorInlayHint.typeForeground"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fdb6fdf0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"editorInlayHint.parameterForeground"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fdb6fdf0"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="semantic-style-customizations"><a class="anchor" href="#semantic-style-customizations"></a>Semantic style customizations</h4>
<div class="paragraph">
<p>You can customize the look of different semantic elements in the source code.
For example, mutable bindings are underlined by default and you can override this behavior by adding the following section to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"*.mutable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"fontStyle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="c1">// underline is the default</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Most themes doesn&#8217;t support styling unsafe operations differently yet. You can fix this by adding overrides for the rules <code>operator.unsafe</code>, <code>function.unsafe</code>, and <code>method.unsafe</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"operator.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"function.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"method.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the top-level rules you can specify overrides for specific themes. For example, if you wanted to use a darker text color on a specific light theme, you might write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"operator.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"[Ayu Light]"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"operator.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#572300"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure you include the brackets around the theme name. For example, use <code>"[Ayu Light]"</code> to customize the theme Ayu Light.</p>
</div>
</div>
<div class="sect3">
<h4 id="special-when-clause-context-for-keybindings"><a class="anchor" href="#special-when-clause-context-for-keybindings"></a>Special <code>when</code> clause context for keybindings.</h4>
<div class="paragraph">
<p>You may use <code>inRustProject</code> context to configure keybindings for rust projects only.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ctrl+alt+d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.openDocs"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inRustProject"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>More about <code>when</code> clause contexts <a href="https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-runnable-environment-variables"><a class="anchor" href="#setting-runnable-environment-variables"></a>Setting runnable environment variables</h4>
<div class="paragraph">
<p>You can use "rust-analyzer.runnables.extraEnv" setting to define runnable environment-specific substitution variables.
The simplest way for all runnables in a bunch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnables.extraEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RUN_SLOW_TESTS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or it is possible to specify vars more granularly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnables.extraEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="c1">// "mask": null, // null mask means that this rule will be applied for all runnables</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"APP_DATA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="c1">// overwrites only APP_ID</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use any valid regular expression as a mask.
Also note that a full runnable name is something like <strong>run bin_or_example_name</strong>, <strong>test some::mod::test_name</strong> or <strong>test-mod some::mod</strong>, so it is possible to distinguish binaries, single tests, and test modules with this masks: <code>"^run"</code>, <code>"^test "</code> (the trailing space matters!), and <code>"^test-mod"</code> respectively.</p>
</div>
<div class="paragraph">
<p>If needed, you can set different values for different platforms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnables.extraEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"win32"</span><span class="p">,</span><span class="w"> </span><span class="c1">// windows only</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_DATA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows specific data"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"platform"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"linux"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_DATA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"linux data"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="c1">// for all platforms</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_COMMON_DATA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="compiler-feedback-from-external-commands"><a class="anchor" href="#compiler-feedback-from-external-commands"></a>Compiler feedback from external commands</h4>
<div class="paragraph">
<p>Instead of relying on the built-in <code>cargo check</code>, you can configure Code to run a command in the background and use the <code>$rustc-watch</code> problem matcher to generate inline error markers from its output.</p>
</div>
<div class="paragraph">
<p>To do this you need to create a new <a href="https://code.visualstudio.com/docs/editor/tasks">VS Code Task</a> and set <code>"rust-analyzer.checkOnSave": false</code> in preferences.</p>
</div>
<div class="paragraph">
<p>For example, if you want to run <a href="https://crates.io/crates/cargo-watch"><code>cargo watch</code></a> instead, you might add the following to <code>.vscode/tasks.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cargo watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"problemMatcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$rustc-watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isBackground"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="live-share"><a class="anchor" href="#live-share"></a>Live Share</h4>
<div class="paragraph">
<p>VS Code Live Share has partial support for rust-analyzer.</p>
</div>
<div class="paragraph">
<p>Live Share <em>requires</em> the official Microsoft build of VS Code, OSS builds will not work correctly.</p>
</div>
<div class="paragraph">
<p>The host&#8217;s rust-analyzer instance will be shared with all guests joining the session.
The guests do not have to have the rust-analyzer extension installed for this to work.</p>
</div>
<div class="paragraph">
<p>If you are joining a Live Share session and <em>do</em> have rust-analyzer installed locally, commands from the command palette will not work correctly since they will attempt to communicate with the local server.</p>
</div>
</div>
</div>
</div>
</div>
</article>

  </main>

  <footer>
    <div id="footer-inner">
      <div class="footer-by">
        <a href="https://ferrous-systems.com/">
          <img class="ferrous-logo" src="/assets/ferrous-logo.png">Ferrous Systems</a>
        &
        <a href="https://github.com/rust-analyzer/rust-analyzer/graphs/contributors">contributors</a>
      </div>

      <div id="footer-links">
        <a href="/feed.xml" class="footer-link">
          <i class="fa fa-rss"></i> rss
        </a>
        <a href="https://github.com/rust-analyzer/rust-analyzer.github.io" class="footer-link">
          <i class="fa fa-github"></i> src
        </a>
        <a href="https://opencollective.com/rust-analyzer/" class="footer-link">
          <i class="fa fa-github"></i> sponsor
        </a>
      </div>
    </div>
  </footer>
</body>

</html>
